!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.tvzPlayer=e()}}(function(){var e;return function e(t,r,i){function a(o,s){if(!r[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(n)return n(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[o]={exports:{}};t[o][0].call(d.exports,function(e){var r=t[o][1][e];return a(r||e)},d,d.exports,e,t,r,i)}return r[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,r){function i(e,t,r,i){return u=u||(document.addEventListener?{add:n,rm:o}:{add:s,rm:l}),u.add(e,t,r,i)}function a(e,t,r,i){return u=u||(document.addEventListener?{add:n,rm:o}:{add:s,rm:l}),u.rm(e,t,r,i)}function n(e,t,r,i){e.addEventListener(t,r,i)}function o(e,t,r,i){e.removeEventListener(t,r,i)}function s(e,t,r,i){if(i)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+t,r)}function l(e,t,r,i){e.detachEvent("on"+t,r)}i.removeEventListener=a,i.addEventListener=i,t.exports=i;var u=null},{}],2:[function(e,t,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function n(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!n(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,r,i,n,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],s(r))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,n=new Array(i-1),l=1;l<i;l++)n[l-1]=arguments[l];r.apply(this,n)}else if(o(r)){for(i=arguments.length,n=new Array(i-1),l=1;l<i;l++)n[l-1]=arguments[l];for(u=r.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,n)}return!0},i.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var r;r=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.trace)}return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var r,i,n,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],n=r.length,i=-1,r===t||a(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=n;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],a(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.listenerCount=function(e,t){return e._events&&e._events[t]?a(e._events[t])?1:e._events[t].length:0}},{}],3:[function(e,t,r){"use strict";var i=e("is-callable"),a=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=function(e,t,r){for(var i=0,a=e.length;i<a;i++)n.call(e,i)&&(null==r?t(e[i],i,e):t.call(r,e[i],i,e))},s=function(e,t,r){for(var i=0,a=e.length;i<a;i++)null==r?t(e.charAt(i),i,e):t.call(r,e.charAt(i),i,e)},l=function(e,t,r){for(var i in e)n.call(e,i)&&(null==r?t(e[i],i,e):t.call(r,e[i],i,e))},u=function(e,t,r){if(!i(t))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),"[object Array]"===a.call(e)?o(e,t,n):"string"==typeof e?s(e,t,n):l(e,t,n)};t.exports=u},{"is-callable":7}],4:[function(e,t,r){function i(){return!!o(document.body)}function a(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}function n(e){function t(){if(!n())return _.emit("release");_.emit("attain")}function r(){_.emit("error")}function i(){return p.apply(e,arguments)}function a(){var t=e.exitFullscreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.mozExitFullScreen||e.msExitFullscreen;if(t)return void t.apply(e,arguments);(c.exitFullscreen||c.webkitExitFullscreen||c.mozCancelFullScreen||c.mozExitFullScreen||c.msExitFullscreen).apply(c,arguments)}function n(){return c.fullscreenElement||c.webkitFullscreenElement||c.mozFullScreenElement||c.msFullscreenElement||null}function d(){for(var e=0,i=f.length;e<i;++e)u(c,f[e]+"fullscreenchange",t),u(c,f[e]+"fullscreenerror",r);u(c,"MSFullscreenChange",t),u(c,"MSFullscreenError",r)}for(var c=e.ownerDocument,p=(c.body,o(e)),_=new s,f=["","webkit","moz"],h=0,m=f.length;h<m;++h)l(c,f[h]+"fullscreenchange",t),l(c,f[h]+"fullscreenerror",r);return l(c,"MSFullscreenChange",t),l(c,"MSFullscreenError",r),_.release=a,_.request=i,_.dispose=d,_.target=n,o||setTimeout(function(){_.emit("error",new Error("fullscreen is not supported"))},0),_}function o(e){return e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen}t.exports=n,n.available=i,n.enabled=a;var s=e("events").EventEmitter,l=e("add-event-listener"),u=l.removeEventListener},{"add-event-listener":1,events:2}],5:[function(e,t,r){(function(e){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,r,i){"undefined"!=typeof window&&function(t,a){"object"==typeof i&&"object"==typeof r?r.exports=a():"function"==typeof e&&e.amd?e([],a):"object"==typeof i?i.Hls=a():t.Hls=a()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=11)}([function(e,t,r){"use strict";function i(){}function a(e,t){return t="["+e+"] > "+t}function n(e){var t=c.console[e];return t?function(){for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];i[0]&&(i[0]=a(e,i[0])),t.apply(c.console,i)}:i}function o(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach(function(t){d[t]=e[t]?e[t].bind(e):n(t)})}r.d(t,"a",function(){return p}),r.d(t,"b",function(){return _});var s=r(4),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={trace:i,debug:i,log:i,warn:i,info:i,error:i},d=u,c=Object(s.a)(),p=function(e){if(!0===e||"object"===(void 0===e?"undefined":l(e))){o(e,"debug","log","info","warn","error");try{d.log()}catch(e){d=u}}else d=u},_=d},function(e,t,r){"use strict";var i={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};t.a=i},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a});var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},a={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},function(e,t,r){"use strict";function i(){return"undefined"==typeof window?self:window}t.a=i},function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return a.path=o.normalizePath(a.path),o.buildURLFromParts(a)}var n=o.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=o.normalizePath(n.path),o.buildURLFromParts(n)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=i.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(u.netLoc=s.netLoc,"/"!==n.path[0]))if(n.path){var d=s.path,c=d.substring(0,d.lastIndexOf("/")+1)+n.path;u.path=o.normalizePath(c)}else u.path=s.path,n.params||(u.params=s.params,n.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?o.normalizePath(n.path):n.path),o.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(n,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"b",function(){return n});var a=function(){function e(){i(this,e)}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var i=r,a=0;e.isHeader(t,r);){a+=10;a+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(a+=10),r+=a}if(a>0)return t.subarray(i,i+a)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),i=0;i<r.length;i++){var a=r[i];if(e.isTimeStampFrame(a))return e._readTimeStamp(a)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4);return{type:r,size:i,data:t.subarray(10,10+i)}},e.getID3Frames=function(t){for(var r=0,i=[];e.isHeader(t,r);){var a=e._readSize(t,r+6);r+=10;for(var n=r+a;r+8<n;){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&i.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),i=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,i=e._utf8ArrayToStr(t.data.subarray(r));r+=i.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:i,data:a}}var n=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:n}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,i=e._utf8ArrayToStr(t.data.subarray(r));r+=i.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:i,data:a}}var n=e._utf8ArrayToStr(t.data);return{key:t.type,data:n}},e._utf8ArrayToStr=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.length,i=void 0,a=void 0,n=void 0,o="",s=0;s<r;){if(0===(i=e[s++])&&t)return o;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:a=e[s++],o+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=e[s++],n=e[s++],o+=String.fromCharCode((15&i)<<12|(63&a)<<6|(63&n)<<0)}}return o},e}(),n=a._utf8ArrayToStr;t.a=a},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,a,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(r=this._events[e],o(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(n(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),a=u.length,l=0;l<a;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var a;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.trace),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),a||(a=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var a=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,a,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,a=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){a=s;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t,r){i(this,e),this.subtle=t,this.aesIV=r}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),u=l,d=function(){function e(t,r){a(this,e),this.subtle=t,this.key=r}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),c=d,p=function(){function e(){n(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<4;i++)r[i]=t.getUint32(4*i);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],a=r[1],n=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],d=s[2],c=s[3],p=new Uint32Array(256),_=0,f=0,h=0;for(h=0;h<256;h++)p[h]=h<128?h<<1:h<<1^283;for(h=0;h<256;h++){var m=f^f<<1^f<<2^f<<3^f<<4;m=m>>>8^255&m^99,e[_]=m,t[m]=_;var g=p[_],v=p[g],y=p[v],A=257*p[m]^16843008*m;i[_]=A<<24|A>>>8,a[_]=A<<16|A>>>16,n[_]=A<<8|A>>>24,o[_]=A,A=16843009*y^65537*v^257*g^16843008*_,l[m]=A<<24|A>>>8,u[m]=A<<16|A>>>16,d[m]=A<<8|A>>>24,c[m]=A,_?(_=g^p[p[p[y^g]]],f^=p[p[f]]):_=f=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var a=this.keySize=t.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var n=this.ksRows=4*(a+6+1),o=void 0,s=void 0,l=this.keySchedule=new Uint32Array(n),u=this.invKeySchedule=new Uint32Array(n),d=this.sBox,c=this.rcon,p=this.invSubMix,_=p[0],f=p[1],h=p[2],m=p[3],g=void 0,v=void 0;for(o=0;o<n;o++)o<a?g=l[o]=t[o]:(v=g,o%a==0?(v=v<<8|v>>>24,v=d[v>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[255&v],v^=c[o/a|0]<<24):a>6&&o%a==4&&(v=d[v>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[255&v]),l[o]=g=(l[o-a]^v)>>>0);for(s=0;s<n;s++)o=n-s,v=3&s?l[o]:l[o-4],u[s]=s<4||o<=4?v:_[d[v>>>24]]^f[d[v>>>16&255]]^h[d[v>>>8&255]]^m[d[255&v]],u[s]=u[s]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,i){for(var a=this.keySize+6,n=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,u=l[0],d=l[1],c=l[2],p=l[3],_=this.uint8ArrayToUint32Array_(r),f=_[0],h=_[1],m=_[2],g=_[3],v=new Int32Array(e),y=new Int32Array(v.length),A=void 0,k=void 0,b=void 0,w=void 0,C=void 0,T=void 0,E=void 0,I=void 0,S=void 0,R=void 0,x=void 0,L=void 0,D=void 0,M=void 0,P=this.networkToHostOrderSwap;t<v.length;){for(S=P(v[t]),R=P(v[t+1]),x=P(v[t+2]),L=P(v[t+3]),C=S^n[0],T=L^n[1],E=x^n[2],I=R^n[3],D=4,M=1;M<a;M++)A=u[C>>>24]^d[T>>16&255]^c[E>>8&255]^p[255&I]^n[D],k=u[T>>>24]^d[E>>16&255]^c[I>>8&255]^p[255&C]^n[D+1],b=u[E>>>24]^d[I>>16&255]^c[C>>8&255]^p[255&T]^n[D+2],w=u[I>>>24]^d[C>>16&255]^c[T>>8&255]^p[255&E]^n[D+3],C=A,T=k,E=b,I=w,D+=4;A=s[C>>>24]<<24^s[T>>16&255]<<16^s[E>>8&255]<<8^s[255&I]^n[D],k=s[T>>>24]<<24^s[E>>16&255]<<16^s[I>>8&255]<<8^s[255&C]^n[D+1],b=s[E>>>24]<<24^s[I>>16&255]<<16^s[C>>8&255]<<8^s[255&T]^n[D+2],w=s[I>>>24]<<24^s[C>>16&255]<<16^s[T>>8&255]<<8^s[255&E]^n[D+3],D+=3,y[t]=P(A^f),y[t+1]=P(w^h),y[t+2]=P(b^m),y[t+3]=P(k^g),f=S,h=R,m=x,g=L,t+=4}return i?o(y.buffer):y.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),_=p,f=r(2),h=r(0),m=r(1),g=r(4),v=Object(g.a)(),y=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.removePKCS7Padding,n=void 0===a||a;if(s(this,e),this.logEnabled=!0,this.observer=t,this.config=r,this.removePKCS7Padding=n,n)try{var o=v.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,r,i){var a=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(h.b.log("JS AES decrypt"),this.logEnabled=!1);var n=this.decryptor;n||(this.decryptor=n=new _),n.expandKey(t),i(n.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(h.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var o=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new c(o,t)),this.fastAesKey.expandKey().then(function(n){new u(o,r).decrypt(e,n).catch(function(n){a.onWebCryptoError(n,e,t,r,i)}).then(function(e){i(e)})}).catch(function(n){a.onWebCryptoError(n,e,t,r,i)})}},e.prototype.onWebCryptoError=function(e,t,r,i,a){this.config.enableSoftwareAES?(h.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,i,a)):(h.b.error("decrypting error : "+e.message),this.observer.trigger(m.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.a=y},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=r(0),n=r(1),o=Math.pow(2,32)-1,s=function(){function e(t,r){i(this,e),this.observer=t,this.remuxer=r}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,r,i,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+i,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:a?t:null})),this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),i&&(this.videoCodec=i)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var i=[],a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0;if(t.data?(u=t.start,s=t.end,t=t.data):(u=0,s=t.byteLength),!r.length)return null;for(a=u;a<s;)n=e.readUint32(t,a),o=e.bin2str(t.subarray(a+4,a+8)),d=n>1?a+n:s,o===r[0]&&(1===r.length?i.push({data:t,start:a+8,end:d}):(l=e.findBox({data:t,start:a+8,end:d},r.slice(1)),l.length&&(i=i.concat(l)))),a=d;return i},e.parseSegmentIndex=function(t){var r=e.findBox(t,["moov"])[0],i=r?r.end:null,a=0,n=e.findBox(t,["sidx"]),o=void 0;if(!n||!n[0])return null;o=[],n=n[0];var s=n.data[0];a=0===s?8:16;var l=e.readUint32(n,a);a+=4;a+=0===s?8:16,a+=2;var u=n.end+0,d=e.readUint16(n,a);a+=2;for(var c=0;c<d;c++){var p=a,_=e.readUint32(n,p);p+=4;var f=2147483647&_;if(1===(2147483648&_)>>>31)return;var h=e.readUint32(n,p);p+=4,o.push({referenceSize:f,subsegmentDuration:h,info:{duration:h/l,start:u,end:u+f-1}}),u+=f,p+=4,a=p}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:d,references:o,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var n=i.data[i.start],o=0===n?12:20,s=e.readUint32(i,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){n=l.data[l.start],o=0===n?12:20;var u=e.readUint32(l,o),d=e.findBox(t,["mdia","hdlr"])[0];if(d){var c=e.bin2str(d.data.subarray(d.start+8,d.start+12)),p={soun:"audio",vide:"video"}[c];if(p){var _=e.findBox(t,["mdia","minf","stbl","stsd"]);if(_.length){_=_[0];var f=e.bin2str(_.data.subarray(_.start+12,_.start+16));a.b.log("MP4Demuxer:"+p+":"+f+" found")}r[s]={timescale:u,type:p},r[p]={timescale:u,id:s}}}}}}),r},e.getStartDTS=function(t,r){var i=void 0,a=void 0,n=void 0;return i=e.findBox(r,["moof","traf"]),a=[].concat.apply([],i.map(function(r){return e.findBox(r,["tfhd"]).map(function(i){var a=void 0,n=void 0;return a=e.readUint32(i,4),n=t[a].timescale||9e4,e.findBox(r,["tfdt"]).map(function(t){var r=void 0,i=void 0;return r=t.data[t.start],i=e.readUint32(t,4),1===r&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i})[0]/n})})),n=Math.min.apply(null,a),isFinite(n)?n:0},e.offsetStartDTS=function(t,r,i){e.findBox(r,["moof","traf"]).map(function(r){return e.findBox(r,["tfhd"]).map(function(a){var n=e.readUint32(a,4),s=t[n].timescale||9e4;e.findBox(r,["tfdt"]).map(function(t){var r=t.data[t.start],a=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,a-i*s);else{a*=Math.pow(2,32),a+=e.readUint32(t,8),a-=i*s,a=Math.max(a,0);var n=Math.floor(a/(o+1)),l=Math.floor(a%(o+1));e.writeUint32(t,4,n),e.writeUint32(t,8,l)}})})})},e.prototype.append=function(t,r,i,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s=void 0,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-r,this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,i,a,t)},e.prototype.destroy=function(){},e}();t.a=s},function(e,t,r){"use strict";function i(e,t,r,i){var a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,u=navigator.userAgent.toLowerCase(),d=i,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return a=1+((192&t[r+2])>>>6),(n=(60&t[r+2])>>>2)>c.length-1?void e.trigger(w.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+n}):(s=(1&t[r+2])<<2,s|=(192&t[r+3])>>>6,I.b.log("manifest codec:"+i+",ADTS data:type:"+a+",sampleingIndex:"+n+"["+c[n]+"Hz],channelConfig:"+s),/firefox/i.test(u)?n>=6?(a=5,l=new Array(4),o=n-3):(a=2,l=new Array(2),o=n):-1!==u.indexOf("android")?(a=2,l=new Array(2),o=n):(a=5,l=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&n>=6?o=n-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(n>=6&&1===s||/vivaldi/i.test(u))||!i&&1===s)&&(a=2,l=new Array(2)),o=n)),l[0]=a<<3,l[0]|=(14&n)>>1,l[1]|=(1&n)<<7,l[1]|=s<<3,5===a&&(l[1]|=(14&o)>>1,l[2]=(1&o)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:c[n],channelCount:s,codec:"mp4a.40."+a,manifestCodec:d})}function a(e,t){return 255===e[t]&&240==(246&e[t+1])}function n(e,t){return 1&e[t+1]?7:9}function o(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function s(e,t){return!!(t+1<e.length&&a(e,t))}function l(e,t){if(t+1<e.length&&a(e,t)){var r=n(e,t),i=r;t+5<e.length&&(i=o(e,t));var s=t+i;if(s===e.length||s+1<e.length&&a(e,s))return!0}return!1}function u(e,t,r,a,n){if(!e.samplerate){var o=i(t,r,a,n);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,I.b.log("parsed codec:"+e.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function d(e){return 9216e4/e}
function c(e,t,r,i,a){var s=void 0,l=void 0,u=void 0,d=e.length;if(s=n(e,t),l=o(e,t),(l-=s)>0&&t+s+l<=d)return u=r+i*a,{headerLength:s,frameLength:l,stamp:u}}function p(e,t,r,i,a){var n=d(e.samplerate),o=c(t,r,i,a,n);if(o){var s=o.stamp,l=o.headerLength,u=o.frameLength,p={unit:t.subarray(r+l,r+l+u),pts:s,dts:s};return e.samples.push(p),e.len+=u,{sample:p,length:u+l}}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var w=r(1),C=r(2),T=r(8),E=r(3),I=r(0),S=r(4),R=r(6),x=function(){function e(t,r,i){_(this,e),this.observer=t,this.config=i,this.remuxer=r}return e.prototype.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=R.a.getID3Data(e,0)||[],r=t.length,i=e.length;r<i;r++)if(l(e,r))return I.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var a=this._audioTrack,n=R.a.getID3Data(e,0)||[],o=R.a.getTimeStamp(n),l=Object(E.a)(o)?90*o:9e4*t,d=0,c=l,_=e.length,f=n.length,h=[{pts:c,dts:c,data:n}];f<_-1;)if(s(e,f)&&f+5<_){u(a,this.observer,e,f,a.manifestCodec);var m=p(a,e,f,l,d);if(!m){I.b.log("Unable to parse AAC frame");break}f+=m.length,c=m.sample.pts,d++}else R.a.isHeader(e,f)?(n=R.a.getID3Data(e,f),h.push({pts:c,dts:c,data:n}),f+=n.length):f++;this.remuxer.remux(a,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}(),L=x,D=r(9),M={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,i,a){if(!(r+24>t.length)){var n=this.parseHeader(t,r);if(n&&r+n.frameLength<=t.length){var o=9e4*n.samplesPerFrame/n.sampleRate,s=i+a*o,l={unit:t.subarray(r,r+n.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=n.channelCount,e.samplerate=n.sampleRate,e.samples.push(l),e.len+=n.frameLength,{sample:l,length:n.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,a=e[t+2]>>4&15,n=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==r&&0!==a&&15!==a&&3!==n){var s=3===r?3-i:3===i?3:4,l=1e3*M.BitratesMap[14*s+a-1],u=3===r?0:2===r?1:2,d=M.SamplingRateMap[3*u+n],c=e[t+3]>>6==3?1:2,p=M.SamplesCoefficients[r][i],_=M.BytesInSlot[i],f=8*p*_;return{sampleRate:d,channelCount:c,frameLength:parseInt(p*l/d+o,10)*_,samplesPerFrame:f}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),i=4;r&&r.frameLength&&(i=r.frameLength);var a=t+i;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1}},P=M,O=function(){function e(t){f(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");i.set(e.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},e.prototype.skipBits=function(e){var t=void 0;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&I.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e=void 0;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t=8,r=8,i=void 0,a=void 0;for(i=0;i<e;i++)0!==r&&(a=this.readEG(),r=(t+a+256)%256),t=0===r?t:r},e.prototype.readSPS=function(){var e=0,t=0,r=0,i=0,a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,c=this.readUByte.bind(this),p=this.readBits.bind(this),_=this.readUEG.bind(this),f=this.readBoolean.bind(this),h=this.skipBits.bind(this),m=this.skipEG.bind(this),g=this.skipUEG.bind(this),v=this.skipScalingList.bind(this);if(c(),a=c(),p(5),h(3),c(),g(),100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a){var y=_();if(3===y&&h(1),g(),g(),h(1),f())for(u=3!==y?8:12,d=0;d<u;d++)f()&&v(d<6?16:64)}g();var A=_();if(0===A)_();else if(1===A)for(h(1),m(),m(),n=_(),d=0;d<n;d++)m();g(),h(1),o=_(),s=_(),l=p(1),0===l&&h(1),h(1),f()&&(e=_(),t=_(),r=_(),i=_());var k=[1,1];if(f()&&f()){switch(c()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[c()<<8|c(),c()<<8|c()]}}return{width:Math.ceil(16*(o+1)-2*e-2*t),height:(2-l)*(s+1)*16-(l?2:4)*(r+i),pixelRatio:k}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),N=O,U=function(){function e(t,r,i,a){h(this,e),this.decryptdata=i,this.discardEPB=a,this.decrypter=new T.a(t,r,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,r,i){var a=e[t].unit,n=a.subarray(16,a.length-a.length%16),o=n.buffer.slice(n.byteOffset,n.byteOffset+n.length),s=this;this.decryptBuffer(o,function(n){n=new Uint8Array(n),a.set(n,16),i||s.decryptAacSamples(e,t+1,r)})},e.prototype.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,i),!i)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),i=0,a=32;a<=e.length-16;a+=160,i+=16)r.set(e.subarray(a,a+16),i);return r},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,i=32;i<=e.length-16;i+=160,r+=16)e.set(t.subarray(r,r+16),i);return e},e.prototype.decryptAvcSample=function(e,t,r,i,a,n){var o=this.discardEPB(a.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){a.data=l.getAvcDecryptedUnit(o,s),n||l.decryptAvcSamples(e,t,r+1,i)})},e.prototype.decryptAvcSamples=function(e,t,r,i){for(;;t++,r=0){if(t>=e.length)return void i();for(var a=e[t].units;!(r>=a.length);r++){var n=a[r];if(!(n.length<=48||1!==n.type&&5!==n.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,i,n,o),!o)return}}}},e}(),F=U,B={video:1,audio:2,id3:3,text:4},z=function(){function e(t,r,i,a){m(this,e),this.observer=t,this.config=i,this.typeSupported=a,this.remuxer=r,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new F(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&I.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:B[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,r,i,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",a),this._audioTrack=e.createTrack("audio",a),this._id3Track=e.createTrack("id3",a),this._txtTrack=e.createTrack("text",a),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=i,this._duration=a},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,r,i,a){var n=void 0,o=t.length,s=void 0,l=void 0,u=void 0,d=void 0,c=!1;this.contiguous=i;var p=this.pmtParsed,_=this._avcTrack,f=this._audioTrack,h=this._id3Track,m=_.pid,g=f.pid,v=h.pid,y=this._pmtId,A=_.pesData,k=f.pesData,b=h.pesData,T=this._parsePAT,E=this._parsePMT,S=this._parsePES,R=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),M=e._syncOffset(t);for(o-=(o+M)%188,n=M;n<o;n+=188)if(71===t[n]){if(s=!!(64&t[n+1]),l=((31&t[n+1])<<8)+t[n+2],(48&t[n+3])>>4>1){if((u=n+5+t[n+4])===n+188)continue}else u=n+4;switch(l){case m:s&&(A&&(d=S(A))&&void 0!==d.pts&&R(d,!1),A={data:[],size:0}),A&&(A.data.push(t.subarray(u,n+188)),A.size+=n+188-u);break;case g:s&&(k&&(d=S(k))&&void 0!==d.pts&&(f.isAAC?x(d):L(d)),k={data:[],size:0}),k&&(k.data.push(t.subarray(u,n+188)),k.size+=n+188-u);break;case v:s&&(b&&(d=S(b))&&void 0!==d.pts&&D(d),b={data:[],size:0}),b&&(b.data.push(t.subarray(u,n+188)),b.size+=n+188-u);break;case 0:s&&(u+=t[u]+1),y=this._pmtId=T(t,u);break;case y:s&&(u+=t[u]+1);var P=E(t,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);m=P.avc,m>0&&(_.pid=m),g=P.audio,g>0&&(f.pid=g,f.isAAC=P.isAAC),v=P.id3,v>0&&(h.pid=v),c&&!p&&(I.b.log("reparse from beginning"),c=!1,n=M-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(w.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});A&&(d=S(A))&&void 0!==d.pts?(R(d,!0),_.pesData=null):_.pesData=A,k&&(d=S(k))&&void 0!==d.pts?(f.isAAC?x(d):L(d),f.pesData=null):(k&&k.size&&I.b.log("last AAC PES packet truncated,might overlap between fragments"),f.pesData=k),b&&(d=S(b))&&void 0!==d.pts?(D(d),h.pesData=null):h.pesData=b,null==this.sampleAes?this.remuxer.remux(f,_,h,this._txtTrack,r,i,a):this.decryptAndRemux(f,_,h,this._txtTrack,r,i,a)},e.prototype.decryptAndRemux=function(e,t,r,i,a,n,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,i,a,n,o)})}else this.decryptAndRemuxAvc(e,t,r,i,a,n,o)},e.prototype.decryptAndRemuxAvc=function(e,t,r,i,a,n,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,i,a,n,o)})}else this.remuxer.remux(e,t,r,i,a,n,o)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,r,i){var a=void 0,n=void 0,o=void 0,s=void 0,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=(15&e[t+1])<<8|e[t+2],n=t+3+a-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;t<n;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){I.b.log("unkown stream type:"+e[t]);break}case 15:-1===l.audio&&(l.audio=s);break;case 21:-1===l.id3&&(l.id3=s);break;case 219:if(!i){I.b.log("unkown stream type:"+e[t]);break}case 27:-1===l.avc&&(l.avc=s);break;case 3:case 4:r?-1===l.audio&&(l.audio=s,l.isAAC=!1):I.b.log("MPEG audio found, not supported in this browser for now");break;case 36:I.b.warn("HEVC stream type found, not supported for now");break;default:I.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return l},e.prototype._parsePES=function(e){var t=0,r=void 0,i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var c=new Uint8Array(d[0].length+d[1].length);c.set(d[0]),c.set(d[1],d[0].length),d[0]=c,d.splice(1,1)}if(r=d[0],1===(r[0]<<16)+(r[1]<<8)+r[2]){if((a=(r[4]<<8)+r[5])&&a>e.size-6)return null;i=r[7],192&i&&(s=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2,s>4294967295&&(s-=8589934592),64&i?(l=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2,l>4294967295&&(l-=8589934592),s-l>54e5&&(I.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),n=r[8],u=n+9,e.size-=u,o=new Uint8Array(e.size);for(var p=0,_=d.length;p<_;p++){r=d[p];var f=r.byteLength;if(u){if(u>f){u-=f;continue}r=r.subarray(u),f-=u,u=0}o.set(r,t),t+=f}return a&&(a-=n+3),{data:o,pts:s,dts:l,len:a}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,i=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,r.push(e)):t.dropped++}e.debug.length&&I.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var r=this,i=this._avcTrack,a=this._parseAVCNALu(e.data),n=void 0,o=this.avcSample,s=void 0,l=!1,u=void 0,d=this.pushAccesUnit.bind(this),c=function(e,t,r,i){return{key:e,pts:t,dts:r,units:[],debug:i}};e.data=null,o&&a.length&&!i.audFound&&(d(o,i),o=this.avcSample=c(!1,e.pts,e.dts,"")),a.forEach(function(t){switch(t.type){case 1:s=!0,o||(o=r.avcSample=c(!0,e.pts,e.dts,"")),o.frame=!0;var a=t.data;if(l&&a.length>4){var p=new N(a).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(o.key=!0)}break;case 5:s=!0,o||(o=r.avcSample=c(!0,e.pts,e.dts,"")),o.key=!0,o.frame=!0;break;case 6:s=!0,n=new N(r.discardEPB(t.data)),n.readUByte();for(var _=0,f=0,h=!1,m=0;!h&&n.bytesAvailable>1;){_=0;do{m=n.readUByte(),_+=m}while(255===m);f=0;do{m=n.readUByte(),f+=m}while(255===m);if(4===_&&0!==n.bytesAvailable){h=!0;if(181===n.readUByte()){if(49===n.readUShort()){if(1195456820===n.readUInt()){if(3===n.readUByte()){var g=n.readUByte(),v=n.readUByte(),y=31&g,A=[g,v];for(u=0;u<y;u++)A.push(n.readUByte()),A.push(n.readUByte()),A.push(n.readUByte());r._insertSampleInOrder(r._txtTrack.samples,{type:3,pts:e.pts,bytes:A})}}}}}else if(f<n.bytesAvailable)for(u=0;u<f;u++)n.readUByte()}break;case 7:if(s=!0,l=!0,!i.sps){n=new N(t.data);var k=n.readSPS();i.width=k.width,i.height=k.height,i.pixelRatio=k.pixelRatio,i.sps=[t.data],i.duration=r._duration;var b=t.data.subarray(1,4),w="avc1.";for(u=0;u<3;u++){var C=b[u].toString(16);C.length<2&&(C="0"+C),w+=C}i.codec=w}break;case 8:s=!0,i.pps||(i.pps=[t.data]);break;case 9:s=!1,i.audFound=!0,o&&d(o,i),o=r.avcSample=c(!1,e.pts,e.dts,"");break;case 12:s=!1;break;default:s=!1,o&&(o.debug+="unknown NAL "+t.type+" ")}if(o&&s){o.units.push(t)}}),t&&o&&(d(o,i),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var i=r-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var r=this._avcTrack,i=r.samples;e=i[i.length-1]}if(e){var a=e.units;t=a[a.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t=0,r=e.byteLength,i=void 0,a=void 0,n=this._avcTrack,o=n.naluState||0,s=o,l=[],u=void 0,d=void 0,c=-1,p=void 0;for(-1===o&&(c=0,p=31&e[0],o=0,t=1);t<r;)if(i=e[t++],o)if(1!==o)if(i)if(1===i){if(c>=0)u={data:e.subarray(c,t-o-1),type:p},l.push(u);else{var _=this._getLastNalUnit();if(_&&(s&&t<=4-s&&_.state&&(_.data=_.data.subarray(0,_.data.byteLength-s)),(a=t-o-1)>0)){var f=new Uint8Array(_.data.byteLength+a);f.set(_.data,0),f.set(e.subarray(0,a),_.data.byteLength),_.data=f}}t<r?(d=31&e[t],c=t,p=d,o=0):o=-1}else o=0;else o=3;else o=i?0:2;else o=i?0:1;if(c>=0&&o>=0&&(u={data:e.subarray(c,r),type:p,state:o},l.push(u)),0===l.length){var h=this._getLastNalUnit();if(h){var m=new Uint8Array(h.data.byteLength+e.byteLength);m.set(h.data,0),m.set(e,h.data.byteLength),h.data=m}}return n.naluState=o,l},e.prototype.discardEPB=function(e){for(var t=e.byteLength,r=[],i=1,a=void 0,n=void 0;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;a=t-r.length,n=new Uint8Array(a);var o=0;for(i=0;i<a;o++,i++)o===r[0]&&(o++,r.shift()),n[i]=e[o];return n},e.prototype._parseAACPES=function(e){var t=this._audioTrack,r=e.data,i=e.pts,a=this.aacOverFlow,n=this.aacLastPTS,o=void 0,l=void 0,c=void 0,_=void 0,f=void 0;if(a){var h=new Uint8Array(a.byteLength+r.byteLength);h.set(a,0),h.set(r,a.byteLength),r=h}for(c=0,f=r.length;c<f-1&&!s(r,c);c++);if(c){var m=void 0,g=void 0;if(c<f-1?(m="AAC PES did not start with ADTS header,offset:"+c,g=!1):(m="no ADTS header found in AAC PES",g=!0),I.b.warn("parsing error:"+m),this.observer.trigger(w.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.FRAG_PARSING_ERROR,fatal:g,reason:m}),g)return}if(u(t,this.observer,r,c,this.audioCodec),l=0,o=d(t.samplerate),a&&n){var v=n+o;Math.abs(v-i)>1&&(I.b.log("AAC: align PTS for overlapping frames by "+Math.round((v-i)/90)),i=v)}for(;c<f;)if(s(r,c)&&c+5<f){var y=p(t,r,c,i,l);if(!y)break;c+=y.length,_=y.sample.pts,l++}else c++;a=c<f?r.subarray(c,f):null,this.aacOverFlow=a,this.aacLastPTS=_},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,i=0,a=0,n=e.pts;a<r;)if(P.isHeader(t,a)){var o=P.appendFrame(this._audioTrack,t,a,n,i);if(!o)break;a+=o.length,i++}else a++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),G=z,j=function(){function e(t,r,i){g(this,e),this.observer=t,this.config=i,this.remuxer=r}return e.prototype.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t=void 0,r=void 0,i=R.a.getID3Data(e,0);if(i&&void 0!==R.a.getTimeStamp(i))for(t=i.length,r=Math.min(e.length-1,t+100);t<r;t++)if(P.probe(e,t))return I.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var a=R.a.getID3Data(e,0),n=R.a.getTimeStamp(a),o=n?90*n:9e4*t,s=a.length,l=e.length,u=0,d=0,c=this._audioTrack,p=[{pts:o,dts:o,data:a}];s<l;)if(P.isHeader(e,s)){var _=P.appendFrame(c,e,s,o,u);if(!_)break;s+=_.length,d=_.sample.pts,u++}else R.a.isHeader(e,s)?(a=R.a.getID3Data(e,s),p.push({pts:d,dts:d,data:a}),s+=a.length):s++;this.remuxer.remux(c,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}(),V=j,H=function(){function e(){v(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),q=H,K=Math.pow(2,32)-1,W=function(){function e(){y(this,e)}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t=void 0;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=n,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,a))},e.box=function(e){for(var t=Array.prototype.slice.call(arguments,1),r=8,i=t.length,a=i,n=void 0;i--;)r+=t[i].byteLength;for(n=new Uint8Array(r),n[0]=r>>24&255,n[1]=r>>16&255,n[2]=r>>8&255,n[3]=255&r,n.set(e,4),i=0,r=8;i<a;i++)n.set(t[i],r),r+=t[i].byteLength;return n},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(K+1)),a=Math.floor(r%(K+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))},e.moov=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(K+1)),a=Math.floor(r%(K+1)),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,n)},e.sdtp=function(t){var r=t.samples||[],i=new Uint8Array(4+r.length),a=void 0,n=void 0;for(n=0;n<r.length;n++)a=r[n].flags,i[n+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return e.box(e.types.sdtp,i)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r=[],i=[],a=void 0,n=void 0,o=void 0;for(a=0;a<t.sps.length;a++)n=t.sps[a],o=n.byteLength,r.push(o>>>8&255),r.push(255&o),r=r.concat(Array.prototype.slice.call(n));for(a=0;a<t.pps.length;a++)n=t.pps[a],o=n.byteLength,i.push(o>>>8&255),i.push(255&o),i=i.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|t.sps.length].concat(r).concat([t.pps.length]).concat(i))),l=t.width,u=t.height,d=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,a=t.width,n=t.height,o=Math.floor(i/(K+1)),s=Math.floor(i%(K+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,n>>8&255,255&n,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),a=t.id,n=Math.floor(r/(K+1)),o=Math.floor(r%(K+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var i=t.samples||[],a=i.length,n=12+16*a,o=new Uint8Array(n),s=void 0,l=void 0,u=void 0,d=void 0,c=void 0,p=void 0;for(r+=8+n,o.set([0,0,15,1,a>>>24&255,a>>>16&255,a>>>8&255,255&a,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),s=0;s<a;s++)l=i[s],u=l.duration,d=l.size,c=l.flags,p=l.cts,o.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,d>>>24&255,d>>>16&255,d>>>8&255,255&d,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,p>>>24&255,p>>>16&255,p>>>8&255,255&p],12+16*s);return e.box(e.types.trun,o)},e.initSegment=function(t){e.types||e.init();var r=e.moov(t),i=void 0;return i=new Uint8Array(e.FTYP.byteLength+r.byteLength),i.set(e.FTYP),i.set(r,e.FTYP.byteLength),i},e}(),Y=W,Z=function(){function e(t,r,i,a){A(this,e),this.observer=t,this.config=r,this.typeSupported=i;var n=navigator.userAgent;this.isSafari=a&&a.indexOf("Apple")>-1&&n&&!n.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,r,i,a,n,o){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var s=e.samples.length,l=t.samples.length,u=a,d=a;if(s&&l){var c=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;u+=Math.max(0,c),d+=Math.max(0,-c)}if(s){e.timescale||(I.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var p=this.remuxAudio(e,u,n,o);if(l){var _=void 0;p&&(_=p.endPTS-p.startPTS),t.timescale||(I.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,d,n,_,o)}}else if(l){var f=this.remuxVideo(t,d,n,0,o);f&&e.codec&&this.remuxEmptyAudio(e,u,n,f)}}r.samples.length&&this.remuxID3(r,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(w.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,r){var i=this.observer,a=e.samples,n=t.samples,o=this.typeSupported,s="audio/mp4",l={},u={tracks:l},d=void 0===this._initPTS,c=void 0,p=void 0;if(d&&(c=p=1/0),e.config&&a.length&&(e.timescale=e.samplerate,I.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(o.mpeg?(s="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3")),l.audio={container:s,codec:e.codec,initSegment:!e.isAAC&&o.mpeg?new Uint8Array:Y.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(c=p=a[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&n.length){var _=t.inputTimeScale;t.timescale=_,l.video={container:"video/mp4",codec:t.codec,initSegment:Y.initSegment([t]),metadata:{width:t.width,height:t.height}},d&&(c=Math.min(c,n[0].pts-_*r),p=Math.min(p,n[0].dts-_*r),this.observer.trigger(w.a.INIT_PTS_FOUND,{initPTS:c}))}Object.keys(l).length?(i.trigger(w.a.FRAG_PARSING_INIT_SEGMENT,u),this.ISGenerated=!0,d&&(this._initPTS=c,this._initDTS=p)):i.trigger(w.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,r,i,a){var n=8,o=e.timescale,s=void 0,l=void 0,u=void 0,d=void 0,c=void 0,p=void 0,_=void 0,f=e.samples,h=[],m=f.length,g=this._PTSNormalize,v=this._initDTS,y=this.nextAvcDts,A=this.isSafari;if(0!==m){A&&(r|=f.length&&y&&(a&&Math.abs(t-y/o)<.1||Math.abs(f[0].pts-y-v)<o/5)),r||(y=t*o),f.forEach(function(e){e.pts=g(e.pts-v,y),e.dts=g(e.dts-v,y)}),f.sort(function(e,t){var r=e.dts-t.dts,i=e.pts-t.pts;return r||i||e.id-t.id});var k=f.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(k<0){I.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(k/90)+" ms to overcome this issue");for(var b=0;b<f.length;b++)f[b].dts+=k}var T=f[0];c=Math.max(T.dts,0),d=Math.max(T.pts,0);var E=Math.round((c-y)/90);r&&E&&(E>1?I.b.log("AVC:"+E+" ms hole between fragments detected,filling it"):E<-1&&I.b.log("AVC:"+-E+" ms overlapping between fragments detected"),c=y,f[0].dts=c,d=Math.max(d-E,y),f[0].pts=d,I.b.log("Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(c/90)+",delta:"+E+" ms")),c,T=f[f.length-1],_=Math.max(T.dts,0),p=Math.max(T.pts,0,_),A&&(s=Math.round((_-c)/(f.length-1)));for(var S=0,R=0,x=0;x<m;x++){for(var L=f[x],D=L.units,M=D.length,P=0,O=0;O<M;O++)P+=D[O].data.length;R+=P,S+=M,L.length=P,L.dts=A?c+x*s:Math.max(L.dts,c),L.pts=Math.max(L.pts,L.dts)}var N=R+4*S+8;try{l=new Uint8Array(N)}catch(e){return void this.observer.trigger(w.a.ERROR,{type:C.b.MUX_ERROR,details:C.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var U=new DataView(l.buffer);U.setUint32(0,N),l.set(Y.types.mdat,4);for(var F=0;F<m;F++){
for(var B=f[F],z=B.units,G=0,j=void 0,V=0,H=z.length;V<H;V++){var q=z[V],K=q.data,W=q.data.byteLength;U.setUint32(n,W),n+=4,l.set(K,n),n+=W,G+=4+W}if(A)j=Math.max(0,s*Math.round((B.pts-B.dts)/s));else{if(F<m-1)s=f[F+1].dts-B.dts;else{var Z=this.config,X=B.dts-f[F>0?F-1:F].dts;if(Z.stretchShortVideoTrack){var Q=Z.maxBufferHole,J=Math.floor(Q*o),$=(i?d+i*o:this.nextAudioPts)-B.pts;$>J?(s=$-X,s<0&&(s=X),I.b.log("It is approximately "+$/90+" ms to the next segment; using duration "+s/90+" ms for the last video frame.")):s=X}else s=X}j=Math.round(B.pts-B.dts)}h.push({size:G,duration:s,cts:j,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:B.key?2:1,isNonSync:B.key?0:1}})}this.nextAvcDts=_+s;var ee=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,h.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var te=h[0].flags;te.dependsOn=2,te.isNonSync=0}e.samples=h,u=Y.moof(e.sequenceNumber++,c,e),e.samples=[];var re={data1:u,data2:l,startPTS:d/o,endPTS:(p+s)/o,startDTS:c/o,endDTS:this.nextAvcDts/o,type:"video",hasAudio:!1,hasVideo:!0,nb:h.length,dropped:ee};return this.observer.trigger(w.a.FRAG_PARSING_DATA,re),re}},e.prototype.remuxAudio=function(e,t,r,i){var a=e.inputTimeScale,n=e.timescale,o=a/n,s=e.isAAC?1024:1152,l=s*o,u=this._PTSNormalize,d=this._initDTS,c=!e.isAAC&&this.typeSupported.mpeg,p=void 0,_=void 0,f=void 0,h=void 0,m=void 0,g=void 0,v=void 0,y=e.samples,A=[],k=this.nextAudioPts;if(r|=y.length&&k&&(i&&Math.abs(t-k/a)<.1||Math.abs(y[0].pts-k-d)<20*l),y.forEach(function(e){e.pts=e.dts=u(e.pts-d,t*a)}),y=y.filter(function(e){return e.pts>=0}),0!==y.length){if(r||(k=i?t*a:y[0].pts),e.isAAC)for(var b=this.config.maxAudioFramesDrift,T=0,E=k;T<y.length;){var S,R=y[T],x=R.pts;S=x-E;var L=Math.abs(1e3*S/a);if(S<=-b*l)I.b.warn("Dropping 1 audio frame @ "+(E/a).toFixed(3)+"s due to "+Math.round(L)+" ms overlap."),y.splice(T,1),e.len-=R.unit.length;else if(S>=b*l&&L<1e4&&E){var D=Math.round(S/l);I.b.warn("Injecting "+D+" audio frame @ "+(E/a).toFixed(3)+"s due to "+Math.round(1e3*S/a)+" ms gap.");for(var M=0;M<D;M++){var P=Math.max(E,0);f=q.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),f||(I.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),f=R.unit.subarray()),y.splice(T,0,{unit:f,pts:P,dts:P}),e.len+=f.length,E+=l,T++}R.pts=R.dts=E,E+=l,T++}else Math.abs(S),R.pts=R.dts=E,E+=l,T++}for(var O=0,N=y.length;O<N;O++){var U=y[O],F=U.unit,B=U.pts;if(void 0!==v)_.duration=Math.round((B-v)/o);else{var z=Math.round(1e3*(B-k)/a),G=0;if(r&&e.isAAC&&z){if(z>0&&z<1e4)G=Math.round((B-k)/l),I.b.log(z+" ms hole between AAC samples detected,filling it"),G>0&&(f=q.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),f||(f=F.subarray()),e.len+=G*f.length);else if(z<-12){I.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(k/a).toFixed(3)+"s/"+(B/a).toFixed(3)+"s/"+-z+"ms"),e.len-=F.byteLength;continue}B=k}if(g=B,!(e.len>0))return;var j=c?e.len:e.len+8;p=c?0:8;try{h=new Uint8Array(j)}catch(e){return void this.observer.trigger(w.a.ERROR,{type:C.b.MUX_ERROR,details:C.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}if(!c){new DataView(h.buffer).setUint32(0,j),h.set(Y.types.mdat,4)}for(var V=0;V<G;V++)f=q.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),f||(I.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),f=F.subarray()),h.set(f,p),p+=f.byteLength,_={size:f.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(_)}h.set(F,p);var H=F.byteLength;p+=H,_={size:H,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(_),v=B}var K=0,W=A.length;if(W>=2&&(K=A[W-2].duration,_.duration=K),W){this.nextAudioPts=k=v+o*K,e.len=0,e.samples=A,m=c?new Uint8Array:Y.moof(e.sequenceNumber++,g/o,e),e.samples=[];var Z=g/a,X=k/a,Q={data1:m,data2:h,startPTS:Z,endPTS:X,startDTS:Z,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:W};return this.observer.trigger(w.a.FRAG_PARSING_DATA,Q),Q}return null}},e.prototype.remuxEmptyAudio=function(e,t,r,i){var a=e.inputTimeScale,n=e.samplerate?e.samplerate:a,o=a/n,s=this.nextAudioPts,l=(void 0!==s?s:i.startDTS*a)+this._initDTS,u=i.endDTS*a+this._initDTS,d=1024*o,c=Math.ceil((u-l)/d),p=q.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(I.b.warn("remux empty Audio"),!p)return void I.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var _=[],f=0;f<c;f++){var h=l+f*d;_.push({unit:p,pts:h,dts:h}),e.len+=p.length}e.samples=_,this.remuxAudio(e,t,r)},e.prototype.remuxID3=function(e,t){var r=e.samples.length,i=void 0,a=e.inputTimeScale,n=this._initPTS,o=this._initDTS;if(r){for(var s=0;s<r;s++)i=e.samples[s],i.pts=(i.pts-n)/a,i.dts=(i.dts-o)/a;this.observer.trigger(w.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},e.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var r=e.samples.length,i=void 0,a=e.inputTimeScale,n=this._initPTS;if(r){for(var o=0;o<r;o++)i=e.samples[o],i.pts=(i.pts-n)/a;this.observer.trigger(w.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},e.prototype._PTSNormalize=function(e,t){var r=void 0;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}(),X=Z,Q=function(){function e(t){k(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,r,i,a,n,o,s){var l=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),l.trigger(w.a.FRAG_PARSING_DATA,{data1:s,startPTS:a,startDTS:a,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(w.a.FRAG_PARSED)},e}(),J=Q,$=Object(S.a)(),ee=$.performance,te=function(){function e(t,r,i,a){b(this,e),this.observer=t,this.typeSupported=r,this.config=i,this.vendor=a}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,r,i,a,n,o,s,l,u,d,c){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new T.a(this.observer,this.config));var _=this,f=void 0;try{f=ee.now()}catch(e){f=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var p=void 0;try{p=ee.now()}catch(e){p=Date.now()}_.observer.trigger(w.a.FRAG_DECRYPTED,{stats:{tstart:f,tdecrypt:p}}),_.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,a,n,o,s,l,u,d,c)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,a,n,o,s,l,u,d,c)},e.prototype.pushDecrypted=function(e,t,r,i,a,n,o,s,l,u,d,c){var p=this.demuxer;if(!p||(o||s)&&!this.probe(e)){for(var _=this.observer,f=this.typeSupported,h=this.config,m=[{demux:G,remux:X},{demux:D.a,remux:J},{demux:L,remux:X},{demux:V,remux:X}],g=0,v=m.length;g<v;g++){var y=m[g],A=y.demux.probe;if(A(e)){var k=this.remuxer=new y.remux(_,h,f,this.vendor);p=new y.demux(_,k,h,f),this.probe=A;break}}if(!p)return void _.trigger(w.a.ERROR,{type:C.b.MEDIA_ERROR,details:C.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var b=this.remuxer;(o||s)&&(p.resetInitSegment(r,i,a,u),b.resetInitSegment()),o&&(p.resetTimeStamp(c),b.resetTimeStamp(c)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,n,l,d)},e}();t.a=te},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){var r=wt[t];return!!r&&!0===r[e.slice(0,4)]}function u(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=e[t],i=t-1;i>=0;i--){var a=e[i];a.programDateTime=r.programDateTime-1e3*a.duration,r=a}}function p(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(rt.a)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function R(e,t,r){var i=e[t],a=e[r],n=a.startPTS;Object(rt.a)(n)?r>t?(i.duration=n-i.start,i.duration<0&&at.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(a.duration=i.start-n,a.duration<0&&at.b.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=r>t?i.start+i.duration:Math.max(i.start-a.duration,0)}function x(e,t,r,i,a,n){var o=r;if(Object(rt.a)(t.startPTS)){var s=Math.abs(t.startPTS-r);Object(rt.a)(t.deltaPTS)?t.deltaPTS=Math.max(s,t.deltaPTS):t.deltaPTS=s,o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),i=Math.max(i,t.endPTS),a=Math.min(a,t.startDTS),n=Math.max(n,t.endDTS)}var l=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=i,t.startDTS=a,t.endDTS=n,t.duration=i-r;var u=t.sn;if(!e||u<e.startSN||u>e.endSN)return 0;var d=void 0,c=void 0,p=void 0;for(d=u-e.startSN,c=e.fragments,c[d]=t,p=d;p>0;p--)R(c,p,p-1);for(p=d;p<c.length-1;p++)R(c,p,p+1);return e.PTSKnown=!0,l}function L(e,t){var r=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,n=e.fragments,o=t.fragments,s=0,l=void 0;if(t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment),i<r)return void(t.PTSKnown=!1);for(var u=r;u<=i;u++){var d=n[a+u],c=o[u];c&&d&&(s=d.cc-c.cc,Object(rt.a)(d.startPTS)&&(c.start=c.startPTS=d.startPTS,c.endPTS=d.endPTS,c.duration=d.duration,c.backtracked=d.backtracked,c.dropped=d.dropped,l=c))}if(s)for(at.b.log("discontinuity sliding from playlist, take drift into account"),u=0;u<o.length;u++)o[u].cc+=s;if(l)x(t,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS);else if(a>=0&&a<n.length){var p=n[a].start;for(u=0;u<o.length;u++)o[u].start+=p}t.PTSKnown=e.PTSKnown}function D(e,t){for(var r=null,i=0;i<e.length;i+=1){var a=e[i];if(a&&a.cc===t){r=a;break}}return r}function M(e,t){return qt.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}function P(e,t,r){var i=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(i=!0),i}function O(e,t){var r=e.fragments,i=t.fragments;if(!i.length||!r.length)return void at.b.log("No fragments to align");var a=D(r,i[0].cc);return!a||a&&!a.startPTS?void at.b.log("No frag in previous level to align on"):a}function N(e,t){t.fragments.forEach(function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}),t.PTSKnown=!0}function U(e,t,r){F(e,r,t),!r.PTSKnown&&t&&B(r,t.details)}function F(e,t,r){if(P(e,r,t)){var i=O(r.details,t);i&&(at.b.log("Adjusting PTS using last level due to CC increase within current level"),N(i.start,t))}}function B(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,i=e.fragments[0].programDateTime,a=(i-r)/1e3+t.fragments[0].start;Object(rt.a)(a)&&(at.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),N(a,e))}}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function V(e,t,r){if(!Array.isArray(e)||!e.length||!Object(rt.a)(t))return null;if(t<e[0].programDateTime)return null;if(t>=e[e.length-1].endProgramDateTime)return null;r=r||0;for(var i=0;i<e.length;++i){var a=e[i];if(K(t,r,a))return a}return null}function H(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=e?t[e.sn-t[0].sn+1]:null;return a&&!q(r,i,a)?a:qt.search(t,q.bind(null,r,i))}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments[2],i=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=e?1:r.start-i>e&&r.start?-1:0}function K(e,t,r){var i=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-i>e}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ee(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function te(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ne(){var e=E(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ie(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new ri,this.regionList=[]}function Se(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function Re(){this.values=Object.create(null)}function xe(e,t,r,i){var a=i?e.split(i):[e];for(var n in a)if("string"==typeof a[n]){var o=a[n].split(r);if(2===o.length){var s=o[0],l=o[1];t(s,l)}}}function Le(e,t,r){function i(){var t=Se(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}var n=e;if(a(),t.startTime=i(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),a(),t.endTime=i(),a(),function(e,t){var i=new Re;xe(e,function(e,t){switch(e){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===t){i.set(e,r[a].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),o=n[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start",ai,"end"]);break;case"position":n=t.split(","),i.percent(e,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start",ai,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",ai,"end","left","right"])}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var a=i.get("line","auto");"auto"===a&&-1===ii.line&&(a=-1),t.line=a,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",ai);var n=i.get("position","auto");"auto"===n&&50===ii.position&&(n="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=n}(e,t)}function De(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function Me(e,t,r,i){for(var a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,u=window.VTTCue||window.TextTrackCue,d=0;d<i.rows.length;d++)if(a=i.rows[d],o=!0,s=0,l="",!a.isEmpty()){for(var c=0;c<a.chars.length;c++)a.chars[c].uchar.match(/\s/)&&o?s++:(l+=a.chars[c].uchar,o=!1);a.cueStartTime=t,t===r&&(r+=1e-4),n=new u(t,r,De(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?n.line=d+1:n.line=d>7?d-2:d+1,n.align="left",n.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(n)}}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Be(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function ze(e,t,r,i){return Math.min(t,i)-Math.max(e,r)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function He(e){for(var t=[],r=0;r<e.length;r++)"subtitles"===e[r].kind&&t.push(e[r]);return t}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function We(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var Je={};r.d(Je,"newCue",function(){return Me});var $e=r(5),et=r.n($e),tt=r(2),rt=r(3),it=r(1),at=r(0),nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),st=function(){function e(t){i(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];this.handledEvents=a,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"===nt(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(ot.has(e))throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){at.b.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(it.a.ERROR,{type:tt.b.OTHER_ERROR,details:tt.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}(),lt=st,ut=r(9),dt=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),ct=function(){function e(){a(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return dt(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=et.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),pt=ct,_t=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),ft=function(){function e(){var t;n(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=(t={},t[e.ElementaryStreamTypes.AUDIO]=!1,t[e.ElementaryStreamTypes.VIDEO]=!1,t)}return e.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},e.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&(r=new pt,r.method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r},_t(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=et.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}},{key:"endProgramDateTime",get:function(){if(!Object(rt.a)(this.programDateTime))return null;var e=Object(rt.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),e}(),ht=ft,mt=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),gt=function(){
function e(t){o(this,e),this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}return mt(e,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(rt.a)(this.fragments[0].programDateTime))}}]),e}(),vt=gt,yt=/^(\d+)x(\d+)$/,At=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,kt=function(){function e(t){s(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=yt.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t=void 0,r={};for(At.lastIndex=0;null!==(t=At.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},e}(),bt=kt,wt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},Ct=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,Tt=/#EXT-X-MEDIA:(.*)/g,Et=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),It=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,St=/\.(mp4|m4s|m4v|m4a)$/i,Rt=function(){function e(){d(this,e)}return e.findGroup=function(e,t){if(!e)return null;for(var r=null,i=0;i<e.length;i++){var a=e[i];a.id===t&&(r=a)}return r},e.convertAVC1ToAVCOTI=function(e){var t=void 0,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return et.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var i=[],a=void 0;for(Ct.lastIndex=0;null!=(a=Ct.exec(t));){var n={},o=n.attrs=new bt(a[1]);n.url=e.resolve(a[2],r);var s=o.decimalResolution("RESOLUTION");s&&(n.width=s.width,n.height=s.height),n.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),n.name=o.NAME,function(e,t){["video","audio"].forEach(function(r){var i=e.filter(function(e){return l(e,r)});if(i.length){var a=i.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[r+"Codec"]=a.length>0?a[0]:i[0],e=e.filter(function(e){return-1===i.indexOf(e)})}}),t.unknownCodecs=e}([].concat((o.CODECS||"").split(/[ ,]+/)),n),n.videoCodec&&-1!==n.videoCodec.indexOf("avc1")&&(n.videoCodec=e.convertAVC1ToAVCOTI(n.videoCodec)),i.push(n)}return i},e.parseMasterPlaylistMedia=function(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=void 0,o=[],s=0;for(Tt.lastIndex=0;null!==(n=Tt.exec(t));){var l={},u=new bt(n[1]);if(u.TYPE===i){if(l.groupId=u["GROUP-ID"],l.name=u.NAME,l.type=i,l.default="YES"===u.DEFAULT,l.autoselect="YES"===u.AUTOSELECT,l.forced="YES"===u.FORCED,u.URI&&(l.url=e.resolve(u.URI,r)),l.lang=u.LANGUAGE,l.name||(l.name=l.lang),a.length){var d=e.findGroup(a,l.groupId);l.audioCodec=d?d.codec:a[0].codec}l.id=s++,o.push(l)}}return o},e.parseLevelPlaylist=function(e,t,r,i,a){var n=0,o=0,s=new vt(t),l=new pt,u=0,d=null,_=new ht,f=void 0,h=void 0,m=null;for(Et.lastIndex=0;null!==(f=Et.exec(e));){var g=f[1];if(g){_.duration=parseFloat(g);var v=(" "+f[2]).slice(1);_.title=v||null,_.tagList.push(v?["INF",g,v]:["INF",g])}else if(f[3]){if(Object(rt.a)(_.duration)){var y=n++;_.type=i,_.start=o,_.levelkey=l,_.sn=y,_.level=r,_.cc=u,_.urlId=a,_.baseurl=t,_.relurl=(" "+f[3]).slice(1),p(_,d),s.fragments.push(_),d=_,o+=_.duration,_=new ht}}else if(f[4]){if(_.rawByteRange=(" "+f[4]).slice(1),d){var A=d.byteRangeEndOffset;A&&(_.lastByteRangeEndOffset=A)}}else if(f[5])_.rawProgramDateTime=(" "+f[5]).slice(1),_.tagList.push(["PROGRAM-DATE-TIME",_.rawProgramDateTime]),null===m&&(m=s.fragments.length);else{for(f=f[0].match(It),h=1;h<f.length&&void 0===f[h];h++);var k=(" "+f[h+1]).slice(1),b=(" "+f[h+2]).slice(1);switch(f[h]){case"#":_.tagList.push(b?[k,b]:[k]);break;case"PLAYLIST-TYPE":s.type=k.toUpperCase();break;case"MEDIA-SEQUENCE":n=s.startSN=parseInt(k);break;case"TARGETDURATION":s.targetduration=parseFloat(k);break;case"VERSION":s.version=parseInt(k);break;case"EXTM3U":break;case"ENDLIST":s.live=!1;break;case"DIS":u++,_.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(k);break;case"KEY":var w=k,C=new bt(w),T=C.enumeratedString("METHOD"),E=C.URI,I=C.hexadecimalInteger("IV");T&&(l=new pt,E&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(T)>=0&&(l.method=T,l.baseuri=t,l.reluri=E,l.key=null,l.iv=I));break;case"START":var S=k,R=new bt(S),x=R.decimalFloatingPoint("TIME-OFFSET");Object(rt.a)(x)&&(s.startTimeOffset=x);break;case"MAP":var L=new bt(k);_.relurl=L.URI,_.rawByteRange=L.BYTERANGE,_.baseurl=t,_.level=r,_.type=i,_.sn="initSegment",s.initSegment=_,_=new ht,_.rawProgramDateTime=s.initSegment.rawProgramDateTime;break;default:at.b.warn("line parsed but not handled: "+f)}}}return _=d,_&&!_.relurl&&(s.fragments.pop(),o-=_.duration),s.totalduration=o,s.averagetargetduration=o/s.fragments.length,s.endSN=n-1,s.startCC=s.fragments[0]?s.fragments[0].cc:0,s.endCC=u,!s.initSegment&&s.fragments.length&&s.fragments.every(function(e){return St.test(e.relurl)})&&(at.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),_=new ht,_.relurl=s.fragments[0].relurl,_.baseurl=t,_.level=r,_.type=i,_.sn="initSegment",s.initSegment=_,s.needSidxRanges=!0),m&&c(s.fragments,m),s},e}(),xt=Rt,Lt=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Dt=window,Mt=Dt.performance,Pt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Ot={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},Nt=function(e){function t(r){_(this,t);var i=f(this,e.call(this,r,it.a.MANIFEST_LOADING,it.a.LEVEL_LOADING,it.a.AUDIO_TRACK_LOADING,it.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return h(t,e),t.canHaveQualityLevels=function(e){return e!==Pt.AUDIO_TRACK&&e!==Pt.SUBTITLE_TRACK},t.mapContextToLevelType=function(e){switch(e.type){case Pt.AUDIO_TRACK:return Ot.AUDIO;case Pt.SUBTITLE_TRACK:return Ot.SUBTITLE;default:return Ot.MAIN}},t.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r},t.prototype.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,i=t.loader,a=r||i,n=new a(t);return e.loader=n,this.loaders[e.type]=n,n},t.prototype.getInternalLoader=function(e){return this.loaders[e.type]},t.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.prototype.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){this.load(e.url,{type:Pt.MANIFEST,level:0,id:null})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:Pt.LEVEL,level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:Pt.AUDIO_TRACK,level:null,id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:Pt.SUBTITLE_TRACK,level:null,id:e.id})},t.prototype.load=function(e,t){var r=this.hls.config;at.b.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var i=this.getInternalLoader(t);if(i){var a=i.context;if(a&&a.url===e)return at.b.trace("playlist request ongoing"),!1;at.b.warn("aborting previous loader for type: "+t.type),i.abort()}var n=void 0,o=void 0,s=void 0,l=void 0;switch(t.type){case Pt.MANIFEST:n=r.manifestLoadingMaxRetry,o=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout;break;case Pt.LEVEL:n=0,o=r.levelLoadingTimeOut;break;default:n=r.levelLoadingMaxRetry,o=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout}i=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var u={timeout:o,maxRetry:n,retryDelay:s,maxRetryDelay:l},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return at.b.debug("Calling internal loader delegate for URL: "+e),i.load(t,u,d),!0},t.prototype.loadsuccess=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,i);this.resetInternalLoader(r.type);var a=e.data;if(t.tload=Mt.now(),0!==a.indexOf("#EXTM3U"))return void this._handleManifestParsingError(e,r,"no EXTM3U delimiter",i);a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,i):this._handleMasterPlaylist(e,t,r,i)},t.prototype.loaderror=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(t,r)},t.prototype.loadtimeout=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(t,r,!0)},t.prototype._handleMasterPlaylist=function(e,r,i,a){var n=this.hls,o=e.data,s=t.getResponseUrl(e,i),l=xt.parseMasterPlaylist(o,s);if(!l.length)return void this._handleManifestParsingError(e,i,"no level found in manifest",a);var u=l.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),d=xt.parseMasterPlaylistMedia(o,s,"AUDIO",u),c=xt.parseMasterPlaylistMedia(o,s,"SUBTITLES");if(d.length){var p=!1;d.forEach(function(e){e.url||(p=!0)}),!1===p&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(at.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),d.unshift({type:"main",name:"main"}))}n.trigger(it.a.MANIFEST_LOADED,{levels:l,audioTracks:d,subtitles:c,url:s,stats:r,networkDetails:a})},t.prototype._handleTrackOrLevelPlaylist=function(e,r,i,a){var n=this.hls,o=i.id,s=i.level,l=i.type,u=t.getResponseUrl(e,i),d=Object(rt.a)(o)?o:0,c=Object(rt.a)(s)?s:d,p=t.mapContextToLevelType(i),_=xt.parseLevelPlaylist(e.data,u,c,p,d);if(_.tload=r.tload,l===Pt.MANIFEST){var f={url:u,details:_};n.trigger(it.a.MANIFEST_LOADED,{levels:[f],audioTracks:[],url:u,stats:r,networkDetails:a})}if(r.tparsed=Mt.now(),_.needSidxRanges){var h=_.initSegment.url;return void this.load(h,{isSidxRequest:!0,type:l,level:s,levelDetails:_,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}i.levelDetails=_,this._handlePlaylistLoaded(e,r,i,a)},t.prototype._handleSidxRequest=function(e,t){var r=ut.a.parseSegmentIndex(new Uint8Array(e.data));r.references.forEach(function(e,r){var i=e.info,a=t.levelDetails.fragments[r];0===a.byteRange.length&&(a.rawByteRange=String(1+i.end-i.start)+"@"+String(i.start))}),t.levelDetails.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"},t.prototype._handleManifestParsingError=function(e,t,r,i){this.hls.trigger(it.a.ERROR,{type:tt.b.NETWORK_ERROR,details:tt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:i})},t.prototype._handleNetworkError=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];at.b.info("A network error occured while loading a "+e.type+"-type playlist");var i=void 0,a=void 0,n=this.getInternalLoader(e);switch(e.type){case Pt.MANIFEST:i=r?tt.a.MANIFEST_LOAD_TIMEOUT:tt.a.MANIFEST_LOAD_ERROR,a=!0;break;case Pt.LEVEL:i=r?tt.a.LEVEL_LOAD_TIMEOUT:tt.a.LEVEL_LOAD_ERROR,a=!1;break;case Pt.AUDIO_TRACK:i=r?tt.a.AUDIO_TRACK_LOAD_TIMEOUT:tt.a.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}n&&(n.abort(),this.resetInternalLoader(e.type)),this.hls.trigger(it.a.ERROR,{type:tt.b.NETWORK_ERROR,details:i,fatal:a,url:n.url,loader:n,context:e,networkDetails:t})},t.prototype._handlePlaylistLoaded=function(e,r,i,a){var n=i.type,o=i.level,s=i.id,l=i.levelDetails;if(!l.targetduration)return void this._handleManifestParsingError(e,i,"invalid target duration",a);if(t.canHaveQualityLevels(i.type))this.hls.trigger(it.a.LEVEL_LOADED,{details:l,level:o||0,id:s||0,stats:r,networkDetails:a});else switch(n){case Pt.AUDIO_TRACK:this.hls.trigger(it.a.AUDIO_TRACK_LOADED,{details:l,id:s,stats:r,networkDetails:a});break;case Pt.SUBTITLE_TRACK:this.hls.trigger(it.a.SUBTITLE_TRACK_LOADED,{details:l,id:s,stats:r,networkDetails:a})}},Lt(t,null,[{key:"ContextType",get:function(){return Pt}},{key:"LevelType",get:function(){return Ot}}]),t}(lt),Ut=Nt,Ft=function(e){function t(r){m(this,t);var i=g(this,e.call(this,r,it.a.FRAG_LOADING));return i.loaders={},i}return v(t,e),t.prototype.destroy=function(){var t=this.loaders;for(var r in t){var i=t[r];i&&i.destroy()}this.loaders={},e.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,r=t.type,i=this.loaders,a=this.hls.config,n=a.fLoader,o=a.loader;t.loaded=0;var s=i[r];s&&(at.b.warn("abort previous fragment loader for type: "+r),s.abort()),s=i[r]=t.loader=a.fLoader?new n(a):new o(a);var l=void 0,u=void 0,d=void 0;l={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var c=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(rt.a)(c)&&Object(rt.a)(p)&&(l.rangeStart=c,l.rangeEnd=p),u={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},s.load(l,u,d)},t.prototype.loadsuccess=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.data,n=r.frag;n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(it.a.FRAG_LOADED,{payload:a,frag:n,stats:t,networkDetails:i})},t.prototype.loaderror=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.frag,a=i.loader;a&&a.abort(),this.loaders[i.type]=void 0,this.hls.trigger(it.a.ERROR,{type:tt.b.NETWORK_ERROR,details:tt.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},t.prototype.loadtimeout=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.frag,a=i.loader;a&&a.abort(),this.loaders[i.type]=void 0,this.hls.trigger(it.a.ERROR,{type:tt.b.NETWORK_ERROR,details:tt.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},t.prototype.loadprogress=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.frag;a.loaded=e.loaded,this.hls.trigger(it.a.FRAG_LOAD_PROGRESS,{frag:a,stats:e,networkDetails:i})},t}(lt),Bt=Ft,zt=function(e){function t(r){y(this,t);var i=A(this,e.call(this,r,it.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return k(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},lt.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,r=t.type,i=this.loaders[r],a=t.decryptdata,n=a.uri;if(n!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;i&&(at.b.warn("abort previous key loader for type:"+r),i.abort()),t.loader=this.loaders[r]=new o.loader(o),this.decrypturl=n,this.decryptkey=null;var s=void 0,l=void 0,u=void 0;s={url:n,frag:t,responseType:"arraybuffer"},l={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,l,u)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(it.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(it.a.KEY_LOADED,{frag:i})},t.prototype.loaderror=function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(it.a.ERROR,{type:tt.b.NETWORK_ERROR,details:tt.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.prototype.loadtimeout=function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(it.a.ERROR,{type:tt.b.NETWORK_ERROR,details:tt.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(lt),Gt=zt,jt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Vt=function(e){function t(r){b(this,t);var i=w(this,e.call(this,r,it.a.BUFFER_APPENDED,it.a.FRAG_BUFFERED,it.a.FRAG_LOADED));return i.bufferPadding=.2,i.fragments=Object.create(null),i.timeRanges=Object.create(null),i.config=r.config,i}return C(t,e),t.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,lt.prototype.destroy.call(this),e.prototype.destroy.call(this)},t.prototype.getBufferedFrag=function(e,t){var r=this.fragments,i=Object.keys(r).filter(function(i){var a=r[i];if(a.body.type!==t)return!1;if(!a.buffered)return!1;var n=a.body;return n.startPTS<=e&&e<=n.endPTS});if(0===i.length)return null;var a=i.pop();return r[a].body},t.prototype.detectEvictedFragments=function(e,t){var r=this,i=void 0,a=void 0;Object.keys(this.fragments).forEach(function(n){var o=r.fragments[n];if(!0===o.buffered){var s=o.range[e];if(s){i=s.time;for(var l=0;l<i.length;l++)if(a=i[l],!1===r.isTimeBuffered(a.startPTS,a.endPTS,t)){r.removeFragment(o.body);break}}}})},t.prototype.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),i=this.fragments[r];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(e.hasElementaryStream(r)){var a=t.timeRanges[r];i.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,a)}}))},t.prototype.getBufferedTimes=function(e,t,r){for(var i=[],a=void 0,n=void 0,o=!1,s=0;s<r.length;s++){if(a=r.start(s)-this.bufferPadding,n=r.end(s)+this.bufferPadding,e>=a&&t<=n){i.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<n&&t>a)i.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=a)break}return{time:i,partial:o}},t.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},t.prototype.getPartialFragment=function(e){var t=this,r=void 0,i=void 0,a=void 0,n=null,o=0;return Object.keys(this.fragments).forEach(function(s){var l=t.fragments[s];t.isPartial(l)&&(i=l.body.startPTS-t.bufferPadding,a=l.body.endPTS+t.bufferPadding,e>=i&&e<=a&&(r=Math.min(e-i,a-e),o<=r&&(n=l.body,o=r)))}),n},t.prototype.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],i=jt.NOT_LOADED;return void 0!==r&&(i=r.buffered?!0===this.isPartial(r)?jt.PARTIAL:jt.OK:jt.APPENDING),i},t.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},t.prototype.isTimeBuffered=function(e,t,r){for(var i=void 0,a=void 0,n=0;n<r.length;n++){if(i=r.start(n)-this.bufferPadding,a=r.end(n)+this.bufferPadding,e>=i&&t<=a)return!0;if(t<=i)return!1}return!1},t.prototype.onFragLoaded=function(e){var t=e.frag;Object(rt.a)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},t.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)})},t.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},t.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},t.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},t.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},t}(lt),Ht={search:function(e,t){for(var r=0,i=e.length-1,a=null,n=null;r<=i;){a=(r+i)/2|0,n=e[a];var o=t(n);if(o>0)r=a+1;else{if(!(o<0))return n;i=a-1}}return null}},qt=Ht,Kt=function(){function e(){T(this,e)}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,i=0;i<r.length;i++)if(t>=r.start(i)&&t<=r.end(i))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var i=e.buffered,a=[],n=void 0;for(n=0;n<i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){var i=[],a=void 0,n=void 0,o=void 0,s=void 0,l=void 0;for(e.sort(function(e,t){var r=e.start-t.start;return r||t.end-e.end}),l=0;l<e.length;l++){var u=i.length;if(u){var d=i[u-1].end;e[l].start-d<r?e[l].end>d&&(i[u-1].end=e[l].end):i.push(e[l])}else i.push(e[l])}for(l=0,a=0,n=o=t;l<i.length;l++){var c=i[l].start,p=i[l].end;if(t+r>=c&&t<p)n=c,o=p,a=o-t;else if(t+r<c){s=c;break}}return{len:a,start:n,end:o,nextStart:s}},e}(),Wt=r(7),Yt=r.n(Wt),Zt=r(12),Xt=r.n(Zt),Qt=r(10),Jt=r(4),$t=Object(Jt.a)(),er=E(),tr=function(){function e(t,r){I(this,e),this.hls=t,this.id=r;var i=this.observer=new Yt.a,a=t.config;i.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];i.removeListener.apply(i,[e].concat(r))};var n=function(e,r){r=r||{},r.frag=this.frag,r.id=this.id,t.trigger(e,r)}.bind(this);i.on(it.a.FRAG_DECRYPTED,n),i.on(it.a.FRAG_PARSING_INIT_SEGMENT,n),i.on(it.a.FRAG_PARSING_DATA,n),i.on(it.a.FRAG_PARSED,n),i.on(it.a.ERROR,n),i.on(it.a.FRAG_PARSING_METADATA,n),i.on(it.a.FRAG_PARSING_USERDATA,n),i.on(it.a.INIT_PTS_FOUND,n);var o={mp4:er.isTypeSupported("video/mp4"),mpeg:er.isTypeSupported("audio/mpeg"),mp3:er.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){at.b.log("demuxing in webworker");var l=void 0;try{l=this.w=Xt()(13),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(e){t.trigger(it.a.ERROR,{type:tt.b.OTHER_ERROR,details:tt.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:o,vendor:s,id:r,config:JSON.stringify(a)})}catch(e){at.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&$t.URL.revokeObjectURL(l.objectURL),this.demuxer=new Qt.a(i,o,a,s),this.w=void 0}}else this.demuxer=new Qt.a(i,o,a,s)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,r,i,a,n,o,s){var l=this.w,u=Object(rt.a)(a.startDTS)?a.startDTS:a.start,d=a.decryptdata,c=this.frag,p=!(c&&a.cc===c.cc),_=!(c&&a.level===c.level),f=c&&a.sn===c.sn+1,h=!_&&f;if(p&&at.b.log(this.id+":discontinuity detected"),_&&at.b.log(this.id+":switch detected"),this.frag=a,l)l.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:r,videoCodec:i,timeOffset:u,discontinuity:p,trackSwitch:_,contiguous:h,duration:n,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var m=this.demuxer;m&&m.push(e,d,t,r,i,u,p,_,h,n,o,s)}},e.prototype.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":$t.URL.revokeObjectURL(this.w.objectURL);break;case it.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}(),rr=tr,ir={toString:function(e){for(var t="",r=e.length,i=0;i<r;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}},ar=ir,nr=function(e){function t(r){z(this,t);for(var i=arguments.length,a=Array(i>1?i-1:0),n=1;n<i;n++)a[n-1]=arguments[n];var o=G(this,e.call.apply(e,[this,r].concat(a)));return o._tickInterval=null,o._tickTimer=null,o._tickCallCount=0,o._boundTick=o.tick.bind(o),o}return j(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)}),t.prototype.clearInterval=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)}),t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){1===++this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(lt),or=nr,sr=function(){function e(t,r,i,a){W(this,e),this.config=t,this.media=r,this.fragmentTracker=i,this.hls=a,this.stallReported=!1}return e.prototype.poll=function(e,t){var r=this.config,i=this.media,a=i.currentTime,n=window.performance.now();if(a!==e)return this.stallReported&&(at.b.warn("playback not stuck anymore @"+a+", after "+Math.round(n-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(i.ended||!i.buffered.length||i.readyState>2||i.seeking&&Kt.isBuffered(i,a))){var o=n-this.stalled,s=Kt.bufferInfo(i,a,r.maxBufferHole);if(!this.stalled)return void(this.stalled=n);o>=1e3&&this._reportStall(s.len),this._tryFixBufferStall(s,o)}},e.prototype._tryFixBufferStall=function(e,t){var r=this.config,i=this.fragmentTracker,a=this.media,n=a.currentTime,o=i.getPartialFragment(n);o&&this._trySkipBufferHole(o),e.len>.5&&t>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,at.b.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),t.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:tt.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this.hls,r=this.media,i=r.currentTime,a=0,n=0;n<r.buffered.length;n++){var o=r.buffered.start(n);if(i>=a&&i<o)return r.currentTime=Math.max(o,r.currentTime+.1),at.b.warn("skipping hole, adjusting currentTime from "+i+" to "+r.currentTime),this.stalled=null,void t.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:tt.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+r.currentTime,frag:e});a=r.buffered.end(n)}},e.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,i=r.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<e.nudgeMaxRetry){var n=i+a*e.nudgeOffset;at.b.log("adjust currentTime from "+i+" to "+n),r.currentTime=n,t.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:tt.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else at.b.error("still stuck in high buffer @"+i+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:tt.a.BUFFER_STALLED_ERROR,fatal:!0})},e}(),lr=sr,ur=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),dr={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},cr=function(e){function t(r,i){Y(this,t);var a=Z(this,e.call(this,r,it.a.MEDIA_ATTACHED,it.a.MEDIA_DETACHING,it.a.MANIFEST_LOADING,it.a.MANIFEST_PARSED,it.a.LEVEL_LOADED,it.a.KEY_LOADED,it.a.FRAG_LOADED,it.a.FRAG_LOAD_EMERGENCY_ABORTED,it.a.FRAG_PARSING_INIT_SEGMENT,it.a.FRAG_PARSING_DATA,it.a.FRAG_PARSED,it.a.ERROR,it.a.AUDIO_TRACK_SWITCHING,it.a.AUDIO_TRACK_SWITCHED,it.a.BUFFER_CREATED,it.a.BUFFER_APPENDED,it.a.BUFFER_FLUSHED));return a.fragmentTracker=i,a.config=r.config,a.audioCodecSwap=!1,a._state=dr.STOPPED,a.stallReported=!1,a.gapController=null,a}return X(t,e),t.prototype.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},t.prototype.onHandlerDestroyed=function(){this.state=dr.STOPPED,this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(at.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=dr.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=dr.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=dr.STOPPED,this.forceStartLoad=!1},t.prototype.doTick=function(){switch(this.state){case dr.BUFFER_FLUSHING:this.fragLoadError=0;break;case dr.IDLE:this._doTickIdle();break;case dr.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=dr.IDLE);break;case dr.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(at.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=dr.IDLE);break;case dr.ERROR:case dr.STOPPED:case dr.FRAG_LOADING:case dr.PARSING:case dr.PARSED:case dr.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var i=void 0;i=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var a=e.nextLoadLevel,n=this.levels[a];if(n){var o=n.bitrate,s=void 0;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var l=Kt.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,t.maxBufferHole),u=l.len;if(!(u>=s)){at.b.trace("buffer length of "+u.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=a;var d=n.details;if(!d||d.live&&this.levelLastLoaded!==a)return void(this.state=dr.WAITING_LEVEL)
;var c=this.fragPrevious;if(!d.live&&c&&!c.backtracked&&c.sn===d.endSN&&!l.nextStart){if(Math.min(r.duration,c.start+c.duration)-Math.max(l.end,c.start)<=Math.max(.2,c.duration)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(it.a.BUFFER_EOS,p),void(this.state=dr.ENDED)}}this._fetchPayloadOrEos(i,l,d)}}}},t.prototype._fetchPayloadOrEos=function(e,t,r){var i=this.fragPrevious,a=this.level,n=r.fragments,o=n.length;if(0!==o){var s=n[0].start,l=n[o-1].start+n[o-1].duration,u=t.end,d=void 0;if(r.initSegment&&!r.initSegment.data)d=r.initSegment;else if(r.live){var c=this.config.initialLiveManifestSize;if(o<c)return void at.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+c);if(null===(d=this._ensureFragmentAtLivePoint(r,u,s,l,i,n,o)))return}else u<s&&(d=n[0]);d||(d=this._findFragment(s,i,o,n,u,l,r)),d&&(d.encrypted?(at.b.log("Loading key for "+d.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+a),this._loadKey(d)):(at.b.log("Loading "+d.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+a+", currentTime:"+e.toFixed(3)+",bufferEnd:"+u.toFixed(3)),this._loadFragment(d)))}},t.prototype._ensureFragmentAtLivePoint=function(e,t,r,i,a,n,o){var s=this.hls.config,l=this.media,u=void 0,d=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-s.maxFragLookUpTolerance,i-d)){var c=this.liveSyncPosition=this.computeLivePosition(r,e);at.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),t=c,l&&l.readyState&&l.duration>c&&(l.currentTime=c),this.nextLoadPosition=c}if(e.PTSKnown&&t>i&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(a)if(e.hasProgramDateTime)at.b.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),u=V(n,a.endProgramDateTime,s.maxFragLookUpTolerance);else{var p=a.sn+1;if(p>=e.startSN&&p<=e.endSN){var _=n[p-e.startSN];a.cc===_.cc&&(u=_,at.b.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=qt.search(n,function(e){return a.cc-e.cc}))&&at.b.log("live playlist, switching playlist, load frag with same CC: "+u.sn)}u||(u=n[Math.min(o-1,Math.round(o/2))],at.b.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},t.prototype._findFragment=function(e,t,r,i,a,n,o){var s=this.hls.config,l=void 0;if(a<n){l=H(t,i,a,a>n-s.maxFragLookUpTolerance?0:s.maxFragLookUpTolerance)}else l=i[r-1];if(l){var u=l.sn-o.startSN,d=t&&l.level===t.level,c=i[u-1],p=i[u+1];if(t&&l.sn===t.sn)if(d&&!l.backtracked)if(l.sn<o.endSN){var _=t.deltaPTS;_&&_>s.maxBufferHole&&t.dropped&&u?(l=c,at.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(l=p,at.b.log("SN just loaded, load next one: "+l.sn,l))}else l=null;else l.backtracked&&(p&&p.backtracked?(at.b.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+p.sn),l=p):(at.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,c?(l=c,l.backtracked=!0):u&&(l=null)))}return l},t.prototype._loadKey=function(e){this.state=dr.KEY_LOADING,this.hls.trigger(it.a.KEY_LOADING,{frag:e})},t.prototype._loadFragment=function(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,this.startFragRequested=!0,Object(rt.a)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===jt.NOT_LOADED||t===jt.PARTIAL?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(it.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new rr(this.hls,"main")),this.state=dr.FRAG_LOADING):t===jt.APPENDING&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},t.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,Ut.LevelType.MAIN)},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e=void 0,t=void 0,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(t=r.currentTime,t>this.lastCurrentTime&&(this.lastCurrentTime=t),Kt.isBuffered(r,t)?e=this.getBufferedFrag(t):Kt.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(it.a.FRAG_CHANGED,{frag:i});var a=i.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(it.a.LEVEL_SWITCHED,{level:a}),this.fragPlaying=i}}},t.prototype.immediateLevelSwitch=function(){if(at.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,Kt.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t=void 0,r=void 0,i=void 0;if(r=this.getBufferedFrag(e.currentTime),r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var a=this.hls.nextLoadLevel,n=this.levels[a],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*o)+1:0}if((i=this.getBufferedFrag(e.currentTime+t))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state=dr.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(it.a.BUFFER_FLUSHING,r)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new lr(r,t,this.fragmentTracker,this.hls)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(at.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;Object(rt.a)(t)&&at.b.log("media seeking to "+t.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:e,a=Kt.bufferInfo(i,t,this.config.maxBufferHole);if(this.state===dr.FRAG_LOADING){var n=this.fragCurrent;if(0===a.len&&n){var o=r.maxFragLookUpTolerance,s=n.start-o,l=n.start+n.duration+o;t<s||t>l?(n.loader&&(at.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=dr.IDLE):at.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===dr.ENDED&&(0===a.len&&(this.fragPrevious=0),this.state=dr.IDLE);e&&(this.lastCurrentTime=t),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(rt.a)(t)&&at.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){at.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){at.b.log("trigger BUFFER_RESET"),this.hls.trigger(it.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t=!1,r=!1,i=void 0;e.levels.forEach(function(e){(i=e.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(t=!0),-1!==i.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=t&&r,this.audioCodecSwitch&&at.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,r=e.level,i=this.levels[this.levelLastLoaded],a=this.levels[r],n=t.totalduration,o=0;if(at.b.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),t.live){var s=a.details;s&&t.fragments.length>0?(L(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(rt.a)(o)?at.b.log("live playlist sliding:"+o.toFixed(3)):(at.b.log("live playlist - outdated PTS, unknown sliding"),U(this.fragPrevious,i,t))):(at.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,U(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(a.details=t,this.levelLastLoaded=r,this.hls.trigger(it.a.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=t.startTimeOffset;Object(rt.a)(l)?(l<0&&(at.b.log("negative start time offset "+l+", count from end of last fragment"),l=o+n+l),at.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):t.live?(this.startPosition=this.computeLivePosition(o,t),at.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===dr.WAITING_LEVEL&&(this.state=dr.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===dr.KEY_LOADING&&(this.state=dr.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,i=this.levels,a=this.media,n=e.frag;if(this.state===dr.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var o=e.stats,s=i[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,at.b.log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),n.bitrateTest&&r.nextLoadLevel)this.state=dr.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(it.a.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=dr.IDLE,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,r.trigger(it.a.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{at.b.log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=dr.PARSING,this.pendingBuffering=!0,this.appended=!1,n.bitrateTest&&(n.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:n}));var u=!(a&&a.seeking)&&(l.PTSKnown||!l.live),d=l.initSegment?l.initSegment.data:[],c=this._getAudioCodec(s),p=this.demuxer=this.demuxer||new rr(this.hls,"main");p.push(e.payload,d,c,s.videoCodec,t,l.totalduration,u)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===dr.PARSING){var i=e.tracks,a=void 0,n=void 0;if(i.audio&&this.altAudio&&delete i.audio,n=i.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(at.b.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==n.container&&(o="mp4a.40.2",at.b.log("Android: force audio codec to "+o)),n.levelCodec=o,n.id=e.id}n=i.video,n&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=e.id),this.hls.trigger(it.a.BUFFER_CODECS,i);for(a in i){n=i[a],at.b.log("main track:"+a+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var l=n.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(it.a.BUFFER_APPENDING,{type:a,data:l,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"main"===e.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===dr.PARSING){var a=this.levels[this.level],n=r;if(Object(rt.a)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&n.addElementaryStream(ht.ElementaryStreamTypes.AUDIO),!0===e.hasVideo&&n.addElementaryStream(ht.ElementaryStreamTypes.VIDEO),at.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(n.dropped=e.dropped,n.dropped)if(n.backtracked)at.b.warn("Already backtracked on this fragment, appending with the gap",n.sn);else{var o=a.details;if(!o||n.sn!==o.startSN)return at.b.warn("missing video frame(s), backtracking fragment",n.sn),this.fragmentTracker.removeFragment(n),n.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=dr.IDLE,this.fragPrevious=n,void this.tick();at.b.warn("missing video frame(s) on first frag, appending with gap",n.sn)}else n.backtracked=!1;var s=x(a.details,n,e.startPTS,e.endPTS,e.startDTS,e.endDTS),l=this.hls;l.trigger(it.a.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(r){r&&r.length&&t.state===dr.PARSING&&(t.appended=!0,t.pendingBuffering=!0,l.trigger(it.a.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))}),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===dr.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=dr.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){at.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(at.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=dr.IDLE}var a=this.hls;a.trigger(it.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(it.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(at.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,r=void 0,i=void 0,a=!1;for(var n in t){var o=t[n];"main"===o.id?(i=n,r=o,"video"===n&&(this.videoBuffer=t[n].buffer)):a=!0}a&&r?(at.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==dr.PARSING&&t!==dr.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==dr.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;at.b.log("main buffered : "+ar.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(it.a.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=dr.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&Kt.isBuffered(this.media,this.media.currentTime)&&Kt.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case tt.a.FRAG_LOAD_ERROR:case tt.a.FRAG_LOAD_TIMEOUT:case tt.a.KEY_LOAD_ERROR:case tt.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);at.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=dr.FRAG_LOADING_WAITING_RETRY}else at.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=dr.ERROR;break;case tt.a.LEVEL_LOAD_ERROR:case tt.a.LEVEL_LOAD_TIMEOUT:this.state!==dr.ERROR&&(e.fatal?(this.state=dr.ERROR,at.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==dr.WAITING_LEVEL||(this.state=dr.IDLE));break;case tt.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==dr.PARSING&&this.state!==dr.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=dr.IDLE):(at.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,at.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},t.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=this.mediaBuffer?this.mediaBuffer:e,r=t.buffered;!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,r)}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=dr.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(ht.ElementaryStreamTypes.VIDEO,e.buffered),this.state=dr.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},t.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&(at.b.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},t.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(at.b.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},ur(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,at.b.log("main stream:"+t+"->"+e),this.hls.trigger(it.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(or),pr=cr,_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),hr=window,mr=hr.performance,gr=function(e){function t(r){Q(this,t);var i=J(this,e.call(this,r,it.a.MANIFEST_LOADED,it.a.LEVEL_LOADED,it.a.AUDIO_TRACK_SWITCHED,it.a.FRAG_LOADED,it.a.ERROR));return i.canload=!1,i.currentLevelIndex=null,i.manualLevelIndex=-1,i.timer=null,i}return $(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t=[],r=void 0,i={},a=null,n=!1,o=!1,s=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),l=[];if(e.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,n=n||!!e.videoCodec,o=o||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),s&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),a=i[e.bitrate],a?a.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,t.push(e)),e.attrs&&e.attrs.AUDIO&&S(a||e,"audio",e.attrs.AUDIO),e.attrs&&e.attrs.SUBTITLES&&S(a||e,"text",e.attrs.SUBTITLES)}),n&&o&&(t=t.filter(function(e){return!!e.videoCodec})),t=t.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||u(t))&&(!r||u(r))}),e.audioTracks&&(l=e.audioTracks.filter(function(e){return!e.audioCodec||u(e.audioCodec,"audio")}),l.forEach(function(e,t){e.id=t})),t.length>0){r=t[0].bitrate,t.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=t;for(var d=0;d<t.length;d++)if(t[d].bitrate===r){this._firstLevel=d,at.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+r);break}this.hls.trigger(it.a.MANIFEST_PARSED,{levels:t,audioTracks:l,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:n,altAudio:l.length>0&&n})}else this.hls.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:tt.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){at.b.log("switching to level "+e),this.currentLevelIndex=e;var i=t[e];i.level=e,r.trigger(it.a.LEVEL_SWITCHING,i)}var a=t[e],n=a.details;if(!n||n.live){var o=a.urlId;r.trigger(it.a.LEVEL_LOADING,{url:a.url[o],level:e,id:o})}}else r.trigger(it.a.ERROR,{type:tt.b.OTHER_ERROR,details:tt.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){if(e.fatal)return void(e.type===tt.b.NETWORK_ERROR&&this.clearTimer());var t=!1,r=!1,i=void 0;switch(e.details){case tt.a.FRAG_LOAD_ERROR:case tt.a.FRAG_LOAD_TIMEOUT:case tt.a.KEY_LOAD_ERROR:case tt.a.KEY_LOAD_TIMEOUT:i=e.frag.level,r=!0;break;case tt.a.LEVEL_LOAD_ERROR:case tt.a.LEVEL_LOAD_TIMEOUT:i=e.context.level,t=!0;break;case tt.a.REMUX_ALLOC_ERROR:i=e.level,t=!0}void 0!==i&&this.recoverLevel(e,i,t,r)},t.prototype.recoverLevel=function(e,t,r,i){var a=this,n=this.hls.config,o=e.details,s=this._levels[t],l=void 0,u=void 0,d=void 0;if(s.loadError++,s.fragmentError=i,r){if(!(this.levelRetryCount+1<=n.levelLoadingMaxRetry))return at.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);u=Math.min(Math.pow(2,this.levelRetryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return a.loadLevel()},u),e.levelRetry=!0,this.levelRetryCount++,at.b.warn("level controller, "+o+", retry in "+u+" ms, current retry count is "+this.levelRetryCount)}(r||i)&&(l=s.url.length,l>1&&s.loadError<l?(s.urlId=(s.urlId+1)%l,s.details=void 0,at.b.warn("level controller, "+o+" for level "+t+": switching to redundant URL-id "+s.urlId)):-1===this.manualLevelIndex?(d=0===t?this._levels.length-1:t-1,at.b.warn("level controller, "+o+": switch to "+d),this.hls.nextAutoLevel=this.currentLevelIndex=d):i&&(at.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,r=e.level;if(r===this.currentLevelIndex){var i=this._levels[r];i.fragmentError||(i.loadError=0,this.levelRetryCount=0);var a=e.details;if(a.live){var n=1e3*(a.averagetargetduration?a.averagetargetduration:a.targetduration),o=n,s=i.details;s&&a.endSN===s.endSN&&(o/=2,at.b.log("same live playlist, reload twice faster")),o-=mr.now()-e.stats.trequest,o=Math.max(n/2,Math.round(o)),at.b.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},o)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){var i=r.audioGroupIds.findIndex(function(e){return e===t});i!==r.urlId&&(r.urlId=i,this.startLoad())}},t.prototype.loadLevel=function(){if(at.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"===(void 0===e?"undefined":_r(e))&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,i=e.url[r];at.b.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(it.a.LEVEL_LOADING,{url:i,level:t,id:r})}}},fr(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(lt),vr=gr,yr=r(6),Ar=function(e){function t(r){re(this,t);var i=ie(this,e.call(this,r,it.a.MEDIA_ATTACHED,it.a.MEDIA_DETACHING,it.a.FRAG_PARSING_METADATA));return i.id3Track=void 0,i.media=void 0,i}return ae(t,e),t.prototype.destroy=function(){lt.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){te(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return ee(r,this.media),r}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<r.length;a++){var n=yr.a.getID3Frames(r[a].data);if(n){var o=r[a].pts,s=a<r.length-1?r[a+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var l=0;l<n.length;l++){var u=n[l];if(!yr.a.isTimeStampFrame(u)){var d=new i(o,s,"");d.value=u,this.id3Track.addCue(d)}}}}},t}(lt),kr=Ar,br=function(){function e(t){oe(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),wr=br,Cr=function(){function e(t,r,i,a){se(this,e),this.hls=t,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new wr(r),this.fast_=new wr(i)}return e.prototype.sample=function(e,t){e=Math.max(e,this.minDelayMs_);var r=8e3*t/e,i=e/1e3;this.fast_.sample(i,r),this.slow_.sample(i,r)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),Tr=Cr,Er=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Ir=window,Sr=Ir.performance,Rr=function(e){function t(r){le(this,t);var i=ue(this,e.call(this,r,it.a.FRAG_LOADING,it.a.FRAG_LOADED,it.a.FRAG_BUFFERED,it.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=r,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return de(t,e),t.prototype.destroy=function(){this.clearTimer(),lt.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,i=r.config,a=t.level,n=r.levels[a].details.live,o=void 0,s=void 0;n?(o=i.abrEwmaFastLive,s=i.abrEwmaSlowLive):(o=i.abrEwmaFastVoD,s=i.abrEwmaSlowVoD),this._bwEstimator=new Tr(r,s,o,i.abrEwmaDefaultEstimate)}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var i=r.loader,a=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return at.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var n=i.stats;if(t&&n&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var o=Sr.now()-n.trequest,s=Math.abs(t.playbackRate);if(o>500*r.duration/s){var l=e.levels,u=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/o),d=l[r.level],c=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*c/8)),_=t.currentTime,f=(p-n.loaded)/u,h=(Kt.bufferInfo(t,_,e.config.maxBufferHole).end-_)/s;if(h<2*r.duration/s&&f>h){var m=void 0,g=void 0;for(g=r.level-1;g>a;g--){var v=l[g].realBitrate?Math.max(l[g].realBitrate,l[g].bitrate):l[g].bitrate;if((m=r.duration*v/(6.4*u))<h)break}m<f&&(at.b.warn("loading too slow, abort fragment loading and switch to level "+g+":fragLoadedDelay["+g+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+f.toFixed(1)+":"+h.toFixed(1)),e.nextLoadLevel=g,this._bwEstimator.sample(o,n.loaded),i.abort(),this.clearTimer(),e.trigger(it.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(rt.a)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],i=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,a=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:i,duration:a},r.realBitrate=Math.round(8*i/a)}if(e.frag.bitrateTest){var n=e.stats;n.tparsed=n.tbuffered=n.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,r=e.frag
;if(!0!==t.aborted&&"main"===r.type&&Object(rt.a)(r.sn)&&(!r.bitrateTest||t.tload===t.tbuffered)){var i=t.tparsed-t.trequest;at.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},t.prototype.onError=function(e){switch(e.details){case tt.a.FRAG_LOAD_ERROR:case tt.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,r,i,a,n,o,s,l){for(var u=a;u>=i;u--){var d=l[u];if(d){var c=d.details,p=c?c.totalduration/c.fragments.length:t,_=!!c&&c.live,f=void 0;f=u<=e?o*r:s*r;var h=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,m=h*p/f;if(at.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(f)+"/"+h+"/"+p+"/"+n+"/"+m),f>h&&(!m||_&&!this.bitrateTestDelay||m<n))return u}}return-1},Er(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,i=e.config,a=e.minAutoLevel,n=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=n?n.currentTime:0,u=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,c=(Kt.bufferInfo(n,l,i.maxBufferHole).end-l)/u,p=this._findBestLevel(o,s,d,a,t,c,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(p>=0)return p;at.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var _=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,f=i.abrBandWidthFactor,h=i.abrBandWidthUpFactor;if(0===c){var m=this.bitrateTestDelay;if(m){_=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-m,at.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*_)+" ms"),f=h=1}}return p=this._findBestLevel(o,s,d,a,t,c+_,f,h,r),Math.max(p,0)}}]),t}(lt),xr=Rr,Lr=E(),Dr=function(e){function t(r){ce(this,t);var i=pe(this,e.call(this,r,it.a.MEDIA_ATTACHING,it.a.MEDIA_DETACHING,it.a.MANIFEST_PARSED,it.a.BUFFER_RESET,it.a.BUFFER_APPENDING,it.a.BUFFER_CODECS,it.a.BUFFER_EOS,it.a.BUFFER_FLUSHING,it.a.LEVEL_PTS_UPDATED,it.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i._live=null,i._objectUrl=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return _e(t,e),t.prototype.destroy=function(){lt.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var i=this.sourceBuffer.audio;if(Math.abs(i.timestampOffset-e.start)>.1){var a=i.updating;try{i.abort()}catch(e){a=!0,at.b.warn("can not abort audio buffer: "+e)}a?this.audioTimestampOffset=e.start:(at.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,r=e.video||e.levels.length&&e.altAudio,i=0;e.altAudio&&(t||r)&&(i=(t?1:0)+(r?1:0),at.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new Lr;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},t.prototype.onMediaDetaching=function(){at.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){at.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):at.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(it.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){at.b.log("media source opened"),this.hls.trigger(it.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){at.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){at.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;at.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce(function(e,r){return r.parent===t?e+1:e},0),i={},a=this.sourceBuffer;for(var n in a)i[n]=a[n].buffered;this.hls.trigger(it.a.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){at.b.error("sourceBuffer error:",e),this.hls.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:tt.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var i in e)if(!t[i]){var a=e[i],n=a.levelCodec||a.codec,o=a.container+";codecs="+n;at.b.log("creating sourceBuffer("+o+")");try{var s=t[i]=r.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[i]={codec:n,container:a.container},a.buffer=s}catch(e){at.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:tt.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(it.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){at.b.error("sourceBuffer error:",e.event),this.hls.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:tt.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,r=e.type;for(var i in t)r&&i!==r||t[i].ended||(t[i].ended=!0,at.b.log(i+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var r in e){var i=e[r];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}at.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){at.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e=this.hls.config,t=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(at.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(rt.a)(t))&&(at.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var i in r)t+=r[i].buffered.length}catch(e){at.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(it.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void at.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var i=r.shift();try{var a=i.type,n=t[a];n?n.updating?r.unshift(i):(n.ended=!1,this.parent=i.parent,n.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){at.b.error("error while trying to append buffer:"+t.message),r.unshift(i);var o={type:tt.b.MEDIA_ERROR,parent:i.parent};22!==t.code?(this.appendError?this.appendError++:this.appendError=1,o.details=tt.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(at.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],o.fatal=!0,e.trigger(it.a.ERROR,o)):(o.fatal=!1,e.trigger(it.a.ERROR,o))):(this.segments=[],o.details=tt.a.BUFFER_FULL_ERROR,o.fatal=!1,e.trigger(it.a.ERROR,o))}}}},t.prototype.flushBuffer=function(e,t,r){var i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,l=void 0,u=this.sourceBuffer;if(Object.keys(u).length){if(at.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in u)if(!r||d===r){if(i=u[d],i.ended=!1,i.updating)return at.b.warn("cannot flush, sb updating in progress"),!1;try{for(a=0;a<i.buffered.length;a++)if(n=i.buffered.start(a),o=i.buffered.end(a),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,l=t):(s=Math.max(n,e),l=Math.min(o,t)),Math.min(l,o)-s>.5)return this.flushBufferCounter++,at.b.log("flush "+d+" ["+s+","+l+"], of ["+n+","+o+"], pos:"+this.media.currentTime),i.remove(s,l),!1}catch(e){at.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else at.b.warn("abort flushing too many retries");at.b.log("buffer flushed")}return!0},t}(lt),Mr=Dr,Pr=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Or=function(e){function t(r){fe(this,t);var i=he(this,e.call(this,r,it.a.FPS_DROP_LEVEL_CAPPING,it.a.MEDIA_ATTACHING,it.a.MANIFEST_PARSED,it.a.BUFFER_CODECS,it.a.MEDIA_DETACHING));return i.autoLevelCapping=Number.POSITIVE_INFINITY,i.firstLevel=null,i.levels=[],i.media=null,i.restrictedLevels=[],i.timer=null,i}return me(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&(e.video||e.levels.length&&e.altAudio)&&this._startCapping()},t.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},t.prototype.onLevelsUpdated=function(e){this.levels=e.levels},t.prototype.onMediaDetaching=function(){this._stopCapping()},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var r=this;if(!this.levels)return-1;var i=this.levels.filter(function(i,a){return t.isLevelAllowed(a,r.restrictedLevels)&&a<=e});return t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},t.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},t.isLevelAllowed=function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var i=e.length-1,a=0;a<e.length;a+=1){var n=e[a];if((n.width>=t||n.height>=r)&&function(e,t){return!t||(e.width!==t.width||e.height!==t.height)}(n,e[a+1])){i=a;break}}return i},Pr(t,[{key:"mediaWidth",get:function(){var e=void 0,r=this.media;return r&&(e=r.width||r.clientWidth||r.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,r=this.media;return r&&(e=r.height||r.clientHeight||r.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(lt),Nr=Or,Ur=window,Fr=Ur.performance,Br=function(e){function t(r){return ge(this,t),ve(this,e.call(this,r,it.a.MEDIA_ATTACHING))}return ye(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){"function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}},t.prototype.checkFPS=function(e,t,r){var i=Fr.now();if(t){if(this.lastTime){var a=i-this.lastTime,n=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*n/a,l=this.hls;if(l.trigger(it.a.FPS_DROP,{currentDropped:n,currentDecoded:o,totalDroppedFrames:r}),s>0&&n>l.config.fpsDroppedMonitoringThreshold*o){var u=l.currentLevel;at.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(it.a.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(lt),zr=Br,Gr=window,jr=Gr.performance,Vr=Gr.XMLHttpRequest,Hr=function(){function e(t){Ae(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:jr.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e=void 0,t=this.context;e=this.loader=new Vr;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(r){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,i=this.stats,a=this.context,n=this.config;if(!i.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(jr.now(),i.trequest)),4===r){var o=t.status;if(o>=200&&o<300){i.tload=Math.max(i.tfirst,jr.now());var s=void 0,l=void 0;"arraybuffer"===a.responseType?(s=t.response,l=s.byteLength):(s=t.responseText,l=s.length),i.loaded=i.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,i,a,t)}else i.retry>=n.maxRetry||o>=400&&o<499?(at.b.error(o+" while loading "+a.url),this.callbacks.onError({code:o,text:t.statusText},a,t)):(at.b.warn(o+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,n.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),n.timeout)},e.prototype.loadtimeout=function(){at.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var i=this.callbacks.onProgress;i&&i(r,this.context,null,t)},e}(),qr=Hr,Kr=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Wr=function(e){function t(r){ke(this,t);var i=be(this,e.call(this,r,it.a.MANIFEST_LOADING,it.a.MANIFEST_PARSED,it.a.AUDIO_TRACK_LOADED,it.a.AUDIO_TRACK_SWITCHED,it.a.LEVEL_LOADED,it.a.ERROR));return i._trackId=-1,i._selectDefaultTrack=!0,i.tracks=[],i.trackIdBlacklist=Object.create(null),i.audioGroupId=null,i}return we(t,e),t.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(it.a.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)return void at.b.warn("Invalid audio track id:",e.id);if(at.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()},t.prototype.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},t.prototype.onError=function(e){e.type===tt.b.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===tt.a.AUDIO_TRACK_LOAD_ERROR&&(at.b.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},t.prototype._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)return void at.b.debug("Same id as current audio-track passed, and track details available -> no-op");if(e<0||e>=this.tracks.length)return void at.b.warn("Invalid id passed to audio-track controller");var t=this.tracks[e];at.b.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,i=t.type,a=t.id;this.hls.trigger(it.a.AUDIO_TRACK_SWITCHING,{id:a,type:i,url:r}),this._loadTrackDetailsIfNeeded(t)},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],i=null;if(r&&(i=r.name),this._selectDefaultTrack){var a=t.filter(function(e){return e.default});a.length?t=a:at.b.warn("No default audio tracks defined")}var n=!1,o=function(){t.forEach(function(t){n||e.audioGroupId&&t.groupId!==e.audioGroupId||i&&i!==t.name||(e._setAudioTrack(t.id),n=!0)})};o(),n||(i=null,o()),n||(at.b.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:tt.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t.prototype._needsTrackLoading=function(e){var t=e.details;return!t||(!!t.live||void 0)},t.prototype._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;at.b.log("loading audio-track playlist for id: "+r),this.hls.trigger(it.a.AUDIO_TRACK_LOADING,{url:t,id:r})}},t.prototype._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,at.b.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,i=t.language,a=t.groupId;at.b.warn("Loading failed on audio track id: "+e+", group-id: "+a+', name/language: "'+r+'" / "'+i+'"');for(var n=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]){var s=this.tracks[o];if(s.name===r){n=o;break}}if(n===e)return void at.b.warn('No fallback audio-track found for name/language: "'+r+'" / "'+i+'"');at.b.log("Attempting audio-track fallback id:",n,"group-id:",this.tracks[n].groupId),this._setAudioTrack(n)},Kr(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}]),t}(or),Yr=Wr,Zr=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Xr=window,Qr=Xr.performance,Jr={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},$r=function(e){function t(r,i){Ce(this,t);var a=Te(this,e.call(this,r,it.a.MEDIA_ATTACHED,it.a.MEDIA_DETACHING,it.a.AUDIO_TRACKS_UPDATED,it.a.AUDIO_TRACK_SWITCHING,it.a.AUDIO_TRACK_LOADED,it.a.KEY_LOADED,it.a.FRAG_LOADED,it.a.FRAG_PARSING_INIT_SEGMENT,it.a.FRAG_PARSING_DATA,it.a.FRAG_PARSED,it.a.ERROR,it.a.BUFFER_RESET,it.a.BUFFER_CREATED,it.a.BUFFER_APPENDED,it.a.BUFFER_FLUSHED,it.a.INIT_PTS_FOUND));return a.fragmentTracker=i,a.config=r.config,a.audioCodecSwap=!1,a._state=Jr.STOPPED,a.initPTS=[],a.waitingFragment=null,a.videoTrackCC=null,a}return Ee(t,e),t.prototype.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},t.prototype.onHandlerDestroyed=function(){this.state=Jr.STOPPED,this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},t.prototype.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[r]=i,this.videoTrackCC=r,at.b.log("InitPTS for cc: "+r+" found from video track: "+i),this.state===Jr.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(at.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=Jr.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=Jr.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=Jr.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Jr.STOPPED},t.prototype.doTick=function(){var e=void 0,t=void 0,r=void 0,i=this.hls,a=i.config;switch(this.state){case Jr.ERROR:case Jr.PAUSED:case Jr.BUFFER_FLUSHING:break;case Jr.STARTING:this.state=Jr.WAITING_TRACK,this.loadedmetadata=!1;break;case Jr.IDLE:var n=this.tracks;if(!n)break;if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,l=Kt.bufferInfo(o,e,a.maxBufferHole),u=Kt.bufferInfo(s,e,a.maxBufferHole),d=l.len,c=l.end,p=this.fragPrevious,_=Math.min(a.maxBufferLength,a.maxMaxBufferLength),f=Math.max(_,u.len),h=this.audioSwitch,m=this.trackId;if((d<f||h)&&m<n.length){if(void 0===(r=n[m].details)){this.state=Jr.WAITING_TRACK;break}if(!h&&!r.live&&p&&p.sn===r.endSN&&!l.nextStart&&(!this.media.seeking||this.media.duration-c<p.duration/2)){this.hls.trigger(it.a.BUFFER_EOS,{type:"audio"}),this.state=Jr.ENDED;break}var g=r.fragments,v=g.length,y=g[0].start,A=g[v-1].start+g[v-1].duration,k=void 0;if(h)if(r.live&&!r.PTSKnown)at.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),c=0;else if(c=e,r.PTSKnown&&e<y){if(!(l.end>y||l.nextStart))return;at.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=y+.05}if(r.initSegment&&!r.initSegment.data)k=r.initSegment;else if(c<=y){if(k=g[0],null!==this.videoTrackCC&&k.cc!==this.videoTrackCC&&(k=M(g,this.videoTrackCC)),r.live&&k.loadIdx&&k.loadIdx===this.fragLoadIdx){var b=l.nextStart?l.nextStart:y;return at.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(b+.05)),void(this.media.currentTime=b+.05)}}else{var w=void 0,C=a.maxFragLookUpTolerance,T=p?g[p.sn-g[0].sn+1]:void 0,E=function(e){var t=Math.min(C,e.duration);return e.start+e.duration-t<=c?1:e.start-t>c&&e.start?-1:0};c<A?(c>A-C&&(C=0),w=T&&!E(T)?T:qt.search(g,E)):w=g[v-1],w&&(k=w,y=w.start,p&&k.level===p.level&&k.sn===p.sn&&(k.sn<r.endSN?(k=g[k.sn+1-r.startSN],at.b.log("SN just loaded, load next one: "+k.sn)):k=null))}k&&(k.encrypted?(at.b.log("Loading key for "+k.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+m),this.state=Jr.KEY_LOADING,i.trigger(it.a.KEY_LOADING,{frag:k})):(at.b.log("Loading "+k.sn+", cc: "+k.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+m+", currentTime:"+e+",bufferEnd:"+c.toFixed(3)),(h||this.fragmentTracker.getState(k)===jt.NOT_LOADED)&&(this.fragCurrent=k,this.startFragRequested=!0,Object(rt.a)(k.sn)&&(this.nextLoadPosition=k.start+k.duration),i.trigger(it.a.FRAG_LOADING,{frag:k}),this.state=Jr.FRAG_LOADING)))}break;case Jr.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=Jr.IDLE);break;case Jr.FRAG_LOADING_WAITING_RETRY:var I=Qr.now(),S=this.retryDate;o=this.media;var R=o&&o.seeking;(!S||I>=S||R)&&(at.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Jr.IDLE);break;case Jr.WAITING_INIT_PTS:var x=this.videoTrackCC;if(void 0===this.initPTS[x])break;var L=this.waitingFragment;if(L){var D=L.frag.cc;x!==D?(t=this.tracks[this.trackId],t.details&&t.details.live&&(at.b.warn("Waiting fragment CC ("+D+") does not match video track CC ("+x+")"),this.waitingFragment=null,this.state=Jr.IDLE)):(this.state=Jr.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=Jr.IDLE;break;case Jr.STOPPED:case Jr.FRAG_LOADING:case Jr.PARSING:case Jr.PARSED:case Jr.ENDED:}},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(at.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===Jr.ENDED&&(this.state=Jr.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(e){at.b.log("audio tracks updated"),this.tracks=e.audioTracks},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=Jr.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=Jr.IDLE),this.tick()},t.prototype.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,i=this.tracks[r],a=t.totalduration,n=0;if(at.b.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var o=i.details;o&&t.fragments.length>0?(L(o,t),n=t.fragments[0].start,t.PTSKnown?at.b.log("live audio playlist sliding:"+n.toFixed(3)):at.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,at.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(rt.a)(s)?(at.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Jr.WAITING_TRACK&&(this.state=Jr.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===Jr.KEY_LOADING&&(this.state=Jr.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===Jr.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var i=this.tracks[this.trackId],a=i.details,n=a.totalduration,o=t.level,s=t.sn,l=t.cc,u=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",d=this.stats=e.stats;if("initSegment"===s)this.state=Jr.IDLE,d.tparsed=d.tbuffered=Qr.now(),a.initSegment.data=e.payload,
this.hls.trigger(it.a.FRAG_BUFFERED,{stats:d,frag:t,id:"audio"}),this.tick();else{this.state=Jr.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new rr(this.hls,"audio"));var c=this.initPTS[l],p=a.initSegment?a.initSegment.data:[];if(a.initSegment||void 0!==c){this.pendingBuffering=!0,at.b.log("Demuxing "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o);this.demuxer.push(e.payload,p,u,null,t,n,!1,c)}else at.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.waitingFragment=e,this.state=Jr.WAITING_INIT_PTS}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Jr.PARSING){var i=e.tracks,a=void 0;if(i.video&&delete i.video,a=i.audio){a.levelCodec=a.codec,a.id=e.id,this.hls.trigger(it.a.BUFFER_CODECS,i),at.b.log("audio track:audio,container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var n=a.initSegment;if(n){var o={type:"audio",data:n,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(it.a.BUFFER_APPENDING,o))}this.tick()}}},t.prototype.onFragParsingData=function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&i.sn===r.sn&&i.level===r.level&&this.state===Jr.PARSING){var a=this.trackId,n=this.tracks[a],o=this.hls;Object(rt.a)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(ht.ElementaryStreamTypes.AUDIO),at.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),x(n.details,r,e.startPTS,e.endPTS);var s=this.audioSwitch,l=this.media,u=!1;if(s&&l)if(l.readyState){var d=l.currentTime;at.b.log("switching audio track : currentTime:"+d),d>=e.startPTS&&(at.b.log("switching audio track : flushing all audio"),this.state=Jr.BUFFER_FLUSHING,o.trigger(it.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,o.trigger(it.a.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,o.trigger(it.a.AUDIO_TRACK_SWITCHED,{id:a});var c=this.pendingData;if(!c)return at.b.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(it.a.ERROR,{type:tt.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&c.push({type:e.type,data:t,parent:"audio",content:"data"})}),!u&&c.length&&(c.forEach(function(e){t.state===Jr.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(it.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Jr.PARSING&&(this.stats.tparsed=Qr.now(),this.state=Jr.PARSED,this._checkAppendedParsed())},t.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},t.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==Jr.PARSING&&t!==Jr.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==Jr.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=Qr.now(),r.trigger(it.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;at.b.log("audio buffered : "+ar.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(it.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Jr.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case tt.a.FRAG_LOAD_ERROR:case tt.a.FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&&"audio"!==r.type)break;if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry){this.fragLoadError=i;var n=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);at.b.warn("AudioStreamController: frag loading failed, retry in "+n+" ms"),this.retryDate=Qr.now()+n,this.state=Jr.FRAG_LOADING_WAITING_RETRY}else at.b.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Jr.ERROR}break;case tt.a.AUDIO_TRACK_LOAD_ERROR:case tt.a.AUDIO_TRACK_LOAD_TIMEOUT:case tt.a.KEY_LOAD_ERROR:case tt.a.KEY_LOAD_TIMEOUT:this.state!==Jr.ERROR&&(this.state=e.fatal?Jr.ERROR:Jr.IDLE,at.b.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case tt.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===Jr.PARSING||this.state===Jr.PARSED)){var o=this.mediaBuffer,s=this.media.currentTime;if(o&&Kt.isBuffered(o,s)&&Kt.isBuffered(o,s+.5)){var l=this.config;l.maxMaxBufferLength>=l.maxBufferLength&&(l.maxMaxBufferLength/=2,at.b.warn("AudioStreamController: reduce max buffer length to "+l.maxMaxBufferLength+"s")),this.state=Jr.IDLE}else at.b.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Jr.BUFFER_FLUSHING,this.hls.trigger(it.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(at.b.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(it.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=Jr.PARSED):(this.state=Jr.IDLE,this.fragPrevious=null,this.tick())},Zr(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,at.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(or),ei=$r,ti=function(){function e(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function t(e){return"string"==typeof e&&(!!o[e.toLowerCase()]&&e.toLowerCase())}function r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}function i(i,n,o){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var d="",c=!1,p=i,_=n,f=o,h=null,m="",g=!0,v="auto",y="start",A=50,k="middle",b=50,w="middle";if(Object.defineProperty(s,"id",r({},u,{get:function(){return d},set:function(e){d=""+e}})),Object.defineProperty(s,"pauseOnExit",r({},u,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",r({},u,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},u,{get:function(){return _},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},u,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},u,{get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},u,{get:function(){return m},set:function(t){var r=e(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},u,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},u,{get:function(){return v},set:function(e){if("number"!=typeof e&&e!==a)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},u,{get:function(){return y},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");y=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},u,{get:function(){return A},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");A=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},u,{get:function(){return k},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");k=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},u,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},u,{get:function(){return w},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");w=r,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var a="auto",n={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}(),ri=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};Re.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var ii=new ti(0,0,0),ai="middle"===ii.align?"middle":"center";Ie.prototype={parse:function(e){function t(){var e=r.buffer,t=0;for(e=De(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,r.buffer=e.substr(t),i}var r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{var i=void 0;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;i=t();var a=i.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var n=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(n?n=!1:i=t(),r.state){case"HEADER":/:/.test(i)?function(e){xe(e,function(e,t){},/:/)}(i):i||(r.state="ID");continue;case"NOTE":i||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){r.state="NOTE";break}if(!i)continue;if(r.cue=new ti(0,0,""),r.state="CUE",-1===i.indexOf("--\x3e")){r.cue.id=i;continue}case"CUE":try{Le(i,r.cue,r.regionList)}catch(e){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(n=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=i;continue;case"BADCUE":i||(r.state="ID");continue}}}catch(e){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}};var ni=Ie,oi={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},si=function(e){var t=e;return oi.hasOwnProperty(e)&&(t=oi[e]),String.fromCharCode(t)},li=15,ui=100,di={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ci={17:2,18:4,21:6,22:8,23:10,19:13,20:15},pi={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},_i={25:2,26:4,29:6,30:8,31:10,27:13,28:15},fi=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],hi={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},mi=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},gi=function(){function e(t,r,i,a,n){Pe(this,e),this.foreground=t||"white",this.underline=r||!1,this.italics=i||!1,this.background=a||"black",this.flash=n||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),vi=function(){function e(t,r,i,a,n,o){Pe(this,e),this.uchar=t||" ",this.penState=new gi(r,i,a,n,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),yi=function(){function e(){Pe(this,e),this.chars=[];for(var t=0;t<ui;t++)this.chars.push(new vi);this.pos=0,this.currPenState=new gi}return e.prototype.equals=function(e){for(var t=!0,r=0;r<ui;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<ui;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<ui;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(hi.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>ui&&(hi.log("ERROR","Too large cursor position "+this.pos),this.pos=ui)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=si(e);if(this.pos>=ui)return void hi.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},e.prototype.clearFromPos=function(e){var t=void 0;for(t=e;t<ui;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,r=0;r<ui;r++){var i=this.chars[r].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Ai=function(){function e(){Pe(this,e),this.rows=[];for(var t=0;t<li;t++)this.rows.push(new yi);this.currRow=li-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<li;e++)this.rows[e].clear();this.currRow=li-1},e.prototype.equals=function(e){for(var t=!0,r=0;r<li;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<li;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<li;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){hi.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){hi.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<li;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var n=a.rows[i].cueStartTime;if(n&&n<hi.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(a.rows[i+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[u].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},e.prototype.setBkgData=function(e){hi.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void hi.log("DEBUG","roll_up but nrRollUpRows not set yet");hi.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),hi.log("INFO","Rolling up")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],r="",i=-1,a=0;a<li;a++){var n=this.rows[a].getTextString();n&&(i=a+1,e?t.push("Row "+i+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},e.prototype.getTextAndFormat=function(){return this.rows},e}(),ki=function(){function e(t,r){Pe(this,e),this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new Ai,this.nonDisplayedMemory=new Ai,this.lastOutputScreen=new Ai,this.currRollUpRow=this.displayedMemory.rows[li-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[li-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,hi.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";hi.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(hi.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){hi.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){hi.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){hi.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){hi.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){hi.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){hi.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){hi.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){hi.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){hi.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){hi.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){hi.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(hi.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,hi.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){hi.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[r]}hi.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=hi.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),bi=function(){function e(t,r,i){Pe(this,e),this.field=t||1,this.outputs=[r,i],this.channels=[new ki(1,r),new ki(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var r=void 0,i=void 0,a=void 0,n=!1;this.lastTime=e,hi.setTime(e);for(var o=0;o<t.length;o+=2)if(i=127&t[o],a=127&t[o+1],0!==i||0!==a){if(hi.log("DATA","["+mi([t[o],t[o+1]])+"] -> ("+mi([i,a])+")"),r=this.parseCmd(i,a),r||(r=this.parseMidrow(i,a)),r||(r=this.parsePAC(i,a)),r||(r=this.parseBackgroundAttributes(i,a)),!r&&(n=this.parseChars(i,a)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(n)}else hi.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,hi.log("WARNING","Couldn't parse cleaned data "+mi([i,a])+" orig: "+mi([t[o],t[o+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var r=null,i=(20===e||28===e)&&t>=32&&t<=47,a=(23===e||31===e)&&t>=33&&t<=35;if(!i&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,hi.log("DEBUG","Repeated command ("+mi([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var n=this.channels[r-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.parseMidrow=function(e,t){var r=null;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currChNr)return hi.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[r-1].ccMIDROW(t),hi.log("DEBUG","MIDROW ("+mi([e,t])+")"),!0}return!1},e.prototype.parsePAC=function(e,t){var r=null,i=null,a=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,n=(16===e||24===e)&&t>=64&&t<=95;if(!a&&!n)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,i=t>=64&&t<=95?1===r?di[e]:pi[e]:1===r?ci[e]:_i[e];var o=this.interpretPAC(i,t);return this.channels[r-1].setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.interpretPAC=function(e,t){var r=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},e.prototype.parseChars=function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19){var n=t;n=17===a?t+80:18===a?t+112:t+144,hi.log("INFO","Special char '"+si(n)+"' in channel "+r),i=[n]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var o=mi(i);hi.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},e.prototype.parseBackgroundAttributes=function(e,t){var r=void 0,i=void 0,a=void 0,n=void 0,o=(16===e||24===e)&&t>=32&&t<=47,s=(23===e||31===e)&&t>=45&&t<=47;return!(!o&&!s)&&(r={},16===e||24===e?(i=Math.floor((t-32)/2),r.background=fi[i],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),a=e<24?1:2,n=this.channels[a-1],n.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),wi=bi,Ci=function(){function e(t,r){Oe(this,e),this.timelineController=t,this.trackName=r,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}(),Ti=Ci,Ei=function(e,t,r){return e.substr(r||0,t.length)===t},Ii=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),a=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return Object(rt.a)(t)&&Object(rt.a)(r)&&Object(rt.a)(i)&&Object(rt.a)(a)?(t+=1e3*r,t+=6e4*i,t+=36e5*a):-1},Si=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},Ri=function(e,t,r){var i=e[t],a=e[i.prevCC];if(!a||!a.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;a&&a.new;)e.ccOffset+=i.start-a.start,i.new=!1,i=a,a=e[i.prevCC];e.presentationOffset=r},xi={parse:function(e,t,r,i,a,n){var o=/\r\n|\n\r|\n|\r/g,s=Object(yr.b)(new Uint8Array(e)).trim().replace(o,"\n").split("\n"),l="00:00.000",u=0,d=0,c=0,p=[],_=void 0,f=!0,h=new ni;h.oncue=function(e){var t=r[i],a=r.ccOffset;t&&t.new&&(void 0!==d?a=r.ccOffset=t.start:Ri(r,i,c)),c&&(a=c+r.ccOffset-r.presentationOffset),e.startTime+=a-d,e.endTime+=a-d,e.id=Si(e.startTime.toString())+Si(e.endTime.toString())+Si(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&p.push(e)},h.onparsingerror=function(e){_=e},h.onflush=function(){if(_&&n)return void n(_);a(p)},s.forEach(function(e){if(f){if(Ei(e,"X-TIMESTAMP-MAP=")){f=!1,e.substr(16).split(",").forEach(function(e){Ei(e,"LOCAL:")?l=e.substr(6):Ei(e,"MPEGTS:")&&(u=parseInt(e.substr(7)))});try{t=t<0?t+8589934592:t,u-=t,d=Ii(l)/1e3,c=u/9e4,-1===d&&(_=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){_=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(f=!1)}h.parse(e+"\n")}),h.flush()}},Li=xi,Di=function(e){function t(r){Ne(this,t);var i=Ue(this,e.call(this,r,it.a.MEDIA_ATTACHING,it.a.MEDIA_DETACHING,it.a.FRAG_PARSING_USERDATA,it.a.FRAG_DECRYPTED,it.a.MANIFEST_LOADING,it.a.MANIFEST_LOADED,it.a.FRAG_LOADED,it.a.LEVEL_SWITCHING,it.a.INIT_PTS_FOUND));if(i.hls=r,i.config=r.config,i.enabled=!0,i.Cues=r.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=void 0,i.cueRanges=[],i.captionsTracks={},i.captionsProperties={textTrack1:{label:i.config.captionsTextTrack1Label,languageCode:i.config.captionsTextTrack1LanguageCode},textTrack2:{label:i.config.captionsTextTrack2Label,languageCode:i.config.captionsTextTrack2LanguageCode}},i.config.enableCEA708Captions){var a=new Ti(i,"textTrack1"),n=new Ti(i,"textTrack2");i.cea608Parser=new wi(0,a,n)}return i}return Fe(t,e),t.prototype.addCues=function(e,t,r,i){for(var a=this.cueRanges,n=!1,o=a.length;o--;){var s=a[o],l=ze(s[0],s[1],t,r);if(l>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],r),n=!0,l/(r-t)>.5))return}n||a.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,i)},t.prototype.onInitPtsFound=function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var i=t.textTracks[r];if(i[e])return i}return null},t.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],r=t.label,i=t.languageCode,a=this.captionsTracks;if(!a[e]){var n=this.getExistingTrack(e);if(n)a[e]=n,te(a[e]),ee(a[e],this.media);else{var o=this.createTextTrack("captions",r,i);o&&(o[e]=!0,a[e]=o)}}},t.prototype.createTextTrack=function(e,t,r){var i=this.media;if(i)return i.addTextTrack(e,t,r)},t.prototype.destroy=function(){lt.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},t.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){te(e[t]),delete e[t]})},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},t.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)te(t[r])}},t.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,i){
var a=void 0;if(i<r.length){var n=r[i];Be(n,e)&&(a=n)}a||(a=t.createTextTrack("subtitles",e.name,e.lang)),e.default?a.mode=t.hls.subtitleDisplay?"showing":"hidden":a.mode="disabled",t.textTracks.push(a)})}},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(e){var t=e.frag,r=e.payload;if("main"===t.type){var i=t.sn;if(i!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=i}else if("subtitle"===t.type)if(r.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var n=t.decryptdata;null!=n&&null!=n.key&&"AES-128"===n.method||this._parseVTTs(t,r)}else this.hls.trigger(it.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype._parseVTTs=function(e,t){var r=this.vttCCs;r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var i=this.textTracks,a=this.hls;Li.parse(t,this.initPTS,r,e.cc,function(t){var r=i[e.trackId];if("disabled"===r.mode)return void a.trigger(it.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach(function(e){if(!r.cues.getCueById(e.id))try{r.addCue(e)}catch(i){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}}),a.trigger(it.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){at.b.log("Failed to parse VTT cue: "+t),a.trigger(it.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},t.prototype.onFragDecrypted=function(e){var t=e.payload,r=e.frag;if("subtitle"===r.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);this._parseVTTs(r,t)}},t.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}},t.prototype.extractCea608Data=function(e){for(var t=31&e[0],r=2,i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,l=[],u=0;u<t;u++)i=e[r++],a=127&e[r++],n=127&e[r++],o=0!=(4&i),s=3&i,0===a&&0===n||o&&0===s&&(l.push(a),l.push(n));return l},t}(lt),Mi=Di,Pi=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Oi=function(e){function t(r){Ge(this,t);var i=je(this,e.call(this,r,it.a.MEDIA_ATTACHED,it.a.MEDIA_DETACHING,it.a.MANIFEST_LOADING,it.a.MANIFEST_LOADED,it.a.SUBTITLE_TRACK_LOADED));return i.tracks=[],i.trackId=-1,i.media=null,i.subtitleDisplay=!0,i}return Ve(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=He(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},t.prototype.destroy=function(){lt.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(it.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var r=t.details;r&&!r.live||(at.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(it.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(at.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&this._stopTimer())},t.prototype.setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;if(!("number"!=typeof e||e<-1||e>=r.length)&&(this._stopTimer(),this.trackId=e,at.b.log("switching to subtitle track "+e),t.trigger(it.a.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e)){var i=r[e],a=i.details;a&&!a.live||(at.b.log("(re)loading playlist for subtitle track "+e),t.trigger(it.a.SUBTITLE_TRACK_LOADING,{url:i.url,id:e}))}},t.prototype._stopTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},t.prototype._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,i=this.trackId;if(t){var a=He(t.textTracks);if(-1===e)[].slice.call(a).forEach(function(e){e.mode="disabled"});else{var n=a[i];n&&(n.mode="disabled")}var o=a[e];o&&(o.mode=r?"showing":"hidden")}},Pi(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this.setSubtitleTrackInternal(e))}}]),t}(lt),Ni=Oi,Ui=r(8),Fi=window,Bi=Fi.performance,zi={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},Gi=function(e){function t(r){qe(this,t);var i=Ke(this,e.call(this,r,it.a.MEDIA_ATTACHED,it.a.ERROR,it.a.KEY_LOADED,it.a.FRAG_LOADED,it.a.SUBTITLE_TRACKS_UPDATED,it.a.SUBTITLE_TRACK_SWITCH,it.a.SUBTITLE_TRACK_LOADED,it.a.SUBTITLE_FRAG_PROCESSED));return i.config=r.config,i.vttFragSNsProcessed={},i.vttFragQueues=void 0,i.currentlyProcessing=null,i.state=zi.STOPPED,i.currentTrackId=-1,i.decrypter=new Ui.a(r.observer,r.config),i}return We(t,e),t.prototype.onHandlerDestroyed=function(){this.state=zi.STOPPED},t.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=e,this.hls.trigger(it.a.FRAG_LOADING,{frag:e}),this.state=zi.FRAG_LOADING}},t.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.state=zi.IDLE,this.nextFrag()},t.prototype.onMediaAttached=function(){this.state=zi.IDLE},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.doTick=function(){var e=this;switch(this.state){case zi.IDLE:var t=this.tracks,r=this.currentTrackId,i=this.vttFragSNsProcessed[r],a=this.vttFragQueues[r],n=this.currentlyProcessing?this.currentlyProcessing.sn:-1,o=function(e){return i.indexOf(e.sn)>-1},s=function(e){return a.some(function(t){return t.sn===e.sn})};if(!t)break;var l;if(r<t.length&&(l=t[r].details),void 0===l)break;l.fragments.forEach(function(t){o(t)||t.sn===n||s(t)||(t.encrypted?(at.b.log("Loading key for "+t.sn),e.state=zi.KEY_LOADING,e.hls.trigger(it.a.KEY_LOADING,{frag:t})):(t.trackId=r,a.push(t),e.nextFrag()))})}},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;at.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.tick()}},t.prototype.onSubtitleTrackLoaded=function(){this.tick()},t.prototype.onKeyLoaded=function(){this.state===zi.KEY_LOADING&&(this.state=zi.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,i=e.frag,a=this.hls;if(this.state===zi.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&null!=r&&null!=r.key&&"AES-128"===r.method){var n=void 0;try{n=Bi.now()}catch(e){n=Date.now()}this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,function(e){var t=void 0;try{t=Bi.now()}catch(e){t=Date.now()}a.trigger(it.a.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:n,tdecrypt:t}})})}},t}(or),ji=Gi,Vi=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Hi=window,qi=Hi.XMLHttpRequest,Ki={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},Wi=function(e,t,r){var i={videoCapabilities:[]};return t.forEach(function(e){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[i]},Yi=function(e,t,r){switch(e){case Ki.WIDEVINE:return Wi(0,r);default:throw Error("Unknown key-system: "+e)}},Zi=function(e){function t(r){Ye(this,t);var i=Ze(this,e.call(this,r,it.a.MEDIA_ATTACHED,it.a.MANIFEST_PARSED));return i._widevineLicenseUrl=r.config.widevineLicenseUrl,i._licenseXhrSetup=r.config.licenseXhrSetup,i._emeEnabled=r.config.emeEnabled,i._requestMediaKeySystemAccess=r.config.requestMediaKeySystemAccessFunc,i._mediaKeysList=[],i._media=null,i._hasSetMediaKeys=!1,i._isMediaEncrypted=!1,i._requestLicenseFailureCount=0,i}return Xe(t,e),t.prototype.getLicenseServerUrl=function(e){var t=void 0;switch(e){case Ki.WIDEVINE:t=this._widevineLicenseUrl;break;default:t=null}return t||(at.b.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(it.a.ERROR,{type:tt.b.KEY_SYSTEM_ERROR,details:tt.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,r){var i=this,a=Yi(e,0,r);if(!a)return void at.b.warn("Can not create config for key-system (maybe because platform is not supported):",e);at.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,a).then(function(t){i._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){at.b.error('Failed to obtain key-system "'+e+'" access:',t)})},t.prototype._onMediaKeySystemAccessObtained=function(e,t){var r=this;at.b.log('Access for key-system "'+e+'" obtained');var i={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(i),t.createMediaKeys().then(function(t){i.mediaKeys=t,at.b.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()}).catch(function(e){at.b.error("Failed to create media-keys:",e)})},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(e){var t=this;at.b.log("New key-system session "+e.sessionId),e.addEventListener("message",function(r){t._onKeySessionMessage(e,r.message)},!1)},t.prototype._onKeySessionMessage=function(e,t){at.b.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){at.b.log("Received license data, updating key-session"),e.update(t)})},t.prototype._onMediaEncrypted=function(e,t){at.b.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return at.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(it.a.ERROR,{type:tt.b.KEY_SYSTEM_ERROR,details:tt.a.KEY_SYSTEM_NO_KEYS,fatal:!0});at.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return at.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(it.a.ERROR,{type:tt.b.KEY_SYSTEM_ERROR,details:tt.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)return void at.b.warn("Key-Session already initialized but requested again");var r=t.mediaKeysSession;r||(at.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(it.a.ERROR,{type:tt.b.KEY_SYSTEM_ERROR,details:tt.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var i=this._mediaEncryptionInitDataType,a=this._mediaEncryptionInitData;at.b.log('Generating key-session request for "'+i+'" init data type'),t.mediaKeysSessionInitialized=!0,r.generateRequest(i,a).then(function(){at.b.debug("Key-session generation succeeded")}).catch(function(t){at.b.error("Error generating key-session request:",t),e.hls.trigger(it.a.ERROR,{type:tt.b.KEY_SYSTEM_ERROR,details:tt.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})},t.prototype._createLicenseXhr=function(e,t,r){var i=new qi,a=this._licenseXhrSetup;try{if(a)try{a(i,e)}catch(t){i.open("POST",e,!0),a(i,e)}i.readyState||i.open("POST",e,!0)}catch(e){return at.b.error("Error setting up key-system license XHR",e),void this.hls.trigger(it.a.ERROR,{type:tt.b.KEY_SYSTEM_ERROR,details:tt.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,e,t,r),i},t.prototype._onLicenseRequestReadyStageChange=function(e,t,r,i){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,at.b.log("License request succeeded"),i(e.response);else{if(at.b.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),++this._requestLicenseFailureCount<=3){var a=3-this._requestLicenseFailureCount+1;return at.b.warn("Retrying license request, "+a+" attempts left"),void this._requestLicense(r,i)}this.hls.trigger(it.a.ERROR,{type:tt.b.KEY_SYSTEM_ERROR,details:tt.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var r=void 0;return e.mediaKeySystemDomain===Ki.PLAYREADY?at.b.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===Ki.WIDEVINE?r=t:at.b.error("Unsupported key-system:",e.mediaKeySystemDomain),r},t.prototype._requestLicense=function(e,t){at.b.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return at.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(it.a.ERROR,{type:tt.b.KEY_SYSTEM_ERROR,details:tt.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});var i=this.getLicenseServerUrl(r.mediaKeySystemDomain),a=this._createLicenseXhr(i,e,t);at.b.log("Sending license request to URL: "+i),a.send(this._generateLicenseRequestChallenge(r,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),r=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(Ki.WIDEVINE,t,r)}},Vi(t,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),t}(lt),Xi=Zi,Qi=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}(),Ji={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:qr,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:xr,bufferController:Mr,capLevelController:Nr,fpsController:zr,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Qi};Ji.subtitleStreamController=ji,Ji.subtitleTrackController=Ni,Ji.timelineController=Mi,Ji.cueHandler=Je,Ji.enableCEA708Captions=!0,Ji.enableWebVTT=!0,Ji.captionsTextTrack1Label="English",Ji.captionsTextTrack1LanguageCode="en",Ji.captionsTextTrack2Label="Spanish",Ji.captionsTextTrack2LanguageCode="es",Ji.audioStreamController=ei,Ji.audioTrackController=Yr,Ji.emeController=Xi;var $i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();r(14);var ea=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qe(this,e);var i=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in i)a in r||(r[a]=i[a]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(at.a)(r.debug),this.config=r,this._autoLevelCapping=-1;var n=this.observer=new Yt.a;n.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.emit.apply(n,[e,e].concat(r))},n.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.removeListener.apply(n,[e].concat(r))},this.on=n.on.bind(n),this.off=n.off.bind(n),this.once=n.once.bind(n),this.trigger=n.trigger.bind(n);var o=this.abrController=new r.abrController(this),s=new r.bufferController(this),l=new r.capLevelController(this),u=new r.fpsController(this),d=new Ut(this),c=new Bt(this),p=new Gt(this),_=new kr(this),f=this.levelController=new vr(this),h=new Vt(this),m=this.streamController=new pr(this,h),g=[f,m],v=r.audioStreamController;v&&g.push(new v(this,h)),this.networkControllers=g;var y=[d,c,p,o,s,l,u,_,h];if(v=r.audioTrackController){var A=new v(this);this.audioTrackController=A,y.push(A)}if(v=r.subtitleTrackController){var k=new v(this);this.subtitleTrackController=k,y.push(k)}if(v=r.emeController){var b=new v(this);this.emeController=b,y.push(b)}[r.subtitleStreamController,r.timelineController].forEach(function(e){e&&y.push(new e(t))}),this.coreComponents=y}return e.isSupported=function(){return ne()},$i(e,null,[{key:"version",get:function(){return"0.11.0"}},{key:"Events",get:function(){return it.a}},{key:"ErrorTypes",get:function(){return tt.b}},{key:"ErrorDetails",get:function(){return tt.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Ji},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){at.b.log("destroy"),this.trigger(it.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){at.b.log("attachMedia"),this.media=e,this.trigger(it.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){at.b.log("detachMedia"),this.trigger(it.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=et.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),at.b.log("loadSource:"+e),this.url=e,this.trigger(it.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;at.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},e.prototype.stopLoad=function(){at.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},e.prototype.swapAudioCodec=function(){at.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){at.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},$i(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){at.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){at.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){at.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){at.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){at.b.log("set startLevel:"+e);var t=this;-1!==e&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){at.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this,t=e.levels,r=e.config.minAutoBitrate,i=t?t.length:0,a=0;a<i;a++){if((t[a].realBitrate?Math.max(t[a].realBitrate,t[a].bitrate):t[a].bitrate)>r)return a}return 0}},{key:"maxAutoLevel",get:function(){var e=this,t=e.levels,r=e.autoLevelCapping;return-1===r&&t&&t.length?t.length-1:r}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),e}();t.default=ea},function(e,t,r){function i(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw e};var i=t(t.s=ENTRY_MODULE);return i.default||i}function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function n(e){return!isNaN(1*e)}function o(e,t,i){var o={};o[i]=[];var s=t.toString(),l=s.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return o;for(var c,p=l[1],_=new RegExp("(\\\\n|\\W)"+a(p)+d,"g");c=_.exec(s);)"dll-reference"!==c[3]&&o[i].push(c[3]);for(_=new RegExp("\\("+a(p)+'\\("(dll-reference\\s('+u+'))"\\)\\)'+d,"g");c=_.exec(s);)e[c[2]]||(o[i].push(c[1]),e[c[2]]=r(c[1]).m),o[c[2]]=o[c[2]]||[],o[c[2]].push(c[4]);for(var f=Object.keys(o),h=0;h<f.length;h++)for(var m=0;m<o[f[h]].length;m++)n(o[f[h]][m])&&(o[f[h]][m]=1*o[f[h]][m]);return o}function s(e){return Object.keys(e).reduce(function(t,r){return t||e[r].length>0},!1)}function l(e,t){for(var r={main:[t]},i={main:[]},a={main:{}};s(r);)for(var n=Object.keys(r),l=0;l<n.length;l++){var u=n[l],d=r[u],c=d.pop();if(a[u]=a[u]||{},!a[u][c]&&e[u][c]){a[u][c]=!0,i[u]=i[u]||[],i[u].push(c);for(var p=o(e,e[u][c],u),_=Object.keys(p),f=0;f<_.length;f++)r[_[f]]=r[_[f]]||[],r[_[f]]=r[_[f]].concat(p[_[f]])}}return i}var u="[\\.|\\-|\\+|\\w|/|@]+",d="\\((/\\*.*?\\*/)?s?.*?("+u+").*?\\)";e.exports=function(e,t){t=t||{};var a={main:r.m},n=t.all?{main:Object.keys(a.main)}:l(a,e),o="";Object.keys(n).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;n[e][t];)t++;n[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+n[e].map(function(t){return JSON.stringify(t)+": "+a[e][t].toString()}).join(",")+"});\n"}),o=o+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+n.main.map(function(e){return JSON.stringify(e)+": "+a.main[e].toString()}).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(t.bare)return s;var u=window.URL||window.webkitURL||window.mozURL||window.msURL,d=u.createObjectURL(s),c=new window.Worker(d);return c.objectURL=d,c}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(10),a=r(1),n=r(0),o=r(7),s=r.n(o),l=function(e){var t=new s.a;t.trigger=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t.removeListener.apply(t,[e].concat(i))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",function(a){var o=a.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new i.a(t,o.typeSupported,s,o.vendor);try{Object(n.a)(!0===s.debug)}catch(e){}r("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(a.a.FRAG_DECRYPTED,r),t.on(a.a.FRAG_PARSING_INIT_SEGMENT,r),t.on(a.a.FRAG_PARSED,r),t.on(a.a.ERROR,r),t.on(a.a.FRAG_PARSING_METADATA,r),t.on(a.a.FRAG_PARSING_USERDATA,r),t.on(a.a.INIT_PTS_FOUND,r),t.on(a.a.FRAG_PARSING_DATA,function(t,r){var i=[],a={event:t,data:r};r.data1&&(a.data1=r.data1.buffer,i.push(r.data1.buffer),delete r.data1),r.data2&&(a.data2=r.data2.buffer,i.push(r.data2.buffer),delete r.data2),e.postMessage(a,i)})};t.default=l},function(e,t){String.prototype.endsWith||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}(),t={}.toString,r=function(e){if(null==this)throw TypeError();var r=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var i=r.length,a=String(e),n=a.length,o=i;if(arguments.length>1){var s=arguments[1];void 0!==s&&(o=s?Number(s):0)!=o&&(o=0)}var l=Math.min(Math.max(o,0),i),u=l-n;if(u<0)return!1;for(var d=-1;++d<n;)if(r.charCodeAt(u+d)!=a.charCodeAt(d))return!1;return!0};e?e(String.prototype,"endsWith",{value:r,configurable:!0,writable:!0}):String.prototype.endsWith=r}()}]).default})},{}],7:[function(e,t,r){"use strict";var i=Function.prototype.toString,a=/^\s*class\b/,n=function(e){try{var t=i.call(e);return a.test(t)}catch(e){return!1}},o=function(e){try{return!n(e)&&(i.call(e),!0)}catch(e){return!1}},s=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return o(e);if(n(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},{}],8:[function(e,t,r){function i(e){var t=a.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=i;var a=Object.prototype.toString},{}],9:[function(e,t,r){var i=e("trim"),a=e("for-each"),n=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return a(i(e).split("\n"),function(e){var r=e.indexOf(":"),a=i(e.slice(0,r)).toLowerCase(),o=i(e.slice(r+1));void 0===t[a]?t[a]=o:n(t[a])?t[a].push(o):t[a]=[t[a],o]}),t}},{"for-each":3,trim:10}],10:[function(e,t,r){function i(e){return e.replace(/^\s*|\s*$/g,"")}r=t.exports=i,r.left=function(e){return e.replace(/^\s*/,"")},r.right=function(e){return e.replace(/\s*$/,"")}},{}],11:[function(e,t,r){"use strict";function i(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function a(e,t,r){var i=e;return d(t)?(r=t,"string"==typeof e&&(i={uri:e})):i=p(t,{uri:e}),i.callback=r,i}function n(e,t,r){return t=a(e,t,r),o(t)}function o(e){function t(){4===d.readyState&&setTimeout(o,0)}function r(){var e=void 0;if(e=d.response?d.response:d.responseText||s(d),A)try{e=JSON.parse(e)}catch(e){}return e}function a(e){return clearTimeout(f),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,u(e,k)}function o(){if(!_){var t;clearTimeout(f),t=e.useXDR&&void 0===d.status?200:1223===d.status?204:d.status;var i=k,a=null;return 0!==t?(i={body:r(),statusCode:t,method:m,headers:{},url:h,rawRequest:d},d.getAllResponseHeaders&&(i.headers=c(d.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),u(a,i,i.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var l=!1,u=function(t,r,i){l||(l=!0,e.callback(t,r,i))},d=e.xhr||null;d||(d=e.cors||e.useXDR?new n.XDomainRequest:new n.XMLHttpRequest);var p,_,f,h=d.url=e.uri||e.url,m=d.method=e.method||"GET",g=e.body||e.data,v=d.headers=e.headers||{},y=!!e.sync,A=!1,k={body:void 0,headers:{},statusCode:0,method:m,url:h,rawRequest:d};if("json"in e&&!1!==e.json&&(A=!0,v.accept||v.Accept||(v.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),
g=JSON.stringify(!0===e.json?g:e.json))),d.onreadystatechange=t,d.onload=o,d.onerror=a,d.onprogress=function(){},d.onabort=function(){_=!0},d.ontimeout=a,d.open(m,h,!y,e.username,e.password),y||(d.withCredentials=!!e.withCredentials),!y&&e.timeout>0&&(f=setTimeout(function(){if(!_){_=!0,d.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",a(e)}},e.timeout)),d.setRequestHeader)for(p in v)v.hasOwnProperty(p)&&d.setRequestHeader(p,v[p]);else if(e.headers&&!i(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(d.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(d),d.send(g||null),d}function s(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}function l(){}var u=e("global/window"),d=e("is-function"),c=e("parse-headers"),p=e("xtend");t.exports=n,t.exports.default=n,n.XMLHttpRequest=u.XMLHttpRequest||l,n.XDomainRequest="withCredentials"in new n.XMLHttpRequest?n.XMLHttpRequest:u.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){n["delete"===e?"del":e]=function(t,r,i){return r=a(t,r,i),r.method=e.toUpperCase(),o(r)}})},{"global/window":5,"is-function":8,"parse-headers":9,xtend:12}],12:[function(e,t,r){function i(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)a.call(r,i)&&(e[i]=r[i])}return e}t.exports=i;var a=Object.prototype.hasOwnProperty},{}],13:[function(e,t,r){t.exports={"no-banner":"https://ads.adfox.ru/240813/getCode?p1=bthzx&p2=fgen&pfc=a&pfb=a&plp=a&pli=a&pop=a&puid1=&puid2=&puid3=&puid4=&puid5=&puid6=&puid7=&puid8=&puid9=&puid33",events:{preroll:"ezkt",midroll:"ezku",postroll:"ezkv",pausebanner:"fafl",pauseroll:"ezsb"},updated_events:{preroll:"p1=bvqup&p2=fkxq",postroll:"p1=bvquw&p2=fkxq",midroll:"p1=bwiys&p2=fkxq",pausebanner:"p1=bwqup&p2=folp",actionroll:"p1=bwixx&p2=fkxp"},server:"https://ads.adfox.ru/250985/getCode","prior-genres":[695,9567,4950,698,699,16288,697,8504,6467,5938,694,705],"movie-genres":{21136:"100174",6436:"100007",4952:"100005",4429:"100008",690:"100003",9564:"100021",9560:"100036",692:"100035",693:"100188",694:"100016",9572:"100192",9573:"100190",24331:"100012",695:"100013",9567:"100017",11635:"100173",4950:"100006",4948:"100018",680:"100131",697:"100010",676:"100030",718:"100011",698:"100022",699:"100024",16288:"100155",5932:"100023",701:"100149",4949:"100014",720:"100031",9568:"100014",721:"100026",702:"100004",4945:"100025",4947:"100034",5969:"100150",8504:"100192",7320:"100009",16289:"100149",12907:"100032",704:"100033",705:"100019",706:"100028",6467:"100177",5938:"100015",4944:"100018",674:"100004",708:"100029",5841:"100020"},"cartoon-genres":{21136:"100068",6436:"100157",692:"100094",694:"100078",9572:"100079",9573:"100080",24331:"100082",9567:"100081",4950:"100069",4948:"100082",697:"100071",676:"100090",718:"100072",699:"100086",16288:"100085",5932:"100085",701:"100085",720:"100091",9568:"100073",721:"100088",702:"100067",4945:"100087",4947:"100093",5969:"100171",8504:"100074",7320:"100070",12907:"100092",705:"100083",706:"100089",6467:"100176",5938:"100075",4944:"100082",674:"100151",5841:"100084"}}},{}],14:[function(e,t,r){t.exports={status:0,settings:{"adv-server":"recl.tvzavr.ru","adv-server-list":"recl.tvzavr.ru,recl2.tvzavr.ru","comprehensive-sitemap":"no","critical-errors":"","stat-partner-delay":"60","stat-progress-interval":"60","stat-server":"stat.tvzavr.ru","stat-server-list":"stat.tvzavr.ru,stat2.tvzavr.ru"}}},{}],15:[function(e,t,r){t.exports={sites:[{domain:"i54.iframe.tvzavr.ru",name:"http://14.ru"},{domain:"i60.iframe.tvzavr.ru",name:"http://154.ru"},{domain:"i42.iframe.tvzavr.ru",name:"http://178.ru"},{domain:"i57.iframe.tvzavr.ru",name:"http://35.ru"},{domain:"i53.iframe.tvzavr.ru",name:"http://43.ru"},{domain:"in8.iframe.tvzavr.ru",name:"http://48.ru"},{domain:"i44.iframe.tvzavr.ru",name:"http://51.ru"},{domain:"i62.iframe.tvzavr.ru",name:"http://53.ru"},{domain:"i16.iframe.tvzavr.ru",name:"http://56.ru"},{domain:"i64.iframe.tvzavr.ru",name:"http://60.ru"},{domain:"i21.iframe.tvzavr.ru",name:"http://62.ru"},{domain:"i61.iframe.tvzavr.ru",name:"http://68.ru"},{domain:"i48.iframe.tvzavr.ru",name:"http://70.ru"},{domain:"i45.iframe.tvzavr.ru",name:"http://71.ru"},{domain:"nw5.iframe.tvzavr.ru",name:"http://72.ru"},{domain:"i63.iframe.tvzavr.ru",name:"http://75.ru"},{domain:"i23.iframe.tvzavr.ru",name:"http://93.ru"},{domain:"cbn.iframe.tvzavr.ru",name:"http://cubannews.ru"},{domain:"i38.iframe.tvzavr.ru",name:"http://dom.29.ru"},{domain:"i35.iframe.tvzavr.ru",name:"http://dom.59.ru"},{domain:"i37.iframe.tvzavr.ru",name:"http://dom.63.ru"},{domain:"i49.iframe.tvzavr.ru",name:"http://ekat.ru"},{domain:"i52.iframe.tvzavr.ru",name:"http://irkutsk138.ru"},{domain:"nw4.iframe.tvzavr.ru",name:"http://izhevsk.ru"},{domain:"i50.iframe.tvzavr.ru",name:"http://kbs.ru"},{domain:"i65.iframe.tvzavr.ru",name:"http://mastercity.ru"},{domain:"i68.iframe.tvzavr.ru",name:"http://medialeaks.ru"},{domain:"i43.iframe.tvzavr.ru",name:"http://mgorsk.ru"},{domain:"i70.iframe.tvzavr.ru",name:"http://n1.ru"},{domain:"nas.iframe.tvzavr.ru",name:"http://nastroenie.ru"},{domain:"i18.iframe.tvzavr.ru",name:"http://NGS.ru"},{domain:"nw1.iframe.tvzavr.ru",name:"http://NGS.ru"},{domain:"i27.iframe.tvzavr.ru",name:"http://Ngs22.ru"},{domain:"i24.iframe.tvzavr.ru",name:"http://Ngs42.ru"},{domain:"i29.iframe.tvzavr.ru",name:"http://Ngs70.ru"},{domain:"i55.iframe.tvzavr.ru",name:"http://omsk1.ru"},{domain:"i33.iframe.tvzavr.ru",name:"http://penzapress.ru"},{domain:"i46.iframe.tvzavr.ru",name:"http://proizhevsk.ru"},{domain:"i59.iframe.tvzavr.ru",name:"http://sochi1.ru"},{domain:"i56.iframe.tvzavr.ru",name:"http:/116.ru"},{domain:"i51.iframe.tvzavr.ru",name:"http://tolyatty.ru"},{domain:"tvc.iframe.tvzavr.ru",name:"http://tvc.ru"},{domain:"n11.iframe.tvzavr.ru",name:"http://v1.ru"},{domain:"nw2.iframe.tvzavr.ru",name:"http://e1.ru"},{domain:"i47.iframe.tvzavr.ru",name:"http://89.ru"},{domain:"i41.iframe.tvzavr.ru",name:"http://86.ru"},{domain:"nw3.iframe.tvzavr.ru",name:"http://74.ru"},{domain:"nw8.iframe.tvzavr.ru",name:"http://63.ru"},{domain:"nw9.iframe.tvzavr.ru",name:"http://59.ru"},{domain:"n10.iframe.tvzavr.ru",name:"http://161.ru"},{domain:"161.iframe.tvzavr.ru",name:"http://161.ru"},{domain:"29r.iframe.tvzavr.ru",name:"http://29.ru"},{domain:"59r.iframe.tvzavr.ru",name:"http://59.ru"},{domain:"63r.iframe.tvzavr.ru",name:"http://63.ru"},{domain:"72r.iframe.tvzavr.ru",name:"http://72.ru"},{domain:"74r.iframe.tvzavr.ru",name:"http://74.ru"},{domain:"76r.iframe.tvzavr.ru",name:"http://76.ru"},{domain:"7da.iframe.tvzavr.ru",name:"http://7days.ru"},{domain:"adb.iframe.tvzavr.ru",name:"http://advmaker.net"},{domain:"add.iframe.tvzavr.ru",name:"http://bazr.ru"},{domain:"adk.iframe.tvzavr.ru",name:"http://advmaker.net"},{domain:"adr.iframe.tvzavr.ru",name:"http://advmaker.net"},{domain:"adu.iframe.tvzavr.ru",name:"http://advmaker_ukraine.net"},{domain:"afs.iframe.tvzavr.ru",name:"https://afisha.mail.ru"},{domain:"blk.iframe.tvzavr.ru",name:"http://bublik.tv"},{domain:"by.iframe.tvzavr.ru",name:"http://kino.tut.by"},{domain:"deti.tvzavr.ru",name:"http://deti.tvzavr.ru"},{domain:"dv1.iframe.tvzavr.ru",name:"http://bazr.ru"},{domain:"dv2.iframe.tvzavr.ru",name:"http://zugr.ru"},{domain:"dv3.iframe.tvzavr.ru",name:"http://ohoro.ru"},{domain:"dv4.iframe.tvzavr.ru",name:"http://azzy.ru"},{domain:"dv5.iframe.tvzavr.ru",name:"http://pazz.ru"},{domain:"e12.iframe.tvzavr.ru",name:"http://e1.ru"},{domain:"gnt.iframe.tvzavr.ru",name:"http://green-tea.tv"},{domain:"gt1.iframe.tvzavr.ru",name:"http://bestserial_ukraine.org"},{domain:"i10.iframe.tvzavr.ru",name:"http://maximonline.ru"},{domain:"i12.iframe.tvzavr.ru",name:"http://66.ru"},{domain:"i13.iframe.tvzavr.ru",name:"http://116.ru"},{domain:"i14.iframe.tvzavr.ru",name:"http://izhevsk.ru"},{domain:"i17.iframe.tvzavr.ru",name:"http://74.ru"},{domain:"ruk.iframe.tvzavr.ru",name:"http://ruskino.net"},{domain:"i20.iframe.tvzavr.ru",name:"http://164.ru"},{domain:"i22.iframe.tvzavr.ru",name:"http://psychologytoday.ru"},{domain:"i25.iframe.tvzavr.ru",name:"http://ngs55.ru"},{domain:"i26.iframe.tvzavr.ru",name:"http://ngs38.ru"},{domain:"i28.iframe.tvzavr.ru",name:"http://ngs24.ru"},{domain:"i32.iframe.tvzavr.ru",name:"http://domchel.ru"},{domain:"i36.iframe.tvzavr.ru",name:"http://72.ru"},{domain:"i39.iframe.tvzavr.ru",name:"http://afisha.ngs.ru"},{domain:"in1.iframe.tvzavr.ru",name:"http://kolmovo.ru"},{domain:"in2.iframe.tvzavr.ru",name:"http://pulsplus.ru"},{domain:"in3.iframe.tvzavr.ru",name:"http://sibnet.ru"},{domain:"in5.iframe.tvzavr.ru",name:"http://45.ru"},{domain:"in6.iframe.tvzavr.ru",name:"http://e1.ru"},{domain:"in9.iframe.tvzavr.ru",name:"http://nn.ru"},{domain:"kit.iframe.tvzavr.ru",name:"http://kino-teatr.ru"},{domain:"klm.iframe.tvzavr.ru",name:"http://kolmovo.ru"},{domain:"kpd.iframe.tvzavr.ru",name:"http://kinopod.ru"},{domain:"kps.iframe.tvzavr.ru",name:"http://kinopoisk.ru"},{domain:"mds.iframe.tvzavr.ru",name:"http://mediasok.org"},{domain:"mgm.iframe.tvzavr.ru",name:"http://test.com"},{domain:"mml.iframe.tvzavr.ru",name:"http://maximonline.ru"},{domain:"mo1.iframe.tvzavr.ru",name:"http://moevideo.net"},{domain:"mo2.iframe.tvzavr.ru",name:"http://moevideo.net"},{domain:"mo3.iframe.tvzavr.ru",name:"http://moevideo.net"},{domain:"msb.iframe.tvzavr.ru",name:"http://mersibo.ru"},{domain:"mu1.iframe.tvzavr.ru",name:"http://moevideo.ua"},{domain:"okno.ru",name:"http://okno.ru"},{domain:"plu.iframe.tvzavr.ru",name:"http://lenta365.ru"},{domain:"sbn.iframe.tvzavr.ru",name:"http://sibnet.ru"},{domain:"stt.iframe.tvzavr.ru",name:"http://starhit.ru"},{domain:"tvzavr.letai.ru",name:"http://tvzavr.letai.ru"},{domain:"ufa.iframe.tvzavr.ru",name:"http://ufa1.ru"},{domain:"v1r.iframe.tvzavr.ru",name:"http://v1.ru"},{domain:"vdn.iframe.tvzavr.ru",name:"http://okno.ru"},{domain:"vk",name:"http://vk.ru"},{domain:"vn2.iframe.tvzavr.ru",name:"http://zaycev.net"},{domain:"vn3.iframe.tvzavr.ru",name:"http:///myzuka.org"},{domain:"vn4.iframe.tvzavr.ru",name:"http://easymovies.ru"},{domain:"vn5.iframe.tvzavr.ru",name:"http://fishki.net"},{domain:"vu1.iframe.tvzavr.ru",name:"http://zaycev.ua"},{domain:"wdy.iframe.tvzavr.ru",name:"http://www.wday.ru"},{domain:"wld.iframe.tvzavr.ru",name:"wildred.tv"},{domain:"wmn.iframe.tvzavr.ru",name:"http://woman.ru"},{domain:"ydx.iframe.tvzavr.ru",name:"http://yandex.ru/video"},{domain:"zvr.iframe.tvzavr.ru",name:"http://zaycev.net"},{domain:"3cr.iframe.tvzavr.ru",name:"http://kino.tricolor.tv"},{domain:"ade.iframe.tvzavr.ru",name:"http://myvideohost.net"},{domain:"adf.iframe.tvzavr.ru",name:"http://myvideohost.net"},{domain:"anews.com",name:"http://anews.com"},{domain:"fo1.iframe.tvzavr.ru",name:"http://fotostrana.ru"},{domain:"go.mail.ru",name:"http://go.mail.ru"},{domain:"gt2.iframe.tvzavr.ru",name:"http://powercinema.net"},{domain:"gt4.iframe.tvzavr.ru",name:"http://redserial.net"},{domain:"i10.iframe.tvzavr.ru",name:"http://weforex.ru"},{domain:"i58.iframe.tvzavr.ru",name:"http://provoronezh.ru"},{domain:"imhn.iframe.tvzavr.ru",name:"http://imhonet.ru"},{domain:"leg.iframe.tvzavr.ru",name:"http://legalcinema.com"},{domain:"nw6.iframe.tvzavr.ru",name:"http://fnnew.ru"},{domain:"nw7.iframe.tvzavr.ru",name:"http://psychologies.ru"},{domain:"plk.iframe.tvzavr.ru",name:"http://lenta365.kz"},{domain:"plr.iframe.tvzavr.ru",name:"http://lenta365.ru"},{domain:"sp1.iframe.tvzavr.ru",name:"http://zaycev.net"},{domain:"spl.iframe.tvzavr.ru",name:"http://redserial.net"},{domain:"tv1.iframe.tvzavr.ru",name:"http://znimaltv.ru"},{domain:"tv2.iframe.tvzavr.ru",name:"http://znimaltv.ru"},{domain:"tv3.iframe.tvzavr.ru",name:"http://znimaltv.ru"},{domain:"un1.iframe.tvzavr.ru",name:"http://movience.com"},{domain:"un2.iframe.tvzavr.ru",name:"http://showlaxy.com"},{domain:"un3.iframe.tvzavr.ru",name:"http://kinodarom.com"},{domain:"unl.iframe.tvzavr.ru",name:"http://kinodarom.com"},{domain:"gt3.iframe.tvzavr.ru",name:"http://www.tvzavr.ru"},{domain:"pl1.iframe.tvzavr.ru",name:"http://www.tvzavr.ru"},{domain:"gn3.iframe.tvzavr.ru",name:"http://www.tvzavr.ru"},{domain:"un7.iframe.tvzavr.ru",name:"http://www.tvzavr.ru"},{domain:"fo1.iframe.tvzavr.ru",name:"http://fotostrana.ru"},{domain:"vks.iframe.tvzavr.ru",name:"http://www.vokrugsveta.ru"},{domain:"www.tvzavr.ru",name:"http://www.tvzavr.ru"},{domain:"zvb.iframe.tvzavr.ru",name:"http://v-fall.com"},{domain:"zvk.iframe.tvzavr.ru",name:"http://videout.ru"},{domain:"vn9.iframe.tvzavr.ru",name:"http://doramatv.ru"},{domain:"zvu.iframe.tvzavr.ru",name:"http://zaycev_ukraine.net"}]}},{}],16:[function(e,t,r){var i,a,n,o,s,l,u=function(e,t){function r(){this.constructor=e}for(var i in t)d.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},d={}.hasOwnProperty;e("../vendor/vast-client.js").client,l=e("../vendor/vast-client.js").tracker,a=e("events").EventEmitter,n=e("../shared/api.coffee"),s=e("../shared/utils.coffee"),o=e("../shared/debug.coffee"),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var r,i,a,d,c,p,_;return u(t,e),"adfox",c="//ads.adfox.ru/250985/getCode",r={},d=[],i={},a={},t.prototype.Tracker=l,t.prototype.items={preroll:[],midroll:[],postroll:[],pausebanner:[],pauseroll:[]},p=[],_=null,t.prototype.getSettings=function(){var e;if(n._getAdSettings(function(e){return function(e,t){if(t)return r=t.events,d=t["prior-genres"],i=t["movie-genres"],a=t["cartoon-genres"],c=t.server}}()),n.host_aliases(function(e){return function(e,t){if(t)return p=t}}()),e=(new Date).getDay(),!(_=s.restoreValue("weborama_dmp",null))||_.day!==e)return n.weborama_dmp(function(t){return function(t,r){return o.log("api.weborama_dmp answer"),o.log(t),o.log(r),t&&o.log("weborama_dmp load error: ",t),r?(_=r,_.day=e,o.log("weborama_dmp loaded: ",_),s.saveValue("weborama_dmp",_)):_=null}}())},t.prototype.getDl=function(e,t){return encodeURIComponent(s.urlHost2(this._hostChanger(window.location.href,e,t)))},t.prototype._makePuids=function(e,t,r,i,a,n,o,l,u,d,c,p,f){var h,m,g,v,y,A,k,b,w,C,T,E,I,S,R,x,L,D,M,P;for(y=this._formatGenres(t,r),w=y[2].split(":"),M="",b=0,C=w.length,g=encodeURIComponent("https://www.tvzavr.ru"),k=s.urlHost(window.location.href),L=encodeURIComponent(this._hostChanger(window.location.href,l,u)),h=window.location.ancestorOrigins,m=!!h&&(0!==h.length&&h[h.length-1]),D=m?encodeURIComponent(m):"";b<C;)A=w[b],M+="&puid"+(b+11)+"="+A,b++;switch(d<400&&(d=400),c<300&&(c=300),P="",_&&(P+="&puid33="+_.socio_demographics.gender,P+="&puid34="+_.socio_demographics.age,P+="&puid35="+_.socio_demographics.social_class,_.clusters&&(P+="&puid36="+_.clusters.toString().replace(/,/g,":")),_.audiences&&(P+="&puid37="+_.audiences.slice(0,10).toString().replace(/,/g,":"))),v=encodeURIComponent("puid3="+n+"&puid4="+y[3]+"&puid6="+k),s.getUrlValue("utm_source")){case"google":S="ga";break;case"yandex":S="yd"}switch(String(s.getUrlValue("direct"))){case"1":I=1;break;case"2":E=1}return R=p?1:0,T=s.getCookie("af_lpdid"),f||(x=1),"&puid1="+y[4]+"&puid2="+v+"&puid3="+n+"&puid4="+y[0]+"&puid5="+y[1]+"&puid6="+k+"&puid7="+o+"&puid9="+e+"&puid10="+y[2]+M+(E?"&puid14="+E:"")+(I?"&puid15="+I:"")+(S?"&puid47="+S:"")+"&puid24="+d+"&puid25="+c+P+"&puid48="+R+"&dl="+g+(x?"&puid60="+x:"")+(void 0!==T?"&puid61="+encodeURIComponent(T):"")+"&puid62="+L+"&puid63="+D},t.prototype._hostChanger=function(e,t,r){var i;return i=/tvzavr|ruskino/gi.test(window.location.href)?"https://www.tvzavr.ru":window.location.href.split("/")[0]+"//"+window.location.href.split("/")[2]+"/nopay",p.forEach(function(t){if(~e.indexOf(t.domain))return i=t.name}),i},t.prototype._formatGenres=function(e,t){var r,n,o,s,l,u,d,c,p,_,f,h;for(c=this._sortGenres(e),d=encodeURIComponent(c.join(":")),n=c.join(":"),f=[],_=void 0,l=void 0,s=0,u=c.length;s<u;)o=c[s],p=(678===t?a[o]:i[o])||""||null,p&&f.push(p),s++;return _=encodeURIComponent(f.join(",")),f.length>5&&(f.length=5),l=encodeURIComponent(f.join(":")),r=[],c.forEach(function(t){return e.forEach(function(e){if(e.mark__id===t)return r.push(e.mark__seo_alias)})}),r.length>5&&(r.length=5),h=encodeURIComponent(r.join(":")),[d,_,l,n,h]},t.prototype._sortGenres=function(e){var t,r,i,a,n,o,s,l;for(l=[],a=0,n=e.length;a<n;a++)t=e[a],l.push(t.mark__id);for(s=[],r=0;r<d.length;)o=d[r],i=l.indexOf(o),i>-1&&(s.push(o),l.splice(i,1)),r++;return s.concat(l)},t}(a),t.exports=new i},{"../shared/api.coffee":33,"../shared/debug.coffee":34,"../shared/utils.coffee":36,"../vendor/vast-client.js":38,events:2}],17:[function(e,t,r){function i(){function e(e){debug.log("ads.onAdsManagerLoaded");var i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.useStyledNonLinearAds=!0,window.ads=a=e.getAdsManager(d,i),a.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,r),a.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,t),a.addEventListener(google.ima.AdEvent.Type.CLICK,t),a.addEventListener(google.ima.AdEvent.Type.COMPLETE,t),a.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,A),a.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,k),a.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,t),a.addEventListener(google.ima.AdEvent.Type.LOADED,t),a.addEventListener(google.ima.AdEvent.Type.LOG,t),a.addEventListener(google.ima.AdEvent.Type.MIDPOINT,t),a.addEventListener(google.ima.AdEvent.Type.PAUSED,t),a.addEventListener(google.ima.AdEvent.Type.RESUMED,t),a.addEventListener(google.ima.AdEvent.Type.SKIPPED,t),a.addEventListener(google.ima.AdEvent.Type.STARTED,t),a.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,t),a.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,t),a.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,t),a.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,t),b.startAds()}function t(e){var t=e.getAd();this.lastAd=t,debug.log("ads.adEvent, section: "+g,"queue: "+(f+1)+"_"+(adSectionElementQueue+1),"event: "+e.type,"mediaurl: "+t.getMediaUrl());var r=document.getElementById("logarea");if(r){var n=e.type;"allAdsCompleted"===e.type&&(n=""),"loaded"===n&&(r.value+=g+" "+(f+1)+" loaded, "+t.getMediaUrl().split("?")[0]+"\r\n",n=""),n&&(r.value+=g+" "+(f+1)+" "+n+"\r\n")}switch(e.type){case google.ima.AdEvent.Type.AD_METADATA:break;case google.ima.AdEvent.Type.LOG:var o=e.getAdData();o.adError&&(debug.log("ads.onAdEvent, non-fatal error occurred: "+o.adError.getMessage()),i(o.adError.getErrorCode(),t));break;case google.ima.AdEvent.Type.LOADED:a.setVolume(_),c._sendAdStats(g,h,"loaded",t.getMediaUrl()),t.isLinear()||c.resumeAfterAd(g,v),!t.isLinear()||"preroll_overlay"!==g&&"overlay"!==g||(c.resumeAfterAd(g,v),this.destroy());break;case google.ima.AdEvent.Type.STARTED:t.getDescription().search("last=1")>=0&&c.sectionLastSet(1),v++,key=Object.keys(t)[0]||null,c._sendAdStats(g,h,"start",t.getMediaUrl(),t[key].clickThroughUrl),b.checkEventForOverlayStart(t,"start"),b.resize(),t.isLinear()&&(y?c._ui.adTitle.hide():l=setInterval(function(){c.currentAdRemainingTime(a.getRemainingTime())},100));break;case google.ima.AdEvent.Type.FIRST_QUARTILE:c._sendAdStats(g,h,"firstquartile",t.getMediaUrl()),b.checkEventForOverlayStart(t,"firstquartile");break;case google.ima.AdEvent.Type.MIDPOINT:c._sendAdStats(g,h,"midpoint",t.getMediaUrl()),b.checkEventForOverlayStart(t,"midpoint");break;case google.ima.AdEvent.Type.THIRD_QUARTILE:c._sendAdStats(g,h,"thirdquartile",t.getMediaUrl()),b.checkEventForOverlayStart(t,"thirdquartile");break;case google.ima.AdEvent.Type.CLICK:c._sendAdStats(g,h,"click",t.getMediaUrl()),a.pause();break;case google.ima.AdEvent.Type.COMPLETE:c._sendAdStats(g,h,"complete",t.getMediaUrl()),b.checkEventForOverlayStart(t,"complete"),h++,t.isLinear()&&clearInterval(l);break;case google.ima.AdEvent.Type.VOLUME_CHANGED:break;case google.ima.AdEvent.Type.PAUSED:c.adPause("paused"),c._sendAdStats(g,h,"pause",t.getMediaUrl());break;case google.ima.AdEvent.Type.RESUMED:c.adResume("resumed"),c._sendAdStats(g,h,"resume",t.getMediaUrl());break;case google.ima.AdEvent.Type.SKIPPED:debug.log("user skipped"),h++,t.isLinear()&&clearInterval(l);break;case google.ima.AdEvent.Type.USER_CLOSE:debug.log("user close"),this.destroy();break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:}}function r(e){try{var t=e.getError(),r=e.getError().getErrorCode()}catch(e){var t="adblock",r="adblock"}var n=document.getElementById("logarea");if(n){var o=t;o&&(n.value+=g+" "+(f+1)+" "+o+"\r\n")}i(r,this.lastAd),this.lastAd=null,a&&a.destroy(),c.resumeAfterAd(g,v)}function i(e,t){action="error_"+e;try{switch(e){case google.ima.AdError.ErrorCode.VAST_LOAD_TIMEOUT:case google.ima.AdError.ErrorCode.VAST_MEDIA_LOAD_TIMEOUT:action="timeout";break;case google.ima.AdError.ErrorCode.VAST_LINEAR_ASSET_MISMATCH:action="empty";break;case google.ima.AdError.ErrorCode.UNKNOWN_AD_RESPONSE:action="no_banner";break;case google.ima.AdError.ErrorCode.VAST_ASSET_NOT_FOUND:case google.ima.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:action="not_found";break;case google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE:case google.ima.AdError.ErrorCode.VAST_NO_ADS_AFTER_WRAPPER:action="empty"}}catch(e){}var r="";try{r=t.getMediaUrl()}catch(e){r=""}debug.log("ads.adError, section: "+g,"queue: "+(f+1)+"_"+(adSectionElementQueue+1),"error: "+action,"mediaurl: "+r),c._sendAdStats(g,h,action,r),h++}function A(e){c.pauseForAd(e.getAd().getDuration(),y)}function k(){c.resumeAfterAd(g,v)}var b=this;this.init=function(e,t,r,i,a,n){var o=document.createElement("script"),s=document.createElement("script");s.src="//yastatic.net/pcode/adfox/adfox-cookie-matching.js?owner_id=226279",document.getElementsByTagName("head")[0].appendChild(s),m=r,o.onload=function(){b.onLoaded(n)},o.onerror=function(){"function"==typeof n&&n(!0)},o.src=a?"//imasdk.googleapis.com/js/sdkloader/ima3.js":"//tools.tvzavr.ru/js/sdkloader/ima3.js?dname="+i,document.getElementsByTagName("head")[0].appendChild(o),d=e,c=t,u=document.getElementById("playButton"),p="normalScreen"},this.onLoaded=function(t){debug.log("ads.onLoaded");try{google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableFlashAds(!0),google.ima.settings.setLocale("ru"),s=new google.ima.AdDisplayContainer(document.getElementById("aContainer"),d._source),n=new google.ima.AdsLoader(s),n.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e,!1),n.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,r,!1)}catch(e){}"function"==typeof t&&t()},this.initialUserAction=function(){s&&s.initialize()},this.requestAds=function(e){o=new google.ima.AdsRequest,o.adTagUrl=e,o.nonLinearAdSlotWidth=c.getAdWidth(),o.nonLinearAdSlotHeight=c.getAdHeight(),o.linearAdSlotWidth=c.getAdWidth(),o.linearAdSlotHeight=c.getAdHeight(!0),o.setAdWillAutoPlay(!0),o.setAdWillPlayMuted(!0),n.requestAds(o)},this.playAds=function(e,t,i,a,n){return g=e,f=t,adSectionElementQueue=i,y=n,debug.log("ads.playAds, section: "+e,"queue: "+(f+1)+"_"+(adSectionElementQueue+1)),s?(v=0,h=1,this.requestAds(a),!0):(r(new Event("adblock")),!1)},this.startAds=function(){debug.log("ads.startAds"+g),debug.log("ads.startAds volume"+_);try{"normalScreen"==p?a.init(c.getAdWidth(),c.getAdHeight(!0),google.ima.ViewMode.NORMAL):a.init(c.getAdWidth(),c.getAdHeight(!0),google.ima.ViewMode.FULLSCREEN),this.start()}catch(e){c.resumeAfterAd(g,v)}},this.checkEventForOverlayStart=function(e,t){var r="&"+e.getDescription(),i=utils.getUrlValue("event",r),a=utils.getUrlValue("timeout",r),n=utils.getUrlValue("url",r);null!==i&&null!==a&&null!==n&&i.toLowerCase()==t.toLowerCase()&&c.setDelayedOverlay(a,n)},this.adResume=function(){a&&a.resume()},this.setVolume=function(e){debug.log("ads.setVolume"+e),_=e,a&&a.setVolume(e)},this.pause=function(){a&&a.pause()},this.resume=function(){a&&a.resume()},this.start=function(){if(a){try{a.start()}catch(e){}a.setVolume(_)}},this.destroy=function(){a&&a.destroy(),n&&n.destroy(),this.onLoaded()},this.fullScreen=function(e,t){debug.log("ads.fullScreen",a,c.getAdWidth(),c.getAdHeight()),p="fullScreen",a&&a.resize(c.getAdWidth(),c.getAdHeight(),google.ima.ViewMode.FULLSCREEN)},this.resize=function(){a&&("fullScreen"===p?a.resize(c.getAdWidth(),c.getAdHeight(),google.ima.ViewMode.FULLSCREEN):a.resize(c.getAdWidth(),c.getAdHeight(),google.ima.ViewMode.NORMAL))},this.normalScreen=function(){debug.log("ads.normalScreen",a,c.getAdWidth(),c.getAdHeight()),p="normalScreen",a&&a.resize(c.getAdWidth(),c.getAdHeight(),google.ima.ViewMode.NORMAL)}}debug=e("../shared/debug.coffee"),utils=e("../shared/utils.coffee");var a,n,o,s,l,u,d,c,p,_,f,h,m,g="",v=0,y=!1;t.exports=new i},{"../shared/debug.coffee":34,"../shared/utils.coffee":36}],18:[function(e,t,r){function i(t){"use strict";function r(e){for(var t=function(e){return e.forEach(function(t,r){-1===t.indexOf("=")&&(e[r-1]+=","+t)&&e.splice(r,1)}),e.reduce(function(e,t){var r=t.split("=");return r.length>2&&(r[1]+="="+r.splice(2,1)),e[r[0]]=~r[1].indexOf('"')?r[1].slice(1,-1):r[1],e},{})},r=function(e,t,r,a){if(!r||!i.m3u8Manifest.langs.hasOwnProperty(a))return!0;i.m3u8Manifest.langs[a][e]||(i.m3u8Manifest.langs[a][e]={},Object.defineProperties(i.m3u8Manifest.langs[a][e],{high:{enumerable:!1,get:function(){return this[window.Math.max.apply(null,Object.keys(this))]}},low:{enumerable:!1,get:function(){return this[window.Math.min.apply(null,Object.keys(this))]}}})),i.m3u8Manifest.langs[a][e][t]=r},a={},o=0;o<e.length;o++){var s,l=e[o].split(":");switch(l[0]){case"#EXT-X-MEDIA":var u=t(l[1].split(",")),d=u.URI&&u.URI.slice(u.URI.indexOf("%3D"),u.URI.indexOf(".m3u8")),c=u["GROUP-ID"].slice(6);a[c]||(a[c]=[]),a[c].push({name:u.NAME,uri:d});break;case"#EXT-X-STREAM-INF":if(u=t(l[1].split(",")),!(s=u.RESOLUTION&&u.RESOLUTION.match(/\d+/g)))continue;s=n.get(s[0],s[1]);var p=e[o+1].slice(e[o+1].indexOf("-video"));i.m3u8Manifest.streams.hasOwnProperty(s)&&i.m3u8Manifest.streams[s]!==p&&(s=n.names[Object.keys(i.m3u8Manifest.streams).length]),i.m3u8Manifest.streams[s]=e[o+1].slice(e[o+1].indexOf("-video")),d=e[o+1].slice(e[o+1].indexOf("%3D"),e[o+1].indexOf("-video")),c=u.AUDIO.slice(6),a[c].forEach(function(e){r(s,c,e.uri||d,e.name)}),o++}}Object.keys(i.m3u8Manifest.langs).forEach(function(e){var t=i.m3u8Manifest.langs[e],r=t.locale;r!==e&&(i.m3u8Manifest.langs[r]=t)&&delete i.m3u8Manifest.langs[e],i.m3u8Manifest.langs[r].def&&i.setAudioTrack(r,!0)})}var i=this,a=e("../security/token.coffee"),n={width:[480,640,854,672,1280,1920,2560,3840],height:[240,360,480,480,720,1080,1440,2160],names:["240","360","SD 480","SD 480","HD 720","FullHD 1080","2K 1440","UltraHD 4K"],get:function(e,t){var r=this.width.indexOf(+e),i=this.height.indexOf(+t);return-1===r&&-1===i?(r=this.width.reduce(function(t,r){return window.Math.abs(t-e)>window.Math.abs(r-e)?r:t}),i=this.height.reduce(function(e,r){return window.Math.abs(e-t)>window.Math.abs(r-t)?r:e}),this.names[Math.floor(e/t)>0?this.width.indexOf(r):this.height.indexOf(i)]):this.names[-1!==r?r:i]}};i.changeTypeInterval=null,i.disableInterval=!1,i.m3u8Manifest={langs:{},streams:{},subtitles:{langs:[]}},Object.defineProperties(i.m3u8Manifest.streams,{ABTO:{enumerable:!1,get:function(){var e=Object.keys(this),t=this["FullHD 1080"]||this[e[e.length-1]],r=t.match(/video.*\%3D(\d+)\./);t=window.Math.ceil((r&&+r[1])/1e3);var i=this[e[0]],a=i.match(/video.*\%3D(\d+)\./);return i=(a&&+a[1])/1e3>>0,"-tr"+this[e[0]].slice(1,this[e[0]].indexOf("%3D"))+"-lb"+i+"-hb"+t+"-mnf.m3u8"}},active:{enumerable:!1,value:function(e,t){return(t?"":e[this.audioBit])+this[i.selectedQuality]}},audioBit:{enumerable:!1,configurable:!0,writable:!0,value:"high"}}),Object.defineProperties(i.m3u8Manifest.langs,{active:{enumerable:!1,configurable:!0,writable:!0,value:{}}}),Object.defineProperties(i.m3u8Manifest.subtitles,{isExist:{get:function(){return!!this.langs.length}}}),i.selectedQuality="",i.selectedTrack="",i.selectedSubtitles="",i.reset=function(){i.selectedQuality="",i.selectedTrack="",i.selectedSubtitles="",delete i.qualityNames,delete i.audioTracks,i.m3u8Manifest.subtitles.langs=[],Object.keys(i.m3u8Manifest.streams).forEach(function(e){delete i.m3u8Manifest.streams[e]}),Object.keys(i.m3u8Manifest.langs).forEach(function(e){delete i.m3u8Manifest.langs[e]}),i.m3u8Manifest.streams.audioBit="high",delete i.thumbnails,clearTimeout(i.changeTypeInterval)},i.makeUrl=function(e,r,i){return e+"?usessionid="+encodeURIComponent(r)+"&pageurl=null&token="+encodeURIComponent(a.get(e,r,t._platform))+(i?"&autoqty=true":"")+"&platform="+t._platform},i.parseM3U8=function(e){r(e.split("\n"));var t=["ABTO"];[].push.apply(t,Object.keys(i.m3u8Manifest.streams)),i.qualityNames=t,i.audioTracks=Object.keys(i.m3u8Manifest.langs).sort()},i.setQuality=function(e,r){r&&i.setAudioTrack(r);var a="ABTO"===e;i.selectedQuality=e;var n=i.m3u8Manifest.langs.active,o=(a?"av-tr":"")+n.name,s=t.nowPlaying.clearUrl+o+i.m3u8Manifest.streams.active(n[e],a);return i.makeUrl(s,t.nowPlaying.usessionid,a)},i.setAudioTrack=function(e,t){i.m3u8Manifest.langs.active=i.m3u8Manifest.langs[e],i.selectedTrack=e},i.parseInfoXML=function(e){if(e){var r=(e.querySelector("content").getAttribute("duration"),(e.getElementsByTagName("subtitles")||[{}])[0].children);r&&r.length&&(i.m3u8Manifest.subtitles.langs=[].map.call(r,function(e,t){var r=e.getAttribute("locale");return!t&&(i.selectedSubtitles=r),r}),t.subtitles.isActive=!0);var a=e.getElementsByTagName("preview");if(a&&a[0]&&(a=a[0].firstElementChild)){a.getAttribute("h_size"),a.getAttribute("v_size"),a.getAttribute("interval"),a.getAttribute("first")}for(var n=e.querySelectorAll("[type='audio']"),o=0;o<n.length;o++){var s=n[o].getAttribute("language");i.m3u8Manifest.langs[s]={name:n[o].getAttribute("name"),locale:n[o].getAttribute("locale"),def:1===n.length||!!n[o].getAttribute("default")}}Object.keys(i.m3u8Manifest.langs).length||(i.m3u8Manifest.langs.Russian={name:"audio_rus",locale:"Русский"})}}}t.exports=i},{"../security/token.coffee":32}],19:[function(e,t,r){!function(e,t){"use strict";function r(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||d(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,r=t.width*t.height,i=this.intersectionRect,a=i.width*i.height;this.intersectionRatio=r?a/r:this.isIntersecting?1:0}function i(e,t){var r=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=n(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function a(){return e.performance&&performance.now&&performance.now()}function n(e,t){var r=null;return function(){r||(r=setTimeout(function(){e(),r=null},t))}}function o(e,t,r,i){"function"==typeof e.addEventListener?e.addEventListener(t,r,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,r)}function s(e,t,r,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,r,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,r)}function l(e,t){var r=Math.max(e.top,t.top),i=Math.min(e.bottom,t.bottom),a=Math.max(e.left,t.left),n=Math.min(e.right,t.right),o=n-a,s=i-r;return o>=0&&s>=0&&{top:r,bottom:i,left:a,right:n,width:o,height:s}}function u(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):d()}function d(){
return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(e,t){for(var r=t;r;){if(r==e)return!0;r=p(r)}return!1}function p(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)return void("isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var _=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,r){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==r[t-1]})},i.prototype._parseRootMargin=function(e){var t=e||"0px",r=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return r[1]=r[1]||r[0],r[2]=r[2]||r[0],r[3]=r[3]||r[1],r},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(o(e,"resize",this._checkForIntersections,!0),o(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():d();this._observationTargets.forEach(function(i){var n=i.element,o=u(n),s=this._rootContainsTarget(n),l=i.entry,d=e&&s&&this._computeTargetAndRootIntersection(n,t),c=i.entry=new r({time:a(),target:n,boundingClientRect:o,rootBounds:t,intersectionRect:d});l?e&&s?this._hasCrossedThreshold(l,c)&&this._queuedEntries.push(c):l&&l.isIntersecting&&this._queuedEntries.push(c):this._queuedEntries.push(c)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(r,i){if("none"!=e.getComputedStyle(r).display){for(var a=u(r),n=a,o=p(r),s=!1;!s;){var d=null,c=1==o.nodeType?e.getComputedStyle(o):{};if("none"==c.display)return;if(o==this.root||o==t?(s=!0,d=i):o!=t.body&&o!=t.documentElement&&"visible"!=c.overflow&&(d=u(o)),d&&!(n=l(d,n)))break;o=p(o)}return n}},i.prototype._getRootRect=function(){var e;if(this.root)e=u(this.root);else{var r=t.documentElement,i=t.body;e={top:0,left:0,right:r.clientWidth||i.clientWidth,width:r.clientWidth||i.clientWidth,bottom:r.clientHeight||i.clientHeight,height:r.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,r){return"px"==t.unit?t.value:t.value*(r%2?e.width:e.height)/100}),r={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return r.width=r.right-r.left,r.height=r.bottom-r.top,r},i.prototype._hasCrossedThreshold=function(e,t){var r=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(r!==i)for(var a=0;a<this.thresholds.length;a++){var n=this.thresholds[a];if(n==r||n==i||n<r!=n<i)return!0}},i.prototype._rootIsInDom=function(){return!this.root||c(t,this.root)},i.prototype._rootContainsTarget=function(e){return c(this.root||t,e)},i.prototype._registerInstance=function(){_.indexOf(this)<0&&_.push(this)},i.prototype._unregisterInstance=function(){var e=_.indexOf(this);-1!=e&&_.splice(e,1)},e.IntersectionObserver=i,e.IntersectionObserverEntry=r}(window,document)},{}],20:[function(e,t,r){var i;i=function(){function e(){this._handlers={},this._targetOrigin="*",this._isFrame=window===top,this._playbackStatesMap={initialized:"initialized",ready:"ready",playing:"videoPlaying",paused:"videoPaused",idle:"end"},this._init()}return e.prototype.postMessage=function(e,t){return window.parent.postMessage({type:e,params:t},this._targetOrigin)},e.prototype._init=function(){return window.addEventListener("message",function(e){return function(t){var r;"init"===t.data.type&&(r=t.origin||t.originalEvent.origin)&&(e._targetOrigin=r),e._handlers[t.data.type]&&e._handlers[t.data.type].apply(null,t.data.params)}}(this))},e.prototype.setPlayerHandlers=function(e){if(!e)throw new Error("Handlers must be set!");return this._handlers.init=e.init,this._handlers.load=e.load,this._handlers.setAgeConfirmed=e.setAgeConfirmed,this._handlers.play=e.play,this._handlers.pause=e.pause,this._handlers.stop=e.stop,this._handlers.setBeginSeek=e.setBeginSeek,this._handlers.setSeek=e.setSeek,this._handlers.setEndSeek=e.setEndSeek,this._handlers.setSize=e.setSize,this._handlers.getQuality=e.getQuality,this._handlers.getAvailableQualities=e.getAvailableQualities,this._handlers.setQuality=e.setQuality,this._handlers.getAudioTrack=e.getAudioTrack,this._handlers.getAvailableAudioTracks=e.getAvailableAudioTracks,this._handlers.setAudioTrack=e.setAudioTrack,this._handlers.getSubtitleTrack=e.getSubtitleTrack,this._handlers.getAvailableSubtitleTracks=e.getAvailableSubtitleTracks,this._handlers.setSubtitleTrack=e.setSubtitleTrack,this._handlers.getState=e.getState,this._handlers.getDuration=e.getDuration,this._handlers.getTime=e.getTime,this._handlers.getSeekAllowed=e.getSeekAllowed,this._handlers.getVolume=e.getVolume,this._handlers.setVolume=e.setVolume,this._handlers.getProgress=e.getProgress},e.prototype.sendState=function(e){return this.postMessage("state",{state:e})},e.prototype.onStateChange=function(e){if(this._playbackStatesMap[e])return e=this._playbackStatesMap[e],null!=window.playerEvent&&window.playerEvent(e),this.postMessage("onStateChange",{state:e})},e.prototype.sendTime=function(e){return this.postMessage("time",{time:e})},e.prototype.onTimeChange=function(e){return this.postMessage("onTimeChange",{time:e})},e.prototype.sendDuration=function(e){return this.postMessage("duration",{duration:e})},e.prototype.onDurationChange=function(e){return this.postMessage("onDurationChange",{duration:e})},e.prototype.sendVolume=function(e){return this.postMessage("volume",{volume:e})},e.prototype.onVolumeChange=function(e){return this.postMessage("onVolumeChange",{volume:e})},e.prototype.onBuffering=function(){return this.postMessage("onBuffering")},e.prototype.onBuffered=function(){return this.postMessage("onBuffered")},e.prototype.onAdStart=function(e,t){return this.postMessage("onAdStart",{adType:e,adInfo:t})},e.prototype.onAdEnd=function(){return this.postMessage("onAdEnd")},e.prototype.sendProgress=function(e){return this.postMessage("progress",{buffering:e})},e.prototype.onProgressChange=function(e){return this.postMessage("onProgressChange",{buffering:e})},e.prototype.onAgeConfirmationRequired=function(){return this.postMessage("onAgeConfirmationRequired")},e.prototype.sendQuality=function(e){return this.postMessage("quality",{frameHeight:e})},e.prototype.sendAvailableQualities=function(e){return postMessage("availableQualities",{qualities:e})},e.prototype.onQualityChange=function(e){return this.postMessage("onQualityChange",{frameHeight:e})},e.prototype.sendAudioTrack=function(e){return this.postMessage("audioTrack",{audioTrack:e})},e.prototype.sendAvailableAudioTracks=function(e){return postMessage("availableAudioTracks",{audioTracks:e})},e.prototype.onAudioTrackChange=function(e){return postMessage("onAudioTrackChange",{audioTrack:e})},e.prototype.sendSubtitleTrack=function(e){return postMessage("subtitleTrack",{subtitleTrack:e})},e.prototype.sendAvailableSubtitleTracks=function(e){return this.postMessage("availableSubtitleTracks",{subtitleTracks:e})},e.prototype.onSubtitleTrackChange=function(e){return this.postMessage("onSubtitleTrackChange",{subtitleTrack:e})},e.prototype.sendSeekAllowed=function(e){return postMessage("seekAllowed",{isSeekAllowed:e})},e.prototype.onError=function(e,t){return this.postMessage("onError",{errorMessage:e,errorCode:t})},e}(),t.exports=i},{}],21:[function(e,t,r){var i,a,n,o,s,l,u,d=function(e,t){function r(){this.constructor=e}for(var i in t)c.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c={}.hasOwnProperty;s=e("../shared/api.coffee"),u=e("../shared/utils.coffee"),a=e("events").EventEmitter,e("../player.coffee"),o=e("./subtitles.coffee"),i=e("./content-manager.js"),l=e("../shared/debug.coffee"),n=function(e){function t(e,t,r,a,n){this._platform=null!=t?t:"htm",this._user=r,this.isTrailer=a,this.player=n,this.contMngr=new i(this),this.load(e)}return d(t,e),t.prototype.subtitles=new o,t.prototype.load=function(e){return null!=e&&(this.clear(),this._setMovieInfo(e)),this},t.prototype.clear=function(){return this.contMngr.reset(),this.nowPlaying={},this},t.prototype._reloadSubtitles=function(e){return s.reloadSubtitles(this.nowPlaying,e,this.contMngr,function(e){return function(t,r){var i;return t?(l.log("err9: "+t),_emitError(t)):(i=r)?(e.subtitles.parse(i.body),e.subtitles.isActive=!0):void 0}}(this))},t.prototype._setMovieInfo=function(e,t){var r,i,a,n,o;if(null==t&&(t=null),l.log("playlist._setMovieInfo"),o=this._platform,i=function(e){return function(t,r){return null==r&&(r="null"),l.log("playlist._setMovieInfo._emitError",t,r),e.emit("loadingerror",{target:e,error:t,value:r})}}(this),r=function(e){return function(){return e.emit("loadingdone",{target:e,nowPlaying:e.nowPlaying})}}(this),n=function(e){return function(e,t){if(window.playerEvent)return window.playerEvent({event:e,data:t})}}(),a=function(t){return function(){return s.url(e,o,t.isTrailer,t.player,t.nowPlaying,function(d,c){return d?(12===d&&n("paid_movie",t.nowPlaying),4===d&&n("not_available",t.nowPlaying),l.log("err1: "+d),i(d,t.nowPlaying)):(t.nowPlaying=u.merge(t.nowPlaying,c),s.usessionid(t.nowPlaying,o,t._user.uuid||"NULL",function(n,u){return n?s.markCurrentCacheServerAsBad(t.nowPlaying)?a():(l.log("err2: "+n),i(n)):(t.nowPlaying.usessionid=u,s.info_xml(t.nowPlaying,o,function(n,u){var d;return n?s.markCurrentCacheServerAsBad(t.nowPlaying)?a():(l.log("err3: "+n),i(n)):(t.contMngr.parseInfoXML(u),t.contMngr.m3u8Manifest.subtitles.isExist&&t._reloadSubtitles(t.contMngr.selectedSubtitles),t._user.storeProgress&&s.progress("single",e,o,function(e,r){return e?(l.log("err4: "+e),i(e)):t.nowPlaying.progress=r}),d=t.contMngr.makeUrl(t.nowPlaying.clearUrl+"v5-mnf.m3u8",t.nowPlaying.usessionid),s.getM3U8(d,t.nowPlaying,function(e,n){return e?s.markCurrentCacheServerAsBad(t.nowPlaying)?a():(l.log("err5: "+e),i(e)):(t.contMngr.parseM3U8(n),t.isTrailer?r():s.scenes(t.nowPlaying,o,function(e,i){return e||(t.nowPlaying.scenes=i),r()}))}))}))}))})}}(this),null!=e)return t?(this.nowPlaying=t,this.isAllowed||this.isTrailer?a():n("not_allowed",this.nowPlaying)):s.checkPlatform(e,o,function(t){return function(r,u){return r?(l.log("err6: "+r),i(r)):(t.isAllowed=u,s.get_video_info(e,o,t.player._core.params.frame,function(e,r){return e?(l.log("err7: "+e),i(e)):(t.nowPlaying=r,t.isAllowed||t.isTrailer?a():n("not_allowed",t.nowPlaying))}))}}(this))},t}(a),t.exports=n},{"../player.coffee":30,"../shared/api.coffee":33,"../shared/debug.coffee":34,"../shared/utils.coffee":36,"./content-manager.js":18,"./subtitles.coffee":23,events:2}],22:[function(e,t,r){var i,a,n,o,s=function(e,t){function r(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("../shared/api.coffee"),i=e("events").EventEmitter,o=e("../shared/debug.coffee"),a=function(e){function t(e,t){this.platform=null!=e?e:"htm",this.params=null!=t?t:{},o.log("settings")}var r;return s(t,e),r={},{},t.prototype.load=function(){return o.log("settings load"),this.params.src?(this.set({}),this.user={},o.log("emit settings loadingdone"),this.emit("loadingdone",{target:this})):this.get()},t.prototype.get=function(){return n.get_settings(this.platform,function(e){return function(t,r){return t?(o.log("get_settings.error: ",t),e.emit("loadingerror",{target:e,error:t})):(e.set(r),1!==e.params.pauseafterpreroll?n.get_user_info(e.platform,function(t,r){return t?(o.log("get_user_info.error: ",t),e.emit("loadingerror",{target:e,error:t})):(e.setUser(r),e.emit("loadingdone",{target:e}))}):(e.user={},e.emit("loadingdone",{target:e})))}}(this))},t.prototype.setUser=function(e){return this.user=e,this},t.prototype.set=function(e){return this.statServers=e.statServerList,this.midroll=e.adInterval,this.location=e.location,this.trackingEvents=[{name:"start",delay:"0s",detached:!1,sceneCorrection:!1},{name:"30sec",delay:"30s",detached:!1,sceneCorrection:!1},{name:"25prc",delay:"25%",detached:!1,sceneCorrection:!1},{name:"50prc",delay:"50%",detached:!1,sceneCorrection:!1},{name:"90prc",delay:"90%",detached:!1,sceneCorrection:!1},{name:"avod",delay:e.statAVODDelay+"s",detached:!0,sceneCorrection:!1},{name:"svod",interval:e.statSVODInterval+"s",detached:!0,sceneCorrection:!1},{name:"progress",interval:e.statProgressInterval+"s",detached:!0,sceneCorrection:!1},{name:"history",delay:"30s",detached:!0,sceneCorrection:!1}],null!=this.params.trackingEvents&&this.trackingEvents.push.apply(this.trackingEvents,this.params.trackingEvents),this},t.prototype.saveValue=function(e,t){var i;try{r=window.localStorage.getItem("tvzavrhtml5player")?JSON.parse(window.localStorage.getItem("tvzavrhtml5player")):{},r[e]=t,i=JSON.stringify(r),window.localStorage.setItem("tvzavrhtml5player",i)}catch(e){}return t},t.prototype.restoreValue=function(e,t){var i;try{r=window.localStorage.getItem("tvzavrhtml5player")?JSON.parse(window.localStorage.getItem("tvzavrhtml5player")):{},i=r[e],void 0===i&&(i=t,this.saveValue(e,t))}catch(e){i=t}return i},t}(i),t.exports=a},{"../shared/api.coffee":33,"../shared/debug.coffee":34,events:2}],23:[function(e,t,r){var i,a=function(e,t){return function(){return e.apply(t,arguments)}};e("./vtt.js"),i=function(){function e(){this.setCues=a(this.setCues,this),this.isActive=!1,this.subtitles={cues:[],regions:[]},t.oncue=function(e){return function(t){return e.subtitles.cues.push(t)}}(this),t.onregion=function(e){return function(t){return e.subtitles.regions.push(t)}}(this)}var t;return t=new WebVTT.Parser(window,WebVTT.StringDecoder()),e.prototype.parse=function(e){return this.subtitles.cues=[],t.parse(e),t.flush()},e.prototype.setCues=function(e){var t,r;return r=document.querySelector(".tvz-subtitles"),t=this.subtitles.cues.filter(function(t){return t.startTime<=e.target.currentTime&&t.endTime>=e.target.currentTime}),t.length?WebVTT.processCues(window,t,r):r.innerHTML=""},e}(),t.exports=i},{"./vtt.js":29}],24:[function(e,t,r){var i;i=function(){function e(){}return e.state="",e.prototype.set=function(){throw new Error("Not implemented. [__NAME__]")},e.prototype.load=function(){throw new Error("Not implemented. [__NAME__]")},e.prototype.play=function(){throw new Error("Not implemented. [__NAME__]")},e.prototype.pause=function(){throw new Error("Not implemented. [__NAME__]")},e.prototype.seek=function(){throw new Error("Not implemented. [__NAME__]")},e}(),t.exports=i},{}],25:[function(e,t,r){var i,a,n,o=function(e,t){function r(){this.constructor=e}for(var i in t)s.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e("hls.js"),n=e("./video-tech.coffee"),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var r;return o(t,e),r=new i,t.set=function(e,t){var a,n;return null==e&&(e=""),null==t&&(t=!1),n=e.indexOf(".m3u8")>-1,"default"!==(a=this._env)&&"android"!==a||!n?(r&&r.detachMedia(),this._source.src=e):i.isSupported()?(r.attachMedia(this._source),r.loadSource(e)):this.emit("error",{target:this,event:"Cannot use MSE in current environment"}),this.url=e},t.load=function(){return this._source.load()},t.play=function(){return this._source.play()},t.pause=function(){return this._source.pause()},t.seek=function(e){return null==e&&(e=0),this._source.currentTime=e},t.getVolume=function(){return this._source.volume},t.setVolume=function(e){return null==e&&(e=0),this._source.volume=e},t.levels=function(){return r.levels},t.setLevel=function(){return r.levels},t.paused=function(){return this._source.paused},t.ended=function(){return this._source.ended},t}(n),t.exports=a},{"./video-tech.coffee":24,"hls.js":6}],26:[function(e,t,r){var i,a,n,o=function(e,t){function r(){this.constructor=e}for(var i in t)s.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};n=e("../shared/utils.coffee"),i=e("events").EventEmitter,a=function(e){function t(e,t,r,i){null==r&&(r=0),null==i&&(i=0),this.events={detached:{},attached:{}},this.setDuration(r),this.setCurrent(i),this.setScenes(t),this.addEvents(e,!0),this.setTotal(0)}var r,i;return o(t,e),r=["s","m","h","%"],i=null,t.prototype.addEvent=function(e,t){var r,i,a,n,o,s,u,d,c,p,_,f;if(null==e&&(e={}),null==t&&(t=!0),d=e.name||"trackingevent",r=(e.delay||e.interval||"").toString(),i=e.detached,f=e.sceneCorrection||!1,_=!(!e.interval||e.delay),n=this._getCuePoints(r,_,f),o=this.events[i?"detached":"attached"],c=(null!=(p=o[d])?p.cues:void 0)||[],d in o&&!t)for(s=0,u=n.length;s<u;s++)a=n[s],l.call(c,a)<0&&c.push(a);else c=n;return o[d]={cues:i?c[0]:c,repeat:_,notStat:e.notStat}},t.prototype.addEvents=function(e,t){var r,i,a,n;for(null==e&&(e=[]),null==t&&(t=!1),n=[],i=0,a=e.length;i<a;i++)r=e[i],n.push(this.addEvent(r,t));return n},t.prototype.removeAttachedEvent=function(e){var t,r;return null==e&&(e=""),r=this.events.attached,t={},e&&e in r&&(t=r[e],delete r[e]),t},t.prototype.removeDetachedEvent=function(e){var t,r;return null==e&&(e=""),r=this.events.detached,t={},e&&e in r&&(t=r[e],delete r[e]),t},t.prototype.setScenes=function(e){return null==e&&(e=[]),this.scenes=e},t.prototype.setDuration=function(e){return null==e&&(e=0),this.duration=e},t.prototype.setCurrent=function(e){return null==e&&(e=0),e=Math.ceil(e),e!==this.current&&(this.current=e,this._checkAttachedEvents()),e},t.prototype.setTotal=function(e){return null==e&&(e=0),e!==this.total&&(this.total=e,this.total>=1&&this._checkDetachedEvents()),e},t.prototype.start=function(){return this.pause(),i=n.interval(1e3,function(e){return function(){return e.setTotal(e.total+1)}}(this))},t.prototype.pause=function(){return clearInterval(i),i=null},t.prototype.stop=function(){return this.pause(),this.setTotal(0)},t.prototype._getCuePoints=function(e,t,i){var a,n,o,s;if(null==e&&(e=""),null==t&&(t=!1),null==i&&(i=!0),n=[],s=e.toString().substr(-1),e=parseInt(e,10),a=function(e,t){var r,i,a;for(r=0,i=t.length;r<i;r++)if(a=t[r],(a=parseInt(a,10))>=e)return a;return e},l.call(r,s)>=0)switch(s){case"%":e*=this.duration/100;break;case"m":e*=60;break;case"h":e*=3600}if(t)for(o=e;o<=this.duration;)i&&(o=a(o,this.scenes)),n.push(Math.ceil(o)),o+=e;else i&&(e=a(e,this.scenes)),e<=this.duration&&n.push(Math.ceil(e));return n},t.prototype.ttReached=function(e,t){return this.emit("trackingtimereached",{target:this,event:e,current:this.current,total:this.total,notStat:t})},t.prototype._checkAttachedEvents=function(){var e,t,r,i,a;r=this.events.attached,a=[];for(i in r)t=r[i],a.push(function(){var r,a,n,o,s;for(n=t.cues,s=[],r=0,a=n.length;r<a;r++)e=n[r],!t.fired&&e<=(o=this.current)&&o<=e+5?s.push((t.fired=!0)&&this.ttReached(i,t.notStat)):s.push(void 0);return s}.call(this));return a},t.prototype._checkDetachedEvents=function(){var e,t,r,i;t=this.events.detached,i=[];for(r in t)e=t[r],e.repeat?0===Math.floor(this.total%e.cues)?i.push(this.ttReached(r,e.notStat)):i.push(void 0):0===Math.floor(this.total-e.cues)?i.push(this.ttReached(r,e.notStat)):i.push(void 0);return i},t}(i),t.exports=a},{"../shared/utils.coffee":36,events:2}],27:[function(e,t,r){var i,a,n,o,s,l,u,d,c,p,_,f,h,m,g,v,y,A;s=e("../widgets/movie-poster.coffee"),a=e("../widgets/button.coffee"),o=e("../widgets/loading-indicator.coffee"),l=e("../widgets/movie-title.coffee"),i=e("../widgets/ad-title.coffee"),u=e("../widgets/panel.coffee"),d=e("../widgets/progress.coffee"),g=e("../widgets/volume.coffee"),c=e("../widgets/settings.coffee"),f=e("../widgets/time-label.coffee"),_=e("../widgets/text-label.coffee"),n=e("../widgets/disable-ad-button.coffee"),p=e("../widgets/subtitles_container.coffee"),h=e("../widgets/tvzavr-logo.coffee"),v=e("../widgets/widget.coffee"),A=e("../shared/utils.coffee"),y=e("../shared/debug.coffee"),m=function(){function e(e,t,r){var m,y;this.core=t,this.video=r,this.posterVisible=!1,this.working=!1,this.mode="movie",this.state="ready",this.adContainer=new v("div","tvz-ad",!0,"aContainer"),this.poster=new s({visible:!0,id:e}),this.bigPlayButton=new a({visible:!1,classNames:"tvz-bpb2"}),this.bigPlayButtonArea=new v("div","tvz-bpba",!0),this.loadingIndicator=new o({visible:!1}),this.disableAdButton=new n({visible:!1,text:this.core.params.adTrial&&"0"!==String(this.core.params.adTrial)?"Отключите рекламу за 1 рубль":"Отключите рекламу за 3 рубля в день",classNames:this.core.params.adTrial&&"0"!==String(this.core.params.adTrial)?"tvz-button_disable_ad js-trial-info":"tvz-button_disable_ad js-payment-info",attributes:{"data-tariff-id":"25"}}),this.adBlockButton=new a({visible:!1,text:"Из-за используемого блокировщика рекламы может некорректно работать сайт и ухудшиться качество воспроизведения видео.\n\r Нравится смотреть кино без рекламы? Избавьтесь от нее за 3 рубля в день и смотрите кино в лучшем качестве!",classNames:"tvz-button_adblock"}),this.adBlockButtonDisableAd=new a({visible:!0,text:"Отключить рекламу",classNames:"tvz-button_adblock_disable_ad"}),this.adBlockButtonAccept=new a({visible:!0,text:"Смотреть в низком качестве",classNames:"tvz-button_adblock_accept"}),this.tvzavrLogo=new h({visible:!1,classNames:"tvz-logo"}),this.playButton=new a({visible:!1,state:"paused",mode:"movie",classNames:"tvz-button_play"}),this.playButtonIcon=new v("div","tvz-button_play-icon",!0),this.playButtonIcon.setState("paused"),this.playButtonIcon.setMode("movie"),this.fsButton=new a({visible:!1,state:"mini",classNames:"tvz-button_fs"}),this.fsButtonIcon=new v("div","tvz-button_fs-icon",!0),this.fsButtonIcon.setState("mini"),this.volumeButton=new a({visible:!1,state:"volume-off",mode:"movie",classNames:"tvz-button_volume"}),this.volumeButtonIcon=new v("div","tvz-button_volume-icon",!0),this.settingsButton=new a({visible:!1,classNames:"tvz-button_settings"}),this.settingsButtonIcon=new v("div","tvz-button_settings-icon",!0),this.subsButton=new a({visible:!1,state:"disabled",classNames:"tvz-button_subs disabled_button"}),this.subsButtonIcon=new v("div","tvz-button_subs-icon disabled_button",!0),this.subsButtonIcon.setState("disabled"),this.movieTitle=new l({visible:!0}),this.adTitle=new i({visible:!1,text:"Загрузка рекламы...",classNames:"tvz-ad_title"}),this.movieDock=new u({visible:!1,classNames:["tvz-controls_dock","tvz-controls_dock-movie"]}),this.volumePanel=new u({visible:!1,classNames:"tvz-controls_volumedock",mode:"movie",hideDelay:"android"===(m=this.core.env)||"iphone"===m||"ipad"===m?3e3:1e3}),this.settingsPanel=new u({visible:!1,classNames:"tvz-controls_settings_panel"}),this.subtitlesPanel=new u({visible:!1,classNames:"tvz-controls_subtitles_panel"}),this.audiotracksPanel=new u({visible:!1,classNames:"tvz-controls_audiotracks_panel"}),this.volume=new g({panel:this.volumePanel,visible:!0}),this.settings=new c({panel:this.settingsPanel,subtitlesPanel:this.subtitlesPanel,audiotracksPanel:this.audiotracksPanel,visible:!0}),this.progress=new d({panel:this.movieDock,state:"enabled",working:!1}),this.timerow=new u({visible:!0,classNames:"tvz-timerow"}),this.currentTime=new f({visible:!0,time:0,classNames:"tvz-timerow-current_time"}),this.totalTime=new f({visible:!0,time:0,classNames:"tvz-timerow-total_time"}),this.subsDiv=new p("tvz-subtitles"),this.adLabel=new _({visible:!1,text:"Реклама",position:"tl",classNames:"tvz-ad_label"}),"iphone"!==(y=this.core.env)&&"ipad"!==y&&"android"!==y||(this.disableAdButton._source.style.right="100px")}return"",e.prototype.setColor=function(e){return this.settings.setColor(e),this.progress._seek.style.backgroundColor=e,this.progress._handler.style.backgroundColor=e,this.bigPlayButton._source.style.backgroundColor=e,this.volume._bar.style.backgroundColor=e,this.volume._handler.style.backgroundColor=e,null},e.prototype.appendTo=function(e){switch(this.adContainer.appendTo(e),this.subsDiv.appendTo(e),this.bigPlayButtonArea.appendTo(e),this.core.params.special){case"npr":this.brandingArea.appendTo(e),this.npr.appendTo(this.brandingArea),this.nprClickArea.appendTo(this.brandingArea)}return this.playButton.appendTo(e),this.playButtonIcon.appendTo(this.playButton),this.volumeButton.appendTo(e),this.volumeButtonIcon.appendTo(this.volumeButton),this.settingsButton.appendTo(e),this.settingsButtonIcon.appendTo(this.settingsButton),this.subsButton.appendTo(e),this.subsButtonIcon.appendTo(this.subsButton),this.fsButton.appendTo(e),this.fsButtonIcon.appendTo(this.fsButton),this.movieTitle.appendTo(e),this.timerow.append(this.currentTime).append(this.totalTime),this.movieDock.append(this.timerow).append(this.progress).appendTo(e),this.volumePanel.append(this.volume).appendTo(e),this.settingsPanel.appendTo(e),this.subtitlesPanel.appendTo(e),this.audiotracksPanel.appendTo(e),this.adLabel.appendTo(e),this.tvzavrLogo.appendTo(e),this.adTitle.appendTo(e),this.poster.appendTo(e),this.bigPlayButton.appendTo(e),this.loadingIndicator.appendTo(e),this.disableAdButton.appendTo(e),this.adBlockButton.appendTo(e),this.adBlockButtonDisableAd.appendTo(this.adBlockButton),this.adBlockButtonAccept.appendTo(this.adBlockButton)},e.prototype.showPoster=function(){return this.poster.show(),this.posterVisible=!0},e.prototype.hidePoster=function(){return this.poster.hide(),this.posterVisible=!1},e.prototype.setWorking=function(e){return null==e&&(e=!1),this.progress.setWorkingState(e),this.working=e},e.prototype.setDuration=function(e){return null==e&&(e=0),this.progress.setDuration(e),this.totalTime.set(e),e},e.prototype.setCurrentTime=function(e){return null==e&&(e=0),this.progress.setCurrent(e),this.currentTime.set(e),e},e.prototype.showMovieControls=function(){if("ad"!==this.mode&&(this.movieTitle.show(),this.adTitle.hide(),this.movieDock.show(),this.playButton.show(),this.volumeButton.show(),this.settingsButton.show(),this.subsButton.show(),this.fsButton.show(),this.subsDiv.moveUp(),A.homeSite()||1===this.core.params.nologo||this.tvzavrLogo.show(),this.bigPlayButtonArea.show(),this.brandingArea))return this.brandingArea.show()},e.prototype.hideMovieControls=function(){if(this.movieTitle.hide(),this.adTitle.hide(),this.movieDock.hide(),this.playButton.hide(),this.volumeButton.hide(),this.settingsButton.hide(),this.subsButton.hide(),this.volumePanel.hide(),this.settingsPanel.hide(),this.subtitlesPanel.hide(),this.audiotracksPanel.hide(),this.fsButton.hide(),this.subsDiv.moveDown(),this.tvzavrLogo.hide(),this.bigPlayButtonArea.hide(),this.brandingArea)return this.brandingArea.hide()},e.prototype.setMode=function(e,t,r,i){switch(this.mode=null!=e?e:"movie",null==t&&(t=0),this.state=null!=r?r:"",null==i&&(i=!1),y.log("ui.setMode",this.mode,t,this.state),this.mode){case"error":if(this.loadingIndicator.setType("error",t),this.loadingIndicator.hide(),this.playButton.hide(),this.volumeButton.hide(),this.settingsButton.hide(),this.subsButton.hide(),this.fsButton.hide(),this.movieTitle.hide(),this.adTitle.hide(),this.movieDock.hide(),this.tvzavrLogo.hide(),this.bigPlayButton.hide(),this.poster.show(),this.adLabel.hide(),this.adContainer.hide(),this.brandingArea)return this.brandingArea.hide();break;case"ad":return this.loadingIndicator.setType("ad"),this.loadingIndicator.show(),this.playButton.hide(),this.playButtonIcon.setMode("ad"),this.volumeButton.show(),this.volumeButton.setMode("ad"),this.volumePanel.setMode("ad"),this.settingsButton.hide(),this.subsButton.hide(),this.fsButton.hide(),this.movieTitle.hide(),this.adTitle.show(),this.movieDock.hide(),this.tvzavrLogo.hide(),this.bigPlayButton.hide(),this.poster.hide(),this.adContainer.show(),this.adContainer.enableMouse(),this.fsButton.hide(),i?this.adLabel.hide():this.adLabel.show(),this.brandingArea&&this.brandingArea.hide(),this.video.hide();case"adloading":return this.loadingIndicator.setType("ad"),this.loadingIndicator.show(),this.playButton.hide(),this.playButtonIcon.setMode("ad"),this.volumeButton.hide(),this.volumeButton.setMode("ad"),this.volumePanel.setMode("ad"),this.settingsButton.hide(),this.subsButton.hide(),this.fsButton.hide(),this.movieTitle.hide(),this.adTitle.show(),this.movieDock.hide(),this.tvzavrLogo.hide(),this.bigPlayButton.hide(),this.poster.hide(),this.adContainer.show(),this.adContainer.enableMouse(),this.fsButton.hide(),this.adLabel.hide(),this.brandingArea&&this.brandingArea.hide(),this.video.hide();case"adpause":if(this.loadingIndicator.setType("ad"),this.loadingIndicator.hide(),this.playButton.hide(),this.playButtonIcon.setMode("ad"),this.volumeButton.show(),this.volumeButton.setMode("ad"),this.volumePanel.setMode("ad"),this.settingsButton.hide(),this.subsButton.hide(),this.fsButton.hide(),this.movieTitle.hide(),this.adTitle.show(),this.movieDock.hide(),this.tvzavrLogo.hide(),this.bigPlayButton.show(),this.poster.hide(),this.adContainer.show(),this.adContainer.disableMouse(),this.fsButton.hide(),this.adLabel.show(),this.brandingArea)return this.brandingArea.hide();break;case"poster":if(this.loadingIndicator.hide(),this.playButton.hide(),this.volumeButton.hide(),this.settingsButton.hide(),this.subsButton.hide(),this.fsButton.hide(),this.movieTitle.show(),this.adTitle.hide(),this.movieDock.hide(),this.tvzavrLogo.hide(),this.bigPlayButton.show(),this.adContainer.show(),this.poster.show(),this.brandingArea)return this.brandingArea.hide();break;case"movie":switch(this.state){case"loading":if(this.loadingIndicator.show(),this.playButton.hide(),this.volumeButton.hide(),this.settingsButton.hide(),this.subsButton.hide(),this.fsButton.hide(),this.movieTitle.show(),this.adTitle.hide(),this.movieDock.hide(),this.tvzavrLogo.hide(),this.bigPlayButton.hide(),this.poster.hide(),this.adLabel.hide(),this.adContainer.show(),this.brandingArea)return this.brandingArea.hide();break;default:switch(this.loadingIndicator.setType(t?"progress":"movie"),this.adLabel.hide(),this.poster.hide(),A.homeSite()||1===this.core.params.nologo||this.tvzavrLogo.show(),this.adContainer.show(),this.playButton.show(),this.playButtonIcon.setMode("movie"),this.volumeButton.show(),this.volumeButton.setMode("movie"),
this.volumePanel.setMode("movie"),this.settingsButton.show(),this.subsButton.show(),this.fsButton.show(),this.movieTitle.show(),this.adTitle.hide(),this.movieDock.show(),this.brandingArea&&this.brandingArea.show(),this.video.show(),this.state){case"paused":return this.playButtonIcon.setState("paused"),this.progress.setWorkingState(!1),this.loadingIndicator.hide(),this.bigPlayButton.show();case"playing":return this.playButtonIcon.setState("playing"),this.progress.setWorkingState(!1),this.loadingIndicator.hide(),this.bigPlayButton.hide()}}}},e.prototype.setVolume=function(e,t){var r;return null==t&&(t=!0),null!=(r=this.volume)&&r.setCurrent(100*e,t),e},e}(),t.exports=m},{"../shared/debug.coffee":34,"../shared/utils.coffee":36,"../widgets/ad-title.coffee":39,"../widgets/button.coffee":40,"../widgets/disable-ad-button.coffee":41,"../widgets/loading-indicator.coffee":42,"../widgets/movie-poster.coffee":43,"../widgets/movie-title.coffee":44,"../widgets/panel.coffee":45,"../widgets/progress.coffee":46,"../widgets/settings.coffee":47,"../widgets/subtitles_container.coffee":48,"../widgets/text-label.coffee":49,"../widgets/time-label.coffee":50,"../widgets/tvzavr-logo.coffee":51,"../widgets/volume.coffee":52,"../widgets/widget.coffee":53}],28:[function(e,t,r){var i,a,n,o,s=function(e,t){function r(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e("../shared/utils.coffee"),a=e("../widgets/widget.coffee"),n=e("../shared/debug.coffee"),i=function(t){function r(e,t,i,a,n,s){var l,u;null==t&&(t="html5"),null==i&&(i="default"),null==a&&(a=!0),null==n&&(n=""),null==s&&(s=0),r.__super__.constructor.call(this,"video","tvz-video",a,n),this.url="",this._env=i,this._lastTime=0,e&&(delete this._source,this._source=e,this._source.className="tvz-video",1===s&&("ipad"!==(l=this._env)&&"iphone"!==l&&"android"!==l||this._source.setAttribute("muted",!0),"ipad"!==(u=this._env)&&"iphone"!==u||this._source.setAttribute("autoplay",!0)),this._source.setAttribute("playsinline",!0),this._source.addEventListener("statechange",function(e){return function(e){}}()),this._source.addEventListener("click",function(e){return function(t){return e.emit("click",{target:e,event:t})}}(this)),this._source.addEventListener("transitionend",function(e){return function(t){var r;if(r=parseFloat(getComputedStyle(e._source).opacity),"opacity"===t.propertyName&&0===r)return e._source.style.display="none"}}(this)),o.timeout(10,function(e){return function(){return e.setVisibility(a)}}(this))),this.loadTech(t),this._setState("idle"),this._addEventListeners()}var i;return s(r,t),i={html5:e("./tech/video-tech.html5.coffee"),debug:e("./tech/video-tech.coffee")},r.prototype.loadTech=function(e){var t;return null==e&&(e="html5"),e in i||(e="html5"),t=i[e],this.set=function(e){return function(){return t.set.apply(e,arguments)}}(this),this.load=function(e){return function(){return t.load.apply(e,arguments)}}(this),this.play=function(e){return function(){return t.play.apply(e,arguments)}}(this),this.pause=function(e){return function(){return t.pause.apply(e,arguments)}}(this),this.seek=function(e){return function(){return t.seek.apply(e,arguments)}}(this),this.getVolume=function(e){return function(){return t.getVolume.call(e)}}(this),this.setVolume=function(e){return function(){return t.setVolume.apply(e,arguments)}}(this),this.levels=function(e){return function(){return t.levels.apply(e,arguments)}}(this),this.setLevel=function(e){return function(){return t.setLevel.apply(e,arguments)}}(this),this.paused=function(e){return function(){return t.paused.apply(e,arguments)}}(this),this.ended=function(e){return function(){return t.ended.apply(e,arguments)}}(this)},r.prototype.getState=function(){return this.state},r.prototype.setState=function(e){return this._setState(e)},r.prototype._setState=function(e){return null==e&&(e=""),"seeking"===e&&(this._prevState=this.state),"seeked"===e&&this._prevState&&(e=this._prevState,this._prevState=""),this.state=e,this.emit("statechange",{state:this.state}),this.state},r.prototype._addEventListeners=function(){var e;return e=this._source,e.addEventListener("loadstart",function(e){return function(t){if("loading"!==e.state)return e._lastTime=0,e._playingReady=!1,e._setState("loading"),e.emit("loadstart",{target:e,event:t})}}(this)),e.addEventListener("durationchange",function(e){return function(t){return e.duration=t.target.duration,e.emit("durationchange",{target:e,event:t})}}(this)),e.addEventListener("loadedmetadata",function(e){return function(t){return e.emit("loadedmetadata",{target:e,event:t})}}(this)),e.addEventListener("pause",function(e){return function(t){if("paused"!==e.state&&t.target.currentTime!==t.target.duration)return e._setState("paused"),e.emit("pause",{target:e,event:t})}}(this)),e.addEventListener("seeking",function(e){return function(t){if("seeking"!==e.state)return e._setState("seeking"),e.emit("seeking",{target:e,event:t})}}(this)),e.addEventListener("seeked",function(e){return function(t){if("seeking"===e.state)return e._setState("seeked"),e.emit("seekEnd",{target:e,event:t})}}(this)),e.addEventListener("ended",function(e){return function(t){return e._setState("ended"),e._lastTime=0,e.emit("ended",{target:e,event:t})}}(this)),e.addEventListener("stalled",function(e){return function(t){var r;if("paused"!==(r=e.state)&&"seeking"!==r&&"error"!==r)return e._setState("buffering"),e.emit("buffering",{target:e,event:t})}}(this)),e.addEventListener("error",function(e){return function(t){return e._setState("error"),e.emit("error",{target:e,event:t})}}(this)),e.addEventListener("canplay",function(e){return function(t){return e.emit("readytoplay",{target:e,event:t})}}(this)),e.addEventListener("waiting",function(e){return function(t){return"playing"!==e.state&&"buffering"!==e.state||(e.bufferingTimer=0,e.bufferingInterval=o.interval(1e3,function(){return e.bufferingTimer+=1})),e.emit("waiting",{target:e,event:t})}}(this)),e.addEventListener("playing",function(e){return function(){if(n.log("video playing"),"playing"!==e.state&&(e._playingReady=!0),e.bufferingInterval&&clearInterval(e.bufferingInterval),e.bufferingTimer>0)return e.emit("buffering_end",{target:e,event:"buffering",value:e.bufferingTimer}),e.bufferingTimer=0}}(this)),e.addEventListener("seeked",function(e){return function(t){return e.emit("seeked",{target:e,event:t})}}(this)),e.addEventListener("timeupdate",function(e){return function(t){var r;return r=t.target.currentTime,e._playingReady?r&&r>e._lastTime?(e.currentTime=e._lastTime=r,e._playingReady=!1,e._setState("playing"),e.emit("playing",{target:e,event:t}),e.emit("timeupdate",{target:e,event:t})):void 0:(e.currentTime=e._lastTime=r,e.emit("timeupdate",{target:e,event:t}))}}(this))},r}(a),t.exports=i},{"../shared/debug.coffee":34,"../shared/utils.coffee":36,"../widgets/widget.coffee":53,"./tech/video-tech.coffee":24,"./tech/video-tech.html5.coffee":25}],29:[function(e,t,r){!function(e){function t(e){return"string"==typeof e&&(!!o[e.toLowerCase()]&&e.toLowerCase())}function r(e){return"string"==typeof e&&(!!s[e.toLowerCase()]&&e.toLowerCase())}function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}function a(e,a,o){var s=this,l=/MSIE\s8\.0/.test(navigator.userAgent),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var d="",c=!1,p=e,_=a,f=o,h=null,m="",g=!0,v="auto",y="start",A=50,k="middle",b=50,w="middle";if(Object.defineProperty(s,"id",i({},u,{get:function(){return d},set:function(e){d=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return _},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return m},set:function(e){var r=t(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return v},set:function(e){if("number"!=typeof e&&e!==n)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return y},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return A},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");A=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return k},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");k=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}var n="auto",o={"":!0,lr:!0,rl:!0},s={start:!0,middle:!0,end:!0,left:!0,right:!0};a.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.VTTCue=a||e.VTTCue}(window),function(e){function t(e){return"string"==typeof e&&(!!a[e.toLowerCase()]&&e.toLowerCase())}function r(e){return"number"==typeof e&&e>=0&&e<=100}function i(){var e=100,i=3,a=0,n=100,o=0,s=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");n=e}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");a=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var r=t(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");l=r}}})}var a={"":!0,up:!0};e.VTTRegion=e.VTTRegion||i}(window),function(e){function t(e,t){return void 0===t&&(t=1),"rgba("+[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),t].join(",")+")"}function r(e,r,i){switch(i){case"webvtt.font.color":case"webvtt.font.opacity":var a=Services.prefs.getCharPref("webvtt.font.color"),n=Services.prefs.getIntPref("webvtt.font.opacity")/100;v.fontSet=t(a,n);break;case"webvtt.font.scale":g=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":var o=Services.prefs.getCharPref("webvtt.bg.color"),s=Services.prefs.getIntPref("webvtt.bg.opacity")/100;v.backgroundSet=t(o,s);break;case"webvtt.edge.color":case"webvtt.edge.type":var l=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "],u=Services.prefs.getIntPref("webvtt.edge.type"),d=Services.prefs.getCharPref("webvtt.edge.color");v.edgeSet=l[u]+t(d)}}function i(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function a(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function n(){this.values=y(null)}function o(e,t,r,i){var a=i?e.split(i):[e];for(var n in a)if("string"==typeof a[n]){var o=a[n].split(r);if(2===o.length){var s=o[0],l=o[1];t(s,l)}}}function s(e,t,r){function s(){var t=a(e);if(null===t)throw new i(i.Errors.BadTimeStamp,"Malformed timestamp: "+u);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}var u=e;if(l(),t.startTime=s(),l(),"--\x3e"!==e.substr(0,3))throw new i(i.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+u);e=e.substr(3),l(),t.endTime=s(),l(),function(e,t){var i=new n;o(e,function(e,t){switch(e){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===t){i.set(e,r[a].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),o=n[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start","middle","end"]);break;case"position":n=t.split(","),i.percent(e,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start","middle","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical",""),t.line=i.get("line","auto"),t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align","middle"),t.position=i.get("position","auto"),t.positionAlign=i.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}(e,t)}function l(e,t){function r(e){return A[e]}for(var i,n=e.document.createElement("div"),o=n,s=[];null!==(i=function(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]+>?)?/);return function(e){return t=t.substr(e.length),e}(e[1]?e[1]:e[2])}());)if("<"!==i[0])o.appendChild(e.document.createTextNode(function(e){for(;d=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(d[0],r);return e}(i)));else{if("/"===i[1]){s.length&&s[s.length-1]===i.substr(2).replace(">","")&&(s.pop(),o=o.parentNode);continue}var l,u=a(i.substr(1,i.length-2));if(u){l=e.document.createProcessingInstruction("timestamp",u),o.appendChild(l);continue}var d=i.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!d)continue;if(!(l=function(t,r){var i=k[t];if(!i)return null;var a=e.document.createElement(i);a.localName=i;var n=b[t];return n&&r&&(a[n]=r.trim()),a}(d[1],d[3])))continue;if(!function(e,t){return!w[t.localName]||w[t.localName]===e.localName}(o,l))continue;d[2]&&(l.className=d[2].substr(1).replace("."," ")),s.push(d[1]),o.appendChild(l),o=l}return n}function u(e){function t(e,t){for(var r=t.childNodes.length-1;r>=0;r--)e.push(t.childNodes[r])}function r(e){if(!e||!e.length)return null;var i=e.pop(),a=i.textContent||i.innerText;if(a){var n=a.match(/^.*(\n|\r)/);return n?(e.length=0,n[0]):a}return"ruby"===i.tagName?r(e):i.childNodes?(t(e,i),r(e)):void 0}var i,a=[],n="";if(!e||!e.childNodes)return"ltr";for(t(a,e);n=r(a);)for(var o=0;o<n.length;o++){i=n.charCodeAt(o);for(var s=0;s<C.length;s++)if(C[s]===i)return"rtl"}return"ltr"}function d(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,r=t.textTrackList,i=0,a=0;a<r.length&&r[a]!==t;a++)"showing"===r[a].mode&&i++;return-1*++i}function c(){}function p(e,t,r){var i="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),a="rgba(255, 255, 255, 1)",n="rgba(0, 0, 0, 0.8)",o="";void 0!==v&&(a=v.fontSet,n=v.backgroundSet,o=v.edgeSet),i&&(a="rgb(255, 255, 255)",n="rgb(0, 0, 0)"),c.call(this),this.cue=t,this.cueDiv=l(e,t.text);var s={color:a,backgroundColor:n,textShadow:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};i||(s.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",s.unicodeBidi="plaintext"),this.applyStyles(s,this.cueDiv),this.div=e.document.createElement("div"),s={textAlign:"middle"===t.align?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},i||(s.direction=u(this.cueDiv),s.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(s),this.div.appendChild(this.cueDiv);var d=0;switch(t.positionAlign){case"start":d=t.position;break;case"middle":d=t.position-t.size/2;break;case"end":d=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(d,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(d,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function _(e){var t,r,i,a,n="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){r=e.div.offsetHeight,i=e.div.offsetWidth,a=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||a,this.height=e.height||r,this.bottom=e.bottom||a+(e.height||r),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight,n&&!this.lineHeight&&(this.lineHeight=13)}function f(e,t,r,i){var a=new _(t),n=t.cue,o=d(n),s=[];if(n.snapToLines){var l;switch(n.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var u=a.lineHeight,c=u*Math.round(o),p=r[l]+u,f=s[0];Math.abs(c)>p&&(c=c<0?-1:1,c*=Math.ceil(p/u)*u),o<0&&(c+=""===n.vertical?r.height:r.width,s=s.reverse()),a.move(f,c)}else{var h=a.lineHeight/r.height*100;switch(n.lineAlign){case"middle":o-=h/2;break;case"end":o-=h}switch(n.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],a=new _(t)}var m=function(e,t){for(var a,n=new _(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(r,t[s])||e.within(r)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(r))return e;var l=e.intersectPercentage(r);o>l&&(a=new _(e),o=l),e=new _(n)}return a||n}(a,s);t.move(m.toCSSCompatValues(r))}function h(){}var m=["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"],g=1;if("undefined"!=typeof Services){var v={};m.forEach(function(e){r(void 0,void 0,e),Services.prefs.addObserver(e,r,!1)})}var y=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();i.prototype=y(Error.prototype),i.prototype.constructor=i,i.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},n.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var A={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},k={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},b={v:"title",lang:"lang"},w={rt:"ruby"},C=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];c.prototype.applyStyles=function(e,t){t=t||this.div;for(var r in e)e.hasOwnProperty(r)&&(t.style[r]=e[r])},c.prototype.formatStyle=function(e,t){return 0===e?0:e+t},p.prototype=y(c.prototype),p.prototype.constructor=p,_.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},_.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},_.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},_.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},_.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":
return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},_.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},_.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},_.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e,{left:e.left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||r}},h.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},h.convertCueToDOMTree=function(e,t){return e&&t?l(e,t):null};h.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",r.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var a=[],n=_.getSimpleBoxPosition(i),o=Math.round(.05*n.height*100)/100,s={font:o*g+"px sans-serif"};!function(){for(var r,o,l=0;l<t.length;l++)o=t[l],r=new p(e,o,s),i.appendChild(r.div),f(e,r,n,a),o.displayState=r.div,a.push(_.getSimpleBoxPosition(r))}()}else for(var l=0;l<t.length;l++)i.appendChild(t[l].displayState)},h.Parser=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]},h.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof i))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=a.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,a.buffer=e.substr(t),r}function r(e){var t=new n;if(o(e,function(e,r){switch(e){case"id":t.set(e,r);break;case"width":t.percent(e,r);break;case"lines":t.integer(e,r);break;case"regionanchor":case"viewportanchor":var i=r.split(",");if(2!==i.length)break;var a=new n;if(a.percent("x",i[0]),a.percent("y",i[1]),!a.has("x")||!a.has("y"))break;t.set(e+"X",a.get("x")),t.set(e+"Y",a.get("y"));break;case"scroll":t.alt(e,r,["up"])}},/=/,/\s/),t.has("id")){var r=new a.window.VTTRegion;r.width=t.get("width",100),r.lines=t.get("lines",3),r.regionAnchorX=t.get("regionanchorX",0),r.regionAnchorY=t.get("regionanchorY",100),r.viewportAnchorX=t.get("viewportanchorX",0),r.viewportAnchorY=t.get("viewportanchorY",100),r.scroll=t.get("scroll",""),a.onregion&&a.onregion(r),a.regionList.push({id:t.get("id"),region:r})}}var a=this;e&&(a.buffer+=a.decoder.decode(e,{stream:!0}));try{var l;if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;l=t();var u=l.match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new i(i.Errors.BadSignature);a.state="HEADER"}for(var d=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(d?d=!1:l=t(),a.state){case"HEADER":/:/.test(l)?function(e){o(e,function(e,t){switch(e){case"Region":r(t)}},/:/)}(l):l||(a.state="ID");continue;case"NOTE":l||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){a.state="NOTE";break}if(!l)continue;if(a.cue=new a.window.VTTCue(0,0,""),a.state="CUE",-1===l.indexOf("--\x3e")){a.cue.id=l;continue}case"CUE":try{s(l,a.cue,a.regionList)}catch(e){a.reportOrThrowError(e),a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var c=-1!==l.indexOf("--\x3e");if(!l||c&&(d=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=l;continue;case"BADCUE":l||(a.state="ID");continue}}}catch(e){a.reportOrThrowError(e),"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new i(i.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.WebVTT=h}(window),function(e){"use strict";function t(e,t,r){return t<=e&&e<=r}function r(e,t){return Math.floor(e/t)}function i(e){var t=0;this.get=function(){return t>=e.length?z:Number(e[t])},this.offset=function(r){if((t+=r)<0)throw new Error("Seeking past start of the buffer");if(t>e.length)throw new Error("Seeking past EOF")},this.match=function(r){if(r.length>t+e.length)return!1;var i;for(i=0;i<r.length;i+=1)if(Number(e[t+i])!==r[i])return!1;return!0}}function a(e){var t=0;this.emit=function(r){var i,a=z;for(i=0;i<arguments.length;++i)a=Number(arguments[i]),e[t++]=a;return a}}function n(e){var r=0,i=function(e){for(var r=[],i=0,a=e.length;i<e.length;){var n=e.charCodeAt(i);if(t(n,55296,57343))if(t(n,56320,57343))r.push(65533);else if(i===a-1)r.push(65533);else{var o=e.charCodeAt(i+1);if(t(o,56320,57343)){var s=1023&n,l=1023&o;i+=1,r.push(65536+(s<<10)+l)}else r.push(65533)}else r.push(n);i+=1}return r}(e);this.offset=function(e){if((r+=e)<0)throw new Error("Seeking past start of the buffer");if(r>i.length)throw new Error("Seeking past EOF")},this.get=function(){return r>=i.length?G:i[r]}}function o(){var e="";this.string=function(){return e},this.emit=function(t){t<=65535?e+=String.fromCharCode(t):(t-=65536,e+=String.fromCharCode(55296+(t>>10&1023)),e+=String.fromCharCode(56320+(1023&t)))}}function s(e){this.name="EncodingError",this.message=e,this.code=0}function l(e,t){if(e)throw new s("Decoder error");return t||65533}function u(e){throw new s("The code point "+e+" could not be encoded.")}function d(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(H,e)?H[e]:null}function c(e,t){return t?t[e]||null:null}function p(e,t){var r=t.indexOf(e);return-1===r?null:r}function _(t){if(!("encoding-indexes"in e))throw new Error("Indexes missing. Did you forget to include encoding-indexes.js?");return e["encoding-indexes"][t]}function f(e){if(e>39419&&e<189e3||e>1237575)return null;var t,r=0,i=0,a=_("gb18030");for(t=0;t<a.length;++t){var n=a[t];if(!(n[0]<=e))break;r=n[0],i=n[1]}return i+e-r}function h(e){var t,r=0,i=0,a=_("gb18030");for(t=0;t<a.length;++t){var n=a[t];if(!(n[1]<=e))break;r=n[1],i=n[0]}return i+e-r}function m(e,t){if(!(this instanceof m))return new m(e,t);if(e=e?String(e):q,t=Object(t),this._encoding=d(e),null===this._encoding||"replacement"===this._encoding.name)throw new TypeError("Unknown encoding: "+e);if(!this._encoding.getDecoder)throw new Error("Decoder not present. Did you forget to include encoding-indexes.js?");return this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty?Object.defineProperty(this,"encoding",{get:function(){return this._encoding.name}}):this.encoding=this._encoding.name,this}function g(e,t){if(!(this instanceof g))return new g(e,t);e=e?String(e):q,t=Object(t),this._encoding=d(e);var r=t.NONSTANDARD_allowLegacyEncoding,i="utf-8"!==this._encoding.name&&"utf-16le"!==this._encoding.name&&"utf-16be"!==this._encoding.name;if(null===this._encoding||i&&!r)throw new TypeError("Unknown encoding: "+e);if(!this._encoding.getEncoder)throw new Error("Encoder not present. Did you forget to include encoding-indexes.js?");return this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty?Object.defineProperty(this,"encoding",{get:function(){return this._encoding.name}}):this.encoding=this._encoding.name,this}function v(e){var r=e.fatal,i=0,a=0,n=0,o=0;this.decode=function(e){var s=e.get();if(s===z)return 0!==a?l(r):G;if(e.offset(1),0===a){if(t(s,0,127))return s;if(t(s,194,223))a=1,o=128,i=s-192;else if(t(s,224,239))a=2,o=2048,i=s-224;else{if(!t(s,240,244))return l(r);a=3,o=65536,i=s-240}return i*=Math.pow(64,a),null}if(!t(s,128,191))return i=0,a=0,n=0,o=0,e.offset(-1),l(r);if(n+=1,i+=(s-128)*Math.pow(64,a-n),n!==a)return null;var u=i,d=o;return i=0,a=0,n=0,o=0,t(u,d,1114111)&&!t(u,55296,57343)?u:l(r)}}function y(e){e.fatal;this.encode=function(e,i){var a=i.get();if(a===G)return z;if(i.offset(1),t(a,55296,57343))return u(a);if(t(a,0,127))return e.emit(a);var n,o;t(a,128,2047)?(n=1,o=192):t(a,2048,65535)?(n=2,o=224):t(a,65536,1114111)&&(n=3,o=240);for(var s=e.emit(r(a,Math.pow(64,n))+o);n>0;){var l=r(a,Math.pow(64,n-1));s=e.emit(128+l%64),n-=1}return s}}function A(e,r){var i=r.fatal;this.decode=function(r){var a=r.get();if(a===z)return G;if(r.offset(1),t(a,0,127))return a;var n=e[a-128];return null===n?l(i):n}}function k(e,r){r.fatal;this.encode=function(r,i){var a=i.get();if(a===G)return z;if(i.offset(1),t(a,0,127))return r.emit(a);var n=p(a,e);return null===n&&u(a),r.emit(n+128)}}function b(e){var r=e.fatal,i=0,a=0,n=0;this.decode=function(e){var o=e.get();if(o===z&&0===i&&0===a&&0===n)return G;o!==z||0===i&&0===a&&0===n||(i=0,a=0,n=0,l(r)),e.offset(1);var s;if(0!==n)return s=null,t(o,48,57)&&(s=f(10*(126*(10*(i-129)+(a-48))+(n-129))+o-48)),i=0,a=0,n=0,null===s?(e.offset(-3),l(r)):s;if(0!==a)return t(o,129,254)?(n=o,null):(e.offset(-2),i=0,a=0,l(r));if(0!==i){if(t(o,48,57))return a=o,null;var u=i,d=null;i=0;var p=o<127?64:65;return(t(o,64,126)||t(o,128,254))&&(d=190*(u-129)+(o-p)),s=null===d?null:c(d,_("gb18030")),null===d&&e.offset(-1),null===s?l(r):s}return t(o,0,127)?o:128===o?8364:t(o,129,254)?(i=o,null):l(r)}}function w(e){e.fatal;this.encode=function(e,i){var a=i.get();if(a===G)return z;if(i.offset(1),t(a,0,127))return e.emit(a);var n=p(a,_("gb18030"));if(null!==n){var o=r(n,190)+129,s=n%190,l=s<63?64:65;return e.emit(o,s+l)}n=h(a);var u=r(r(r(n,10),126),10);n-=10*u*126*10;var d=r(r(n,10),126);n-=10*d*126;var c=r(n,10),f=n-10*c;return e.emit(u+129,d+48,c+129,f+48)}}function C(e){var r=e.fatal,i=!1,a=0;this.decode=function(e){var n=e.get();if(n===z&&0===a)return G;if(n===z&&0!==a)return a=0,l(r);if(e.offset(1),126===a)return a=0,123===n?(i=!0,null):125===n?(i=!1,null):126===n?126:10===n?null:(e.offset(-1),l(r));if(0!==a){var o=a;a=0;var s=null;return t(n,33,126)&&(s=c(190*(o-1)+(n+63),_("gb18030"))),10===n&&(i=!1),null===s?l(r):s}return 126===n?(a=126,null):i?t(n,32,127)?(a=n,null):(10===n&&(i=!1),l(r)):t(n,0,127)?n:l(r)}}function T(e){var i=(e.fatal,!1);this.encode=function(e,a){var n=a.get();if(n===G)return z;if(a.offset(1),t(n,0,127)&&i)return a.offset(-1),i=!1,e.emit(126,125);if(126===n)return e.emit(126,126);if(t(n,0,127))return e.emit(n);if(!i)return a.offset(-1),i=!0,e.emit(126,123);var o=p(n,_("gb18030"));if(null===o)return u(n);var s=r(o,190)+1,l=o%190-63;return t(s,33,126)&&t(l,33,126)?e.emit(s,l):u(n)}}function E(e){var r=e.fatal,i=0,a=null;this.decode=function(e){if(null!==a){var n=a;return a=null,n}var o=e.get();if(o===z&&0===i)return G;if(o===z&&0!==i)return i=0,l(r);if(e.offset(1),0!==i){var s=i,u=null;i=0;var d=o<127?64:98;if((t(o,64,126)||t(o,161,254))&&(u=157*(s-129)+(o-d)),1133===u)return a=772,202;if(1135===u)return a=780,202;if(1164===u)return a=772,234;if(1166===u)return a=780,234;var p=null===u?null:c(u,_("big5"));return null===u&&e.offset(-1),null===p?l(r):p}return t(o,0,127)?o:t(o,129,254)?(i=o,null):l(r)}}function I(e){e.fatal;this.encode=function(e,i){var a=i.get();if(a===G)return z;if(i.offset(1),t(a,0,127))return e.emit(a);var n=p(a,_("big5"));if(null===n)return u(a);var o=r(n,157)+129,s=n%157,l=s<63?64:98;return e.emit(o,s+l)}}function S(e){var r=e.fatal,i=0,a=0;this.decode=function(e){var n=e.get();if(n===z)return 0===i&&0===a?G:(i=0,a=0,l(r));e.offset(1);var o,s;return 0!==a?(o=a,a=0,s=null,t(o,161,254)&&t(n,161,254)&&(s=c(94*(o-161)+n-161,_("jis0212"))),t(n,161,254)||e.offset(-1),null===s?l(r):s):142===i&&t(n,161,223)?(i=0,65377+n-161):143===i&&t(n,161,254)?(i=0,a=n,null):0!==i?(o=i,i=0,s=null,t(o,161,254)&&t(n,161,254)&&(s=c(94*(o-161)+n-161,_("jis0208"))),t(n,161,254)||e.offset(-1),null===s?l(r):s):t(n,0,127)?n:142===n||143===n||t(n,161,254)?(i=n,null):l(r)}}function R(e){e.fatal;this.encode=function(e,i){var a=i.get();if(a===G)return z;if(i.offset(1),t(a,0,127))return e.emit(a);if(165===a)return e.emit(92);if(8254===a)return e.emit(126);if(t(a,65377,65439))return e.emit(142,a-65377+161);var n=p(a,_("jis0208"));if(null===n)return u(a);var o=r(n,94)+161,s=n%94+161;return e.emit(o,s)}}function x(e){var r=e.fatal,i={ASCII:0,escape_start:1,escape_middle:2,escape_final:3,lead:4,trail:5,Katakana:6},a=i.ASCII,n=!1,o=0;this.decode=function(e){var s=e.get();switch(s!==z&&e.offset(1),a){default:case i.ASCII:return 27===s?(a=i.escape_start,null):t(s,0,127)?s:s===z?G:l(r);case i.escape_start:return 36===s||40===s?(o=s,a=i.escape_middle,null):(s!==z&&e.offset(-1),a=i.ASCII,l(r));case i.escape_middle:var u=o;return o=0,36!==u||64!==s&&66!==s?36===u&&40===s?(a=i.escape_final,null):40!==u||66!==s&&74!==s?40===u&&73===s?(a=i.Katakana,null):(s===z?e.offset(-1):e.offset(-2),a=i.ASCII,l(r)):(a=i.ASCII,null):(n=!1,a=i.lead,null);case i.escape_final:return 68===s?(n=!0,a=i.lead,null):(s===z?e.offset(-2):e.offset(-3),a=i.ASCII,l(r));case i.lead:return 10===s?(a=i.ASCII,l(r,10)):27===s?(a=i.escape_start,null):s===z?G:(o=s,a=i.trail,null);case i.trail:if(a=i.lead,s===z)return l(r);var d=null,p=94*(o-33)+s-33;return t(o,33,126)&&t(s,33,126)&&(d=!1===n?c(p,_("jis0208")):c(p,_("jis0212"))),null===d?l(r):d;case i.Katakana:return 27===s?(a=i.escape_start,null):t(s,33,95)?65377+s-33:s===z?G:l(r)}}}function L(e){var i=(e.fatal,{ASCII:0,lead:1,Katakana:2}),a=i.ASCII;this.encode=function(e,n){var o=n.get();if(o===G)return z;if(n.offset(1),(t(o,0,127)||165===o||8254===o)&&a!==i.ASCII)return n.offset(-1),a=i.ASCII,e.emit(27,40,66);if(t(o,0,127))return e.emit(o);if(165===o)return e.emit(92);if(8254===o)return e.emit(126);if(t(o,65377,65439)&&a!==i.Katakana)return n.offset(-1),a=i.Katakana,e.emit(27,40,73);if(t(o,65377,65439))return e.emit(o-65377-33);if(a!==i.lead)return n.offset(-1),a=i.lead,e.emit(27,36,66);var s=p(o,_("jis0208"));if(null===s)return u(o);var l=r(s,94)+33,d=s%94+33;return e.emit(l,d)}}function D(e){var r=e.fatal,i=0;this.decode=function(e){var a=e.get();if(a===z&&0===i)return G;if(a===z&&0!==i)return i=0,l(r);if(e.offset(1),0!==i){var n=i;if(i=0,t(a,64,126)||t(a,128,252)){var o=a<127?64:65,s=n<160?129:193,u=c(188*(n-s)+a-o,_("jis0208"));return null===u?l(r):u}return e.offset(-1),l(r)}return t(a,0,128)?a:t(a,161,223)?65377+a-161:t(a,129,159)||t(a,224,252)?(i=a,null):l(r)}}function M(e){e.fatal;this.encode=function(e,i){var a=i.get();if(a===G)return z;if(i.offset(1),t(a,0,128))return e.emit(a);if(165===a)return e.emit(92);if(8254===a)return e.emit(126);if(t(a,65377,65439))return e.emit(a-65377+161);var n=p(a,_("jis0208"));if(null===n)return u(a);var o=r(n,188),s=o<31?129:193,l=n%188,d=l<63?64:65;return e.emit(o+s,l+d)}}function P(e){var r=e.fatal,i=0;this.decode=function(e){var a=e.get();if(a===z&&0===i)return G;if(a===z&&0!==i)return i=0,l(r);if(e.offset(1),0!==i){var n=i,o=null;if(i=0,t(n,129,198)){var s=178*(n-129);t(a,65,90)?o=s+a-65:t(a,97,122)?o=s+26+a-97:t(a,129,254)&&(o=s+26+26+a-129)}t(n,199,253)&&t(a,161,254)&&(o=12460+94*(n-199)+(a-161));var u=null===o?null:c(o,_("euc-kr"));return null===o&&e.offset(-1),null===u?l(r):u}return t(a,0,127)?a:t(a,129,253)?(i=a,null):l(r)}}function O(e){e.fatal;this.encode=function(e,i){var a=i.get();if(a===G)return z;if(i.offset(1),t(a,0,127))return e.emit(a);var n=p(a,_("euc-kr"));if(null===n)return u(a);var o,s;if(n<12460){o=r(n,178)+129,s=n%178;var l=s<26?65:s<52?71:77;return e.emit(o,s+l)}return n-=12460,o=r(n,94)+199,s=n%94+161,e.emit(o,s)}}function N(e,r){var i=r.fatal,a=null,n=null;this.decode=function(r){var o=r.get();if(o===z&&null===a&&null===n)return G;if(o===z&&(null!==a||null!==n))return l(i);if(r.offset(1),null===a)return a=o,null;var s;if(s=e?(a<<8)+o:(o<<8)+a,a=null,null!==n){var u=n;return n=null,t(s,56320,57343)?65536+1024*(u-55296)+(s-56320):(r.offset(-2),l(i))}return t(s,55296,56319)?(n=s,null):t(s,56320,57343)?l(i):s}}function U(e,i){i.fatal;this.encode=function(i,a){function n(t){var r=t>>8,a=255&t;return e?i.emit(r,a):i.emit(a,r)}var o=a.get();if(o===G)return z;if(a.offset(1),t(o,55296,57343)&&u(o),o<=65535)return n(o);var s=r(o-65536,1024)+55296,l=(o-65536)%1024+56320;return n(s),n(l)}}function F(e){e.fatal;this.decode=function(e){var r=e.get();return r===z?G:(e.offset(1),t(r,0,127)?r:63360+r-128)}}function B(e,r){r.fatal;this.encode=function(e,r){var i=r.get();return i===G?z:(r.offset(1),t(i,0,127)?e.emit(i):t(i,63360,63487)?e.emit(i-63360+128):void u(i))}}var z=-1,G=-1;s.prototype=Error.prototype;var j=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"utf-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"ibm866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"iso-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"iso-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"iso-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"iso-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"iso-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"iso-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"iso-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"iso-8859-8-i"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"iso-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"iso-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"iso-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"iso-8859-15"},{labels:["iso-8859-16"],name:"iso-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"koi8-r"},{labels:["koi8-u"],name:"koi8-u"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb18030","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"gb18030"},{labels:["hz-gb-2312"],name:"hz-gb-2312"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"euc-jp"},{labels:["csiso2022jp","iso-2022-jp"],name:"iso-2022-jp"},{labels:["csshiftjis","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"shift_jis"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"euc-kr"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"utf-16be"},{labels:["utf-16","utf-16le"],name:"utf-16le"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],V={},H={};j.forEach(function(e){e.encodings.forEach(function(e){V[e.name]=e,e.labels.forEach(function(t){H[t]=e})})});var q="utf-8";m.prototype={decode:function(e,t){if(e&&!("buffer"in e&&"byteOffset"in e&&"byteLength"in e))throw new TypeError("Expected ArrayBufferView");e||(e=new Uint8Array(0)),t=Object(t),this._streaming||(this._decoder=this._encoding.getDecoder(this._options),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var r,a=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=new i(a),s=new o;n.get()!==z;)null!==(r=this._decoder.decode(n))&&r!==G&&s.emit(r);if(!this._streaming){do{null!==(r=this._decoder.decode(n))&&r!==G&&s.emit(r)}while(r!==G&&n.get()!=z);this._decoder=null}var l=s.string();return!this._BOMseen&&l.length&&(this._BOMseen=!0,-1!==["utf-8","utf-16le","utf-16be"].indexOf(this.encoding)&&65279===l.charCodeAt(0)&&(l=l.substring(1))),l}},g.prototype={encode:function(e,t){e=e?String(e):"",t=Object(t),this._streaming||(this._encoder=this._encoding.getEncoder(this._options)),this._streaming=Boolean(t.stream);for(var r=[],i=new a(r),o=new n(e);o.get()!==G;)this._encoder.encode(i,o);if(!this._streaming){var s;do{s=this._encoder.encode(i,o)}while(s!==z);this._encoder=null}return new Uint8Array(r)}},V["utf-8"].getEncoder=function(e){return new y(e)},V["utf-8"].getDecoder=function(e){return new v(e)},function(){"encoding-indexes"in e&&j.forEach(function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach(function(e){var t=_(e.name);e.getDecoder=function(e){return new A(t,e)},e.getEncoder=function(e){return new k(t,e)}})})}(),V.gb18030.getEncoder=function(e){return new w(e)},V.gb18030.getDecoder=function(e){return new b(e)},V["hz-gb-2312"].getEncoder=function(e){return new T(e)},V["hz-gb-2312"].getDecoder=function(e){return new C(e)},V.big5.getEncoder=function(e){return new I(e)},V.big5.getDecoder=function(e){return new E(e)},V["euc-jp"].getEncoder=function(e){return new R(e)},V["euc-jp"].getDecoder=function(e){return new S(e)},V["iso-2022-jp"].getEncoder=function(e){return new L(e)},V["iso-2022-jp"].getDecoder=function(e){return new x(e)},V.shift_jis.getEncoder=function(e){return new M(e)},V.shift_jis.getDecoder=function(e){return new D(e)},V["euc-kr"].getEncoder=function(e){return new O(e)},V["euc-kr"].getDecoder=function(e){return new P(e)},V["utf-16be"].getEncoder=function(e){return new U(!0,e)},V["utf-16be"].getDecoder=function(e){return new N(!0,e)},V["utf-16le"].getEncoder=function(e){return new U(!1,e)},V["utf-16le"].getDecoder=function(e){return new N(!1,e)},V["x-user-defined"].getEncoder=function(e){return new B(!1,e)},V["x-user-defined"].getDecoder=function(e){return new F(!1,e)},"TextEncoder"in e||(e.TextEncoder=g),"TextDecoder"in e||(e.TextDecoder=m)}(window),t.exports={}},{}],30:[function(e,t,r){var i,a,n,o,s,l,u,d,c,p,_,f,h=function(e,t){return function(){return e.apply(t,arguments)}},m=function(e,t){function r(){this.constructor=e}for(var i in t)g.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},g={}.hasOwnProperty,v=[].slice;_=e("fullscreen"),c=e("./shared/api.coffee"),f=e("./shared/utils.coffee"),d=e("./widgets/widget.coffee"),o=e("./core/settings.coffee"),n=e("./core/playlist.coffee"),u=e("./core/video.coffee"),s=e("./core/tracker.coffee"),i=e("./core/messenger.coffee"),p=e("./shared/debug.coffee"),e("./core/intersection-observer.js"),l=e("./core/ui.coffee"),a=function(t){function r(t,n,o){this.setCacheServerTimeout=h(this.setCacheServerTimeout,this),this.getTime=h(this.getTime,this),this.getDuration=h(this.getDuration,this),this.getState=h(this.getState,this),this.stopPlayback=h(this.stopPlayback,this),this.currentAdRemainingTime=h(this.currentAdRemainingTime,this),this.setDelayedOverlay=h(this.setDelayedOverlay,this),this.resumeAfterAd=h(this.resumeAfterAd,this),this.pauseForAd=h(this.pauseForAd,this),this.checkTestSpecial=h(this.checkTestSpecial,this),this.imaOriginalSource=h(this.imaOriginalSource,this),this.checkUtmSource=h(this.checkUtmSource,this),this.bigPlayButtonClick=h(this.bigPlayButtonClick,this),this._addUIEventHandlers=h(this._addUIEventHandlers,this),this.skipServer=h(this.skipServer,this),this.reloadMovie=h(this.reloadMovie,this),this.stopPlayingCheck=h(this.stopPlayingCheck,this),this.startPlayingCheck=h(this.startPlayingCheck,this),this.videoSeek=h(this.videoSeek,this),this.videoPause=h(this.videoPause,this),this.videoPlay=h(this.videoPlay,this),this.videoLoad=h(this.videoLoad,this),this._loadWithRemoteConfig=h(this._loadWithRemoteConfig,this),this._remoteInit=h(this._remoteInit,this),this.debugLogSettings=h(this.debugLogSettings,this);var s,_,m,g;_=f.merge(a,n),s=_.id,_.platform,g=_.visible,_.custom,this._initialized=!1,p.log("tvzavr html5 player v: "+d),r.__super__.constructor.call(this,"div","tvz-player",g),n.api&&(c._set_base_url(n.api),c._set_light(n.light),c._set_version(d)),this._core={},this._core.env=f.environment(),this._core.params=n,"iphone"===this._core.env&&(w=!1),this._core.ad=e("./core/ad.coffee"),this._core.stats=e("./shared/stats.coffee"),this._core.stats.init(n.special),this._core.stats.advPixel(),this.addClass("tvz-player__"+this._core.env),this._video=new u(t,"html5",this._core.env,!1,"",this._core.params.autoplay),this._wrapVideo(),this._addVideoEventHandlers(),this._ui=new l(s,this._core,this._video),this._ui.appendTo(this),this._ui.settings.on("qualitychange",function(e){return function(t){return p.log("player.qualitychange: "+t.quality),z=t.quality,e.seekedAtStart=!1,e.seekedAtStartPos=e._video.currentTime,e.stopPlayingCheck(),e._ui.setMode("movie",0,"loading"),e.startPlayback(null)}}(this)),this._ui.settings.on("audiotrackchange",function(e){return function(t){return p.log("player.audiotrackchange: "+t.audiotrack),E=t.audiotrack,e.seekedAtStart=!1,e.seekedAtStartPos=e._video.currentTime,e.stopPlayingCheck(),e._ui.setMode("movie",0,"loading"),e.startPlayback(null)}}(this)),this._ui.settings.on("subtitleschange",function(e){return function(t){return p.log("player.subtitleschange: "+t.subtitles),e._core.playlist._reloadSubtitles(t.subtitles)}}(this)),L=!!n.isTrailer,L||(L=!!this._core.params.trailer),this.contentError=0,this.contentErrorAfterTrailer=0,this._source.offsetWidth<ie&&this._source.setAttribute("data-scale","mini2"),this._source.offsetWidth>=ie&&this._source.offsetWidth<re&&this._source.setAttribute("data-scale","mini"),n.keepsilent||(this._messenger=new i),null!=(m=this._messenger)&&m.setPlayerHandlers({init:this._remoteInit,load:this._loadWithRemoteConfig,play:function(e){return function(){if(e._initialized)return e.startPreroll()}}(this),pause:this.videoPause,stop:this.stopPlayback,getState:this.getState,getDuration:this.getDuration,getTime:this.getTime}),this._core.params.src||this._core.ad.getSettings(),p.log("player ui color: "+this._core.params.color),this._core.params.color&&this._ui.setColor(this._core.params.color),p.addListener("skipserver",function(e){return function(){return e.skipServer()}}(this)),this.observerOptions={threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]};try{this.observer=new IntersectionObserver(M,this.observerOptions),this.observer.observe(this._source),this.observer.vaRaw=-1,this.observer.va=-1,this.observer.vaOpenVV=-1,this.observer.vaMRC=-1,this.observer.player=this}catch(e){e}this.checkAutoplayAvailability(this._source,function(e){return function(t){var r;return e._core.params.canAutoplay=t,(null!=(r=n.init)?r.wait:void 0)?e._cb=o:e._loadContent(n,o)}}(this))}var a,d,g,y,A,k,b,w,C,T,E,I,S,R,x,L,D,M,P,O,N,U,F,B,z,G,j,V,H,q,K,W,Y,Z,X,Q,J,$,ee,te,re,ie;return m(r,t),a={visible:!0},{},d="1.7.1",T=!1,{},{},O=!1,S=!1,te=!1,C=!1,!1,B=!1,F=!1,re=700,ie=450,N=!1,U=0,Z=-1,R=!1,J=!1,D={},!1,-1,X=!1,Q=!0,{},Y=-1,W=-1,V=-1,q=-1,H=-1,K=0,j=0,G=0,!1,z="ABTO",E=null,ee=!1,$={},I={},L=!1,k=!1,b=0,g=!1,x=!1,P=!1,y=!0,!0,A=!0,w=!0,r.prototype.debugLogSettings=function(){return p.log(" "),p.log("params"),p.data(this._core.params,2,2),p.log(" "),p.log("settings"),p.data(this._core.settings,2,2),p.log(" "),p.log("nowPlaying"),p.data(this._core.playlist.nowPlaying,2,2),p.log(" ")},M=function(e,t){var r;p.log("player.observerCallback"),r=this,e.forEach(function(e){var i,a,n,o,s;for(i=e.intersectionRatio,r.vaMRC<1&&(r.vaMRCtimer&&i<.5&&(clearTimeout(r.vaMRCtimer),r.vaMRCtimer=null,p.log("player.observerCallback viewabilityMRCtimer Cleared")),!r.vaMRCtimer&&i>=.5&&0===r.vaMRC&&(p.log("player.observerCallback viewabilityMRCtimer Charged 1"),ee&&(ee=!1,clearTimeout($),t.player._core.ads.start()),r.vaMRCtimer=f.timeout(2e3,function(e){return function(){if(clearTimeout(t.vaMRCtimer),t.vaMRCtimer=null,p.log("player.observerCallback viewabilityMRCtimer Completed 1"),t.vaMRC=1,T)return t.player._sendAdStats(D.blocktype,D.adcount,"mrc1",D.guid)}}()))),r.vaRaw=e.intersectionRatio,o=[0,.25,.5,.75,1],s=o[o.length-1],a=0;a<o.length-1;)i>=o[a]&&i<o[a+1]&&(s=o[a]),a++;r.va=Math.round(100*s),1!==(n=t.player._core.params.canAutoplay)&&2!==n||"1"===t.player._core.params.adpaused&&0===s&&T&&(p.log("player.observerCallback need pause advert"),t.player._core.ads.pause())})},Object.defineProperties(r.prototype,{version:{get:function(){return d}}}),r.prototype._remoteInit=function(){var e;return null!=(e=this._video)?e.setState("initialized"):void 0},r.prototype._loadWithRemoteConfig=function(){var e,t;return 1<=arguments.length?v.call(arguments,0):[],t=arguments[0],t&&"object"==typeof t?(e=f.merge(a,t),e.id,e.platform,e.visible,this._loadContent(t)):void("undefined"!=typeof console&&console)},r.prototype._loadContent=function(e,t){var r,i;if(null==t&&(t=this._cb),p.log("player._loadContent"),this._settings=e,e.custom&&(this._custom_settings=e.custom,this._custom_settings.cb=t,c[this._custom_settings.setup](this._settings),(null!=(r=this._custom_settings)&&null!=(i=r.triggers)?i.disconnect:void 0)&&(this[this._custom_settings.triggers.disconnect]=function(e){return null==e&&(e=this._settings),this._loadContent(e,this._custom_settings.cb)})),!this._loadContentTimeout)return this._loadContentTimeout=f.timeout(1e3,function(e){return function(){return clearTimeout(e._loadContentTimeout),e._loadContentTimeout=null}}(this)),this._loadContent2(e,t)},r.prototype._loadContent2=function(t,r){var i,a,n,o;return null==r&&(r=this._cb),p.log("player._loadContent2"),a=t.platform,i=t.id,n=t.salias,o=t.src,B=!1,F=!1,this._addUIEventHandlers(),this._fs=_(this._source),this._fs.on("error",function(e){return function(){return p.log("player FULLSCREEN error")}}()),this._fs.on("attain",function(e){return function(){return e._setFullscreen(!0)}}(this)),this._fs.on("release",function(e){return function(){return e._setFullscreen(!1)}}(this)),this._core.ads=e("./core/ads.js"),this._getSettings(a,function(e){return function(){return 1===e._core.params.autoplay&&1===e._core.params.canAutoplay&&(e._video._source.muted=!0,e._core.settings.saveValue("muted",!0),e._ui.volumeButtonIcon.setState("volume-off")),
e._core.ads.init(e._video,e,e._core.env,e._core.ad.getDl(e._core.params.dl,e._core.settings.location.country),e.imaOriginalSource(),function(s){return null==s&&(s=!1),c.getIdBySeoAlias(i,n,function(n,l){var u,_;return n?o?(e._core.playlist={},e._core.playlist.nowPlaying={},e._core.playlist.nowPlaying.model="avod",e._core.playlist.nowPlaying.url=o,null!=(u=e._video)&&u.setState("ready"),e._initialized=!0,1!==e._core.params.autoplay||1!==(_=e._core.params.canAutoplay)&&2!==_?e._ui.setMode("poster"):e.startPlayback(),p.log("callback 1"),"function"==typeof r?r():void 0):(e._ui.setMode("error"),e.sendPostMessage({event:"error",time:e._video.currentTime,code:"0"}),void("undefined"!=typeof console&&console)):(e._ui.poster.set(l),t.id=l,i=l,e._getMovieInfo(i,a,function(t,i){var a,n,o,l,u,_,f;if(t){if((null!=(n=e._custom_settings)&&null!=(o=n.triggers)?o.code:void 0)!==t||!i)return"undefined"!=typeof console&&console,null!=(u=e._custom_settings)&&(u.enabled=!1),p.log("player content error: "+t),1===e._core.params.prerollanyway||1===e._core.params.showpreroll?(p.log("player show preroll by settings"),e._prepareAdvertUrls(),e._playPreroll()):(e._ui.setMode("error",t),e.sendPostMessage({event:"error",time:e._video.currentTime,code:"0"}));try{return e._custom_settings.enabled=!0,a=null!=(l=e._custom_settings.triggers)?l.connect:void 0,"undefined"!=typeof console&&console,window[a](i)}catch(t){t,"undefined"!=typeof console&&console,e._custom_settings.enabled=!1,e._ui.setMode("error"),e.sendPostMessage({event:"error",time:e._video.currentTime,code:"0"})}}else if(p.log("player model: "+e._core.playlist.nowPlaying.model),"avod"===e._core.playlist.nowPlaying.model&&(c.checkProxy(function(e){return y=e}),A&&s&&!k&&(k=!0)),e._prepareAdvertUrls(),null!=(_=e._video)&&_.setState("ready"),e._initialized=!0,e.sendToLogArea("player ready, ver "+d),null!=window.playerEvent&&window.playerEvent({action:"init"}),e.addPostMessageListeners(),e.sendPostMessage({event:"inited"}),1===e._core.params.autoplay&&(1===(f=e._core.params.canAutoplay)||2===f)||e.seekedAtStartPos>0?(T||"adloading"===e._ui.mode||e._ui.setMode("movie",0,"loading"),e.startPlayback()):T||e._ui.setMode("poster"),p.log("callback 2"),"function"==typeof r)return r()}))})})}}(this))},r.prototype._prepareAdvertUrls=function(){var e,t,r,i,a,n,o,s,l,u,d,c;switch("advid"===this._core.params.special&&this._ui.tvzavrLogo.setState("advid"),this._core.playlist.nowPlaying,this._core.settings.location.country){case"test":this.adUrls={preroll_limit:4,preroll_1:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxrr",preroll_2:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxrs",preroll_3:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxru",preroll_4:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxrv",preroll_5:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxrw",preroll_6:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fibzy",preroll_7:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fibzz",preroll_8:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsd",preroll_9:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsf",preroll_10:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsi",preroll_11:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsj",preroll_12:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsk",preroll_13:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxrr",preroll_14:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxrs",preroll_15:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxru",preroll_16:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxrv",preroll_17:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fhxrw",preroll_18:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fibzy",preroll_19:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtpr&pfb=fibzz",preroll_20:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsd",preroll_21:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsf",preroll_22:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsi",preroll_23:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsj",preroll_24:"//ads.adfox.ru/264344/getCode?p1=bzogl&p2=fuva&pfc=brtqb&pfb=fhxsk"};break;case"UA":switch(this._core.settings.platform){case"and":case" ios":this.adUrls={preroll_limit:2,preroll:[["//ads.adfox.me/228958/getCode?p1=cblks&p2=garm","//ads.adfox.me/228958/getCode?p1=cblky&p2=garm","//ads.adfox.me/228958/getCode?p1=cblle&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllk&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllq&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllw&p2=garm","//ads.adfox.me/228958/getCode?p1=cblmc&p2=garm"],["//ads.adfox.me/228958/getCode?p1=cblkt&p2=garm","//ads.adfox.me/228958/getCode?p1=cblkz&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllf&p2=garm","//ads.adfox.me/228958/getCode?p1=cblll&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllr&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllx&p2=garm","//ads.adfox.me/228958/getCode?p1=cblmd&p2=garm"]],midroll_limit:1,midroll:[["//ads.adfox.me/228958/getCode?p1=cblko&p2=garm","//ads.adfox.me/228958/getCode?p1=cblku&p2=garm","//ads.adfox.me/228958/getCode?p1=cblla&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllg&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllm&p2=garm","//ads.adfox.me/228958/getCode?p1=cblls&p2=garm","//ads.adfox.me/228958/getCode?p1=cblly&p2=garm"]],pausebanner_limit:1,pausebanner:[],pauseroll_limit:1,pauseroll:[["//ads.adfox.me/228958/getCode?p1=cbliz&p2=garm","//ads.adfox.me/228958/getCode?p1=cbljf&p2=garm","//ads.adfox.me/228958/getCode?p1=cbljl&p2=garm","//ads.adfox.me/228958/getCode?p1=cbljr&p2=garm","//ads.adfox.me/228958/getCode?p1=cbljx&p2=garm","//ads.adfox.me/228958/getCode?p1=cblkd&p2=garm","//ads.adfox.me/228958/getCode?p1=cblkj&p2=garm"]],postroll_limit:2,postroll:[["//ads.adfox.me/228958/getCode?p1=cblkp&p2=garm","//ads.adfox.me/228958/getCode?p1=cblkv&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllb&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllh&p2=garm","//ads.adfox.me/228958/getCode?p1=cblln&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllt&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllz&p2=garm"],["//ads.adfox.me/228958/getCode?p1=cblkr&p2=garm","//ads.adfox.me/228958/getCode?p1=cblkx&p2=garm","//ads.adfox.me/228958/getCode?p1=cblld&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllj&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllp&p2=garm","//ads.adfox.me/228958/getCode?p1=cbllv&p2=garm","//ads.adfox.me/228958/getCode?p1=cblmb&p2=garm"]]};break;case"smp":case"lgn":case"sce":this.adUrls={preroll_limit:3,preroll:[["//ads.adfox.me/228958/getCode?p1=cblbh&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbo&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbv&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcc&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcj&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcq&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcx&p2=garm"],["//ads.adfox.me/228958/getCode?p1=cblbi&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbp&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbw&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcd&p2=garm","//ads.adfox.me/228958/getCode?p1=cblck&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcr&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcy&p2=garm"],["//ads.adfox.me/228958/getCode?p1=cblbj&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbq&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbx&p2=garm","//ads.adfox.me/228958/getCode?p1=cblce&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcl&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcs&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcz&p2=garm"]],midroll_limit:1,midroll:[["//ads.adfox.me/228958/getCode?p1=cblbd&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbk&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbr&p2=garm","//ads.adfox.me/228958/getCode?p1=cblby&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcf&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcm&p2=garm","//ads.adfox.me/228958/getCode?p1=cblct&p2=garm"]],pausebanner_limit:1,pausebanner:[],pauseroll_limit:1,pauseroll:[["//ads.adfox.me/228958/getCode?p1=cblbe&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbl&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbs&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbz&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcg&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcn&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcu&p2=garm"]],postroll_limit:2,postroll:[["//ads.adfox.me/228958/getCode?p1=cblbf&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbm&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbt&p2=garm","//ads.adfox.me/228958/getCode?p1=cblca&p2=garm","//ads.adfox.me/228958/getCode?p1=cblch&p2=garm","//ads.adfox.me/228958/getCode?p1=cblco&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcv&p2=garm"],["//ads.adfox.me/228958/getCode?p1=cblbg&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbn&p2=garm","//ads.adfox.me/228958/getCode?p1=cblbu&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcb&p2=garm","//ads.adfox.me/228958/getCode?p1=cblci&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcp&p2=garm","//ads.adfox.me/228958/getCode?p1=cblcw&p2=garm"]]};break;default:this.adUrls={preroll_limit:4,preroll:[["//ads.adfox.me/228958/getCode?p1=cbiwx&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiwz&p2=garm","//ads.adfox.me/228958/getCode?p1=cbixb&p2=garm","//ads.adfox.me/228958/getCode?p1=cbixc&p2=garm","//ads.adfox.me/228958/getCode?p1=cbixe&p2=garm","//ads.adfox.me/228958/getCode?p1=cbixk&p2=garm","//ads.adfox.me/228958/getCode?p1=cbixl&p2=garm"],["//ads.adfox.me/228958/getCode?p1=cbiyl&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyo&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyr&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyu&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyx&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiza&p2=garm","//ads.adfox.me/228958/getCode?p1=cbizd&p2=garm"],["//ads.adfox.me/228958/getCode?p1=cbiym&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyp&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiys&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyv&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyy&p2=garm","//ads.adfox.me/228958/getCode?p1=cbizb&p2=garm","//ads.adfox.me/228958/getCode?p1=cbize&p2=garm"],["//ads.adfox.me/228958/getCode?p1=cbiyn&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyq&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyt&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyw&p2=garm","//ads.adfox.me/228958/getCode?p1=cbiyz&p2=garm","//ads.adfox.me/228958/getCode?p1=cbizc&p2=garm","//ads.adfox.me/228958/getCode?p1=cbizf&p2=garm"]],midroll_limit:1,midroll:[["//ads.adfox.me/228958/getCode?p1=cbklz&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmd&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmh&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkml&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmp&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmt&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmx&p2=garm"]],pausebanner_limit:1,pausebanner:[],pauseroll_limit:1,pauseroll:[["//ads.adfox.me/228958/getCode?p1=cbkma&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkme&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmi&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmm&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmq&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmu&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmy&p2=garm"]],postroll_limit:2,postroll:[["//ads.adfox.me/228958/getCode?p1=cbkmb&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmf&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmj&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmn&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmr&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmv&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmz&p2=garm"],["//ads.adfox.me/228958/getCode?p1=cbkmc&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmg&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmk&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmo&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkms&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkmw&p2=garm","//ads.adfox.me/228958/getCode?p1=cbkna&p2=garm"]]}}break;case"BY":case"MD":this.adUrls={preroll_limit:4,preroll:[["//ads.adfox.ru/228958/getCode?p1=cbknd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknl&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknt&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkob&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkor&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoz&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbkni&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkny&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkog&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoo&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkow&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpe&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbknj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknr&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoh&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkop&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkox&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpf&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbknk&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkns&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoa&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoi&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoy&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpg&p2=garm"]],midroll_limit:1,midroll:[["//ads.adfox.ru/228958/getCode?p1=cbkne&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknu&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkok&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkos&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpa&p2=garm"]],pausebanner_limit:1,pausebanner:[],pauseroll_limit:1,pauseroll:[["//ads.adfox.ru/228958/getCode?p1=cbknf&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknn&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkod&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkol&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkot&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpb&p2=garm"]],postroll_limit:2,postroll:[["//ads.adfox.ru/228958/getCode?p1=cbkng&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkno&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknw&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkoe&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkom&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkou&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpc&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbknh&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknp&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbknx&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkof&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkon&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkov&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpd&p2=garm"]]};break;case"KZ":this.adUrls={preroll_limit:4,preroll:[["//ads.adfox.ru/228958/getCode?p1=cbkpl&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpt&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqb&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqr&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrh&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbkpq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpy&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqo&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqw&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkre&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrm&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbkpr&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqh&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqp&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqx&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrf&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrn&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbkps&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqa&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqi&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqy&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkro&p2=garm"]],midroll_limit:1,midroll:[["//ads.adfox.ru/228958/getCode?p1=cbkpm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpu&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqk&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqs&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkra&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkri&p2=garm"]],pausebanner_limit:1,pausebanner:[],pauseroll_limit:1,pauseroll:[["//ads.adfox.ru/228958/getCode?p1=cbkpn&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkql&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqt&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrb&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrj&p2=garm"]],postroll_limit:2,postroll:[["//ads.adfox.ru/228958/getCode?p1=cbkpo&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpw&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqe&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqu&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrk&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbkpp&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkpx&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqf&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqn&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkqv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkrl&p2=garm"]]};break;case"LV":case"LT":case"EE":this.adUrls={preroll_limit:4,preroll:[["//ads.adfox.ru/228958/getCode?p1=cbksd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksu&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktl&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktt&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkuc&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbkse&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksn&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktu&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkud&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbksf&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkso&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksw&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktf&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktn&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkue&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbksg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksp&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksx&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkto&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktw&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkuf&p2=garm"]],midroll_limit:1,midroll:[["//ads.adfox.ru/228958/getCode?p1=cbkrz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksi&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkth&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktp&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkty&p2=garm"]],pausebanner_limit:1,pausebanner:[],pauseroll_limit:1,pauseroll:[["//ads.adfox.ru/228958/getCode?p1=cbksa&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksr&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkta&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkti&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktz&p2=garm"]],postroll_limit:2,postroll:[["//ads.adfox.ru/228958/getCode?p1=cbksb&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksk&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkss&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktb&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktr&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkua&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbksc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbksl&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkst&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbktk&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkts&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkub&p2=garm"]]};break;default:switch(this._core.settings.platform){case"and":case" ios":this.adUrls={preroll_limit:2,preroll:[["//ads.adfox.ru/228958/getCode?p1=cbljc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblji&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljo&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblju&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblka&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkm&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbljd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljp&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkb&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkh&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkn&p2=garm"]],midroll_limit:1,midroll:[["//ads.adfox.ru/228958/getCode?p1=cbliy&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblje&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljk&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljw&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblki&p2=garm"]],pausebanner_limit:1,pausebanner:[],pauseroll_limit:1,pauseroll:[["//ads.adfox.ru/228958/getCode?p1=cbliz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljf&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljl&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljr&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljx&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkj&p2=garm"]],postroll_limit:2,postroll:[["//ads.adfox.ru/228958/getCode?p1=cblja&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljs&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljy&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblke&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkk&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbljb&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljh&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljn&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljt&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbljz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkf&p2=garm","//ads.adfox.ru/228958/getCode?p1=cblkl&p2=garm"]]};break;case"smp":case"lgn":case"sce":this.adUrls={preroll_limit:3,preroll:[["//ads.adfox.ru/228958/getCode?p1=cbkvw&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwe&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwu&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxk&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxs&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbkvx&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwf&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwn&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxl&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxt&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbkvy&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwo&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkww&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxe&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxu&p2=garm"]],midroll_limit:1,midroll:[["//ads.adfox.ru/228958/getCode?p1=cbkvs&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwa&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwi&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwy&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxo&p2=garm"]],pausebanner_limit:1,pausebanner:[],pauseroll_limit:1,pauseroll:[["//ads.adfox.ru/228958/getCode?p1=cbkvt&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwb&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwr&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxh&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxp&p2=garm"]],postroll_limit:2,postroll:[["//ads.adfox.ru/228958/getCode?p1=cbkvu&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwk&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkws&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxa&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxi&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxq&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbkvv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwl&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkwt&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxb&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbkxr&p2=garm"]]};break;default:this.adUrls={preroll_limit:4,preroll:[["//ads.adfox.ru/228958/getCode?p1=cbixg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixu&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiyd&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiyh&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbixh&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixn&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixr&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiya&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiye&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiyi&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbixi&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixo&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixs&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixw&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiyb&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiyf&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiyj&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbixj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixp&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixt&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbixx&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiyc&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiyg&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbiyk&p2=garm"]],midroll_limit:1,midroll:[["//ads.adfox.ru/228958/getCode?p1=cbizh&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizl&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizp&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizt&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizx&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbjab&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbjaf&p2=garm"]],pausebanner_limit:1,pausebanner:[],pauseroll_limit:1,pauseroll:[["//ads.adfox.ru/228958/getCode?p1=cbizi&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizm&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizq&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizu&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizy&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbjac&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbjag&p2=garm"]],postroll_limit:2,postroll:[["//ads.adfox.ru/228958/getCode?p1=cbizj&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizn&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizr&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizv&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizz&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbjad&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbjah&p2=garm"],["//ads.adfox.ru/228958/getCode?p1=cbizk&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizo&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizs&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbizw&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbjaa&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbjae&p2=garm","//ads.adfox.ru/228958/getCode?p1=cbjai&p2=garm"]],actionroll_limit:1,actionroll:["//ads.adfox.ru/228958/getCode?p1=cbtcz&p2=garm"]}}}if("avod"!==this._core.playlist.nowPlaying.model&&(this.adUrls={preroll_limit:4,preroll:[""],pausebanner_limit:1,pausebanner:[""],pauseroll_limit:1,pauseroll:[""],midroll_limit:1,midroll:[""],postroll_limit:2,postroll:[""],actionroll_limit:1,actionroll:[""]}),"yavideo"===this._core.params.special&&(this.adUrls={preroll_limit:1,preroll:["//an.yandex.ru/meta/148309?imp-id=4&charset=UTF-8&target-ref=http%3A%2F%2Fwww.tvzavr.ru%2F&page-ref=http%3A%2F%2Fwww.tvzavr.ru%2F&rnd="+Math.floor(429496729*Math.random())],pauseroll_limit:1,pauseroll:[""],pausebanner_limit:1,pausebanner:[""],midroll_limit:1,midroll:["//an.yandex.ru/meta/148309?imp-id=5&charset=UTF-8&target-ref=http%3A%2F%2Fwww.tvzavr.ru%2F&page-ref=http%3A%2F%2Fwww.tvzavr.ru%2F&rnd="+Math.floor(429496729*Math.random())],postroll_limit:1,postroll:["//an.yandex.ru/meta/148309?imp-id=6&charset=UTF-8&target-ref=http%3A%2F%2Fwww.tvzavr.ru%2F&page-ref=http%3A%2F%2Fwww.tvzavr.ru%2F&rnd="+Math.floor(429496729*Math.random())]}),"adtest"===this._core.params.special&&(a=document.getElementById("preroll1"),n=document.getElementById("preroll2"),o=document.getElementById("preroll3"),s=document.getElementById("preroll4"),e=document.getElementById("midroll1"),t=document.getElementById("midrollfreq"),r=document.getElementById("pauseroll1"),i=document.getElementById("postroll1"),document.getElementById("postroll2"),c=[],a&&c.push(a.value),n&&c.push(n.value),o&&c.push(o.value),s&&c.push(s.value),l=[],e&&l.push(e.value),t&&(this._core.settings.midroll=t.value),u=[],r&&u.push(r.value),d=[],i&&d.push(i.value),i&&d.push(i.value),0===c.length&&(c=[""]),0===l.length&&(l=[""]),0===u.length&&(u=[""]),0===d.length&&(d=[""]),this.adUrls={preroll_limit:99,preroll:c,pauseroll_limit:99,pauseroll:u,pausebanner_limit:99,pausebanner:[""],midroll_limit:99,midroll:l,postroll_limit:99,postroll:d}),"adtest_mp4"===this._core.params.special&&(this.adUrls={preroll_limit:4,preroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4_1.xml"],pausebanner_limit:4,pausebanner:[""],pauseroll_limit:4,pauseroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4_3.xml"],midroll_limit:4,midroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4_4.xml"],postroll_limit:4,postroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4_5.xml"],actionroll_limit:1,actionroll:[""]}),"adtest_imho"===this._core.params.special&&(this.adUrls={preroll_limit:4,preroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4_delayed_overlay.xml"],pausebanner_limit:4,pausebanner:[""],pauseroll_limit:4,pauseroll:[""],midroll_limit:4,midroll:[""],postroll_limit:4,postroll:[""],actionroll_limit:1,actionroll:[""]}),"adtest_imho2"===this._core.params.special&&(this.adUrls={preroll_limit:4,preroll:["//staging.tvzavr.ru/dev/vpaid/ad_overlay.xml"],pausebanner_limit:4,pausebanner:[""],pauseroll_limit:4,pauseroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4_3.xml"],midroll_limit:4,midroll:[""],postroll_limit:4,postroll:[""],actionroll_limit:1,actionroll:[""]}),"adtest_noad"===this._core.params.special&&(this.adUrls={
preroll_limit:4,preroll:[""],pausebanner_limit:4,pausebanner:[""],pauseroll_limit:4,pauseroll:[""],midroll_limit:4,midroll:[""],postroll_limit:4,postroll:[""],actionroll_limit:1,actionroll:[""]}),"adtest_vpaid"===this._core.params.special&&(this.adUrls={preroll_limit:4,preroll:["//staging.tvzavr.ru/dev/vpaid/ad_vpaid.xml"],pausebanner_limit:4,pausebanner:[""],pauseroll_limit:4,pauseroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4.xml"],midroll_limit:4,midroll:[""],postroll_limit:4,postroll:[""]}),"adtest_vpaid_trouble"===this._core.params.special&&(this.adUrls={preroll_limit:4,preroll:["//staging.tvzavr.ru/dev/vpaid/ad_vpaid_trouble.xml"],pausebanner_limit:4,pausebanner:[""],pauseroll_limit:4,pauseroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4.xml"],midroll_limit:4,midroll:[""],postroll_limit:4,postroll:[""]}),"adtest_vpaid_mp4"===this._core.params.special&&(this.adUrls={preroll_limit:4,preroll:["//staging.tvzavr.ru/dev/vpaid/ad_vpaid.xml","//staging.tvzavr.ru/dev/vpaid/ad_mp4.xml"],pausebanner_limit:4,pausebanner:[""],pauseroll_limit:4,pauseroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4.xml"],midroll_limit:4,midroll:[""],postroll_limit:4,postroll:[""]}),"adtest_mp4_vpaid"===this._core.params.special&&(this.adUrls={preroll_limit:4,preroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4.xml","//staging.tvzavr.ru/dev/vpaid/ad_vpaid.xml"],pausebanner_limit:4,pausebanner:[""],pauseroll_limit:4,pauseroll:["//staging.tvzavr.ru/dev/vpaid/ad_mp4.xml"],midroll_limit:4,midroll:[""],postroll_limit:4,postroll:[""]}),"adtest_error"===this._core.params.special)return this.adUrls={preroll_limit:4,preroll:["//staging.tvzavr.ru/dev/vpaid/ad_error2.xml"],pausebanner_limit:4,pausebanner:[""],pauseroll_limit:4,pauseroll:[""],midroll_limit:4,midroll:[""],postroll_limit:4,postroll:[""]}},r.prototype._wrapVideo=function(){var e;return e=this._video._source.parentNode,e.insertBefore(this._source,this._video._source),this._source.appendChild(this._video._source),this._source.setAttribute("id",this._video._source.id),this._video._source.removeAttribute("id")},r.prototype.videoLoad=function(){return this._video.load()},r.prototype.videoPlay=function(){return this.startPlayingCheck(),this._video.play()},r.prototype.videoPause=function(){return this.stopPlayingCheck(),this._video.pause()},r.prototype.videoSeek=function(e){return this._ui.loadingIndicator.show(),X=!0,this.stopPlayingCheck(),this._video.seek(e)},r.prototype._addVideoEventHandlers=function(){return this._video.on("stalled",function(e){return function(){return p.log("video stalled")}}()),this._video.on("waiting",function(e){return function(){return p.log("video waiting video state: "+e._video.state),te=!0}}(this)),this._video.on("webkitendfullscreen",function(e){return function(e){if(p.log("player webkitendfullscreen"),!(document.fullScreenElement||!0===document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement))return p.log("player fullscreen was closed ipad")}}()),this._video.on("statechange",function(e){return function(t){var r;if(null!=t?t.state:void 0)return null!=(r=e._messenger)?r.onStateChange(t.state):void 0}}(this)),this._video.on("loadstart",function(e){return function(){}}()),this._video.on("loadedmetadata",function(e){return function(t){if(!B&&(B=!0,w&&(p.log("player loadedmetadata preroll 1"),!e.playAds("preroll")&&(e._ui.setMode("movie",0,"playing"),e._showControls(),p.log("############# _video.play 1"),e.videoPlay(),"default"===e._core.env&&e.setMidroll(),!N))))return N=!0,p.log("player loadedmetadata nobanner"),null!=window.playerEvent&&window.playerEvent({action:"nobanner"}),p.log("videostart 5"),null!=window.playerEvent&&window.playerEvent({action:"videostart"}),e.sendPostMessage({event:"started",duration:Math.round(e._video.duration)})}}(this)),this._video.on("durationchange",function(e){return function(t){var r;if(p.log("durationchange",t.target.duration),0===(r=t.target.duration)||Infinity===r?e._core.playlist.nowPlaying.duration?e._ui.setDuration(60*e._core.playlist.nowPlaying.duration):e._ui.setDuration(0):e._ui.setDuration(t.target.duration),!e._core.tracker&&Infinity!==t.target.duration)return e._createStatTracker()}}(this)),this._video.on("readytoplay",function(e){return function(t){var r;if(p.log("readytoplay"),e.seekedAtStart?p.log(" ",!0):(e.seekedAtStartPos>=0?(r=e.seekedAtStartPos,e.seekedAtStartPos=-1):L||e._core.playlist.nowPlaying.progress&&(r=e._core.playlist.nowPlaying.progress.position),p.log(" ",!1,r),r>0&&(e.seekedAtStart=!0,e.sendPostMessage({event:"rewound",time:Math.floor(r,{previousTime:e._video.currentTime})}),p.log("####### seek 0"),e.videoSeek(Math.floor(r)))),T||"adloading"===e._ui.mode)return p.log("############# _video.pause 2"),e.videoPause()}}(this)),this._video.on("timeupdate",function(e){return function(t){var r,i,a,n,o;if(o=t.target.currentTime,e._scrubbing||e._ui.setCurrentTime(o),e._scrubbing||(Z=-1),e._core.tracker&&"movie"===e._ui.mode&&e._core.tracker.setCurrent(o),null!=(a=e._messenger)&&a.onTimeChange(o),e.sendPostMessage({event:"timeupdate",time:e._video.currentTime,duration:Math.round(e._video.duration)}),1!==(n=e._core.params.canAutoplay)&&2!==n||(r=f.formatTime(o),(i=e._core.playlist.nowPlaying.actionroll.indexOf(r))>-1&&(e._core.playlist.nowPlaying.actionroll.splice(i,1),e.playAds("actionroll"))),w&&!L&&"default"===e._core.env)if(t.target.duration>900){if(Math.round(o)>t.target.duration-600&&!F)return F=!0,e.playAds("postroll")}else if(t.target.duration>600){if(Math.round(o)>t.target.duration-300&&!F)return F=!0,e.playAds("postroll")}else if(t.target.duration>300&&Math.round(o)>t.target.duration-150&&!F)return F=!0,e.playAds("postroll")}}(this)),this._video.once("playing",function(e){return function(){if(!w)return e._ui.setMode("movie",0,"playing")}}(this)),this._video.on("seeked",function(e){return function(){if(p.log("seeked"),X&&("adloading"!==e._ui.mode&&e._ui.loadingIndicator.hide(),X=!1,!T))return O?("movie"===e._ui.mode&&"paused"===e._ui.state||"adloading"!==e._ui.mode&&(e._ui.setMode("movie",0,"paused"),e._showControls()),e.videoPause()):("movie"===e._ui.mode&&"playing"===e._ui.state||"adloading"!==e._ui.mode&&(e._ui.setMode("movie",0,"playing"),e._showControls()),Q?e.videoPlay():Q=!0)}}(this)),this._video.on("playing",function(e){return function(){if(p.log("playing"),e.stalled=!1,te=!1,I.started&&(e.sendPostMessage({event:"started",duration:Math.round(e._video.duration)}),I.started=!1),I.resumed&&(e.sendPostMessage({event:"resumed",time:e._video.currentTime,duration:Math.round(e._video.duration)}),I.resumed=!1),J||(J=!0,e._core.stats.tnsMetrix(),e.sendToLogArea("player video start")),e._ui.loadingIndicator.hide(),e._video.show(),k&&!g&&(g=!0,f.timeout(1e3,function(){return e._ui.adBlockButton.show()})),e._core.tracker&&e._core.tracker.start(),"iphone"===e._core.env&&R&&(e.startPlayingCheck(),!T))return e._ui.setMode("movie",0,"playing"),O=!1,e._showControls()}}(this)),this._video.on("buffering_end",function(e){return function(t){var r;return r=t.value,r<4&&(t.event="buffering_1-3"),r>=4&&r<11&&(t.event="buffering_4-10"),r>=11&&r<21&&(t.event="buffering_11-20"),r>=21&&r<51&&(t.event="buffering_21-50"),r>=51&&(t.event="buffering_51"),e._sendVideoStats(t)}}(this)),this._video.on("pause",function(e){return function(){if(e._saveProgress(e._video.currentTime),e._core.tracker&&e._core.tracker.pause(),e.sendPostMessage({event:"paused",time:e._video.currentTime}),I.resumed=!0,"iphone"===e._core.env&&R&&(e.stopPlayingCheck(),!T))return e._ui.setMode("movie",0,"paused"),O=!0,e._showControls()}}(this)),this._video.on("seeking",function(e){return function(){var t;if(e._ui.setWorking(!0),null!=(t=e._messenger)&&t.onBuffering(),"movie"===e._ui.mode&&e._core.tracker)return e._core.tracker.pause()}}(this)),this._video.on("seekEnd",function(e){return function(){var t;if(te=!1,e._ui.setWorking(!1),null!=(t=e._messenger)&&t.onBuffered(),"movie"===e._ui.mode&&e._core.tracker&&!O)return e._core.tracker.start()}}(this)),this._video.on("buffering",function(e){return function(t){return p.log("############################# buffering1"),e._ui.setWorking(!0)}}(this)),this._video.once("readytoplay",function(e){return function(t){return e._core.stats.instreamaticPixel()}}(this)),this._video.on("ended",function(e){return function(){if(!T){if(p.log("player video.on ended"),e.stopPlayingCheck(),e.sendToLogArea("player video end"),clearTimeout(e._midrollTimeout),p.log("player event videoend"),null!=window.playerEvent&&window.playerEvent({action:"videoend"}),e.sendPostMessage({event:"ended",time:Math.round(e._video.currentTime)}),0!==e.contentErrorAfterTrailer)return e._ui.setMode("error",e.contentErrorAfterTrailer),e.sendPostMessage({event:"error",time:e._video.currentTime,code:"0"});if(e._ui.setCurrentTime(0),e._ui.playButtonIcon.setState("paused"),e._ui.bigPlayButton.setState("paused"),e._ui.bigPlayButton.show(),p.log("pauseState sets true 1"),O=!0,S=!0,J=!1,x=!1,P=!1,e._showControls(),"movie"===e._ui.mode&&(e._core.tracker&&e._core.tracker.stop(),e._saveProgress(-1)),"advid"!==e._core.params.special||F||"default"===e._core.env&&(F=!0,e.playAds("postroll")),L&&null!=window.trailerFired)return window.trailerFired()}}}(this)),this._video.on("error",function(e){return function(t){var r,i;if(i=e._video._source.src,null!=(r=e._messenger)&&r.onError("playback error: "+i,0),i&&i!==location.href&&"movie"===e._ui.mode&&(e._ui.setMode("error"),e.sendPostMessage({event:"error",time:e._video.currentTime,code:"5"}),e._core.tracker))return e._core.tracker.stop()}}(this))},r.prototype.startPlayingCheck=function(){return p.log("startPlayingCheck"),clearInterval(this.playCheckTimer),this.playCheckOldTime=this._video.currentTime,this.playingCheckSuccessCount||(this.playingCheckSuccessCount=0),this.playCheckTimer=f.interval(5e3,function(e){return function(){var t,r;return t=e.playCheckOldTime,r=e._video.currentTime,void 0===t&&(t=0),void 0===r&&(r=0),p.log("checkTimer",t,r,e._core.playlist.nowPlaying.tryCount),t===r||e.stalled?(r>0&&(e.seekedAtStart=!1,e.seekedAtStartPos=r),e.reloadMovie()):(e.playCheckOldTime=r,12==++e.playingCheckSuccessCount?e._core.playlist.nowPlaying.tryCount=3:void 0)}}(this))},r.prototype.stopPlayingCheck=function(){return p.log("stopPlayingCheck"),clearInterval(this.playCheckTimer)},r.prototype.reloadMovie=function(){if(p.log("reloadMovie"),!this.cacheServerTimeout){if(T||"adloading"===this._ui.mode||this._ui.setMode("movie",0,"loading"),this.playingCheckSuccessCount=0,this.stalled=!1,this.videoPause(),c.markCurrentCacheServerAsBad(this._core.playlist.nowPlaying))return k||(z="ABTO",this._ui.settings.setAuto()),0===this.seekedAtStartPos&&(this.seekedAtStartPos=.1),this._core.playlist._setMovieInfo(this._core.playlist.nowPlaying.id,this._core.playlist.nowPlaying);if(this._ui.setMode("error"),this.sendPostMessage({event:"error",time:this._video.currentTime,code:"5"}),this._core.tracker)return this._core.tracker.stop()}},r.prototype.skipServer=function(){return p.log("skipServer"),this.seekedAtStart=!1,this.seekedAtStartPos=this._video.currentTime,this.stopPlayingCheck(),this.reloadMovie()},r.prototype._fullScreenSwitch=function(e){return p.log("_fullScreenSwitch: "+e),"mini"!==e?(R=!1,this._fs.release()):(R=!0,_.available()?this._fs.request():this._video._source.webkitEnterFullscreen?this._video._source.webkitEnterFullscreen():void 0)},r.prototype._addUIEventHandlers=function(){switch(window.addEventListener("orientationchange",function(e){return function(t){return p.log("orientationchange"),e._core.ads.resize(),e._scaleUi(),f.timeout(1e3,function(){return e._core.ads.resize(),e._scaleUi()})}}(this)),this._core.params.special){case"npr":this._ui.nprClickArea._source.addEventListener("click",function(e){return function(t){var r;return p.log("npr click"),e._video.paused()||(O=!0,e._showControls(),e._ui.bigPlayButton.show(),e._ui.playButton.setState("paused"),e._ui.bigPlayButton.setState("paused"),p.log("############# _video.pause 3"),e.videoPause()),r=Math.round(Math.random()*Date.now()),window.open("//ads.adfox.ru/228958/goLink?p1=cbmop&p2=gbde&p5=fzclo&pr="+r+"&puid2=&puid3=&puid4=&puid6=&puid7=&puid8=&puid9=&puid18=&puid19=&puid20=&puid21=&puid22=&puid23=&puid24=&puid25=&puid33=&puid34=&puid35=&puid36=&puid37=&puid46=&puid47=&puid48=&puid55=")}}(this))}return this._ui.bigPlayButtonArea._source.addEventListener("click",function(e){return function(t){var r;if(p.log("bigPlayButtonArea click"),"default"===(r=e._core.env)||"macintosh"===r)return e.bigPlayButtonClick()}}(this)),this._ui.poster._source.addEventListener("click",function(e){return function(t){return p.log("poster click"),e.bigPlayButtonClick()}}(this)),this._ui.fsButton.on("click",function(e){return function(t){return e._showControls(),e._fullScreenSwitch(e._ui.fsButtonIcon.getState())}}(this)),this._ui.adBlockButtonAccept.on("click",function(e){return function(t){return e._ui.adBlockButton.hide()}}(this)),this._ui.adBlockButtonDisableAd.on("click",function(e){return function(t){if(e._ui.adBlockButton.hide(),window.showNoAddForm&&(window.showNoAddForm(),!e._video.paused()))return p.log("############# _video.pause 8"),e.videoPause(),O=!0,e._ui.setMode("movie",0,"paused"),clearTimeout(e._midrollTimeout),e._showControls()}}(this)),this._ui.disableAdButton.on("click",function(e){return function(e){return window.showNoAddForm&&window.showNoAddForm(),ads.pause()}}()),this._ui.subsButton.on("click",function(e){return function(t){if(e._showControls(),e._core.playlist.subtitles.isActive)return"active"===e._ui.subsButtonIcon._state?(!1,e._ui.subsButtonIcon.setState(""),e._ui.subsDiv.hide(),e._ui.subsDiv.clear(),e._video.removeListener("timeupdate",e._core.playlist.subtitles.setCues)):(e._ui.subsButtonIcon.setState("active"),!0,e._ui.subsDiv.show(),e._video.on("timeupdate",e._core.playlist.subtitles.setCues))}}(this)),this._ui.volumeButton.on("click",function(e){return function(t){switch(p.log("volumeButton.click"),e._showControls(),e._core.env){case"android":return e._ui.volumePanel.show(),e._video._source.muted=!1;case"default":case"macintosh":case"ipad":case"iphone":if(e._ui.volume._toVolume())return e._core.settings.saveValue("muted",!0),e._video._source.muted=!0,e._ui.setVolume(0,!1);if(e._core.settings.saveValue("muted",!1),e._video._source.muted=!1,!e._ui.setVolume(e._core.settings.restoreValue("volume",.5)))return e._ui.setVolume(.5,!0)}}}(this)),"default"!==this._core.env&&"macintosh"!==this._core.env||(this._ui.volumeButton.onMouseOver=function(e){return function(){return e._ui.volumePanel.show(),e._ui.volumePanel._removeHideDelay()}}(this)),this._ui.volumeButton.onMouseOut=function(e){return function(){return e._ui.volumePanel._setHideDelay()}}(this),this._ui.settingsButton.on("click",function(e){return function(){return e._ui.subtitlesPanel.visible?e._ui.subtitlesPanel.hide():e._ui.audiotracksPanel.visible?e._ui.audiotracksPanel.hide():e._ui.settingsPanel.visible?e._ui.settingsPanel.hide():e._ui.settingsPanel.show()}}(this)),this._ui.volume.on("volumechange",function(e){return function(t){var r,i;return e._showControls(),i=t.current,t.user&&(e._core.params.automute=0,e._core.params.rolloutmute=0),"android"!==(r=e._core.env)&&"ipad"!==r&&"iphone"!==r||e._ui.volumePanel._resetHideDelay(),e._video.setVolume(i),e._core.ads.setVolume(i),U=i,e.sendPostMessage({event:"volumechange",volume:i,muted:!i}),t.save&&(0===i?(e._video._source.muted=!0,e._core.settings.saveValue("muted",!0)):(e._video._source.muted=!1,e._core.settings.saveValue("muted",!1),e._core.settings.saveValue("volume",i))),i?e._ui.volumeButtonIcon.setState("playing"):e._ui.volumeButtonIcon.setState("volume-off")}}(this)),this._ui.progress.on("seekstart",function(e){return function(){return e._scrubbing=!0,e._showControls()}}(this)),this._ui.progress.on("seeking",function(e){return function(t){return e._ui.currentTime.set(t.time),e._showControls()}}(this)),this._ui.progress.on("seekend",function(e){return function(t){return e._scrubbing=!1,e._saveProgress(t.time),e.sendPostMessage({event:"rewound",time:t.time,previousTime:e._video.currentTime}),p.log("####### seek 8"),e.videoSeek(t.time),e._showControls()}}(this)),this._source.addEventListener("touchstart",function(e){return function(){return e._showControls()}}(this)),this._source.addEventListener("mousemove",function(e){return function(){return e._showControls()}}(this)),this._source.addEventListener("mouseleave",function(e){return function(){if(1===e._core.params.rolloutmute&&1!==e._core.params.automute)return e._video._source.muted=!0,e._ui.setVolume(0,!1)}}(this)),this._source.addEventListener("mouseenter",function(e){return function(){if(1===e._core.params.rolloutmute&&1!==e._core.params.automute)return e._core.settings.restoreValue("muted",!1)?(e._video._source.muted=!0,e._ui.setVolume(0,!1)):(e._video._source.muted=!1,e._ui.setVolume(e._core.settings.restoreValue("volume",.5)))}}(this)),f.homeSite()&&(document.body.onkeydown=function(e){var t;if(e=e||window.event,38===(t=e.keyCode)||40===t||32===t)switch(document.activeElement.tagName){case"INPUT":case"BUTTON":case"TEXTAREA":return;default:return!1}}),document.body.addEventListener("keyup",function(e){return function(t){if(!e._interactiveElement()&&f.homeSite())switch(t.keyCode){case 32:return e.bigPlayButtonClick();case 13:return e._fullScreenSwitch(e._ui.fsButtonIcon.getState())}}}(this)),document.body.addEventListener("keydown",function(e){return function(t){var r;if(!e._interactiveElement()&&f.homeSite())switch(t.keyCode){case 38:return e._showControls(),r=e._ui.volume._toVolume()+.1,r>1&&(r=1),e._showControls(),e._video._source.muted=!1,e._ui.setVolume(r,!0),e._ui.volumePanel.show(),e._ui.volumePanel._resetHideDelay();case 40:return e._showControls(),r=e._ui.volume._toVolume()-.1,r<0&&(r=0),e._showControls(),e._ui.setVolume(r,!0),0===r&&(e._video._source.muted=!0),e._ui.volumePanel.show(),e._ui.volumePanel._resetHideDelay();case 39:if(!T&&!S&&(e._showControls(),r=5,t.ctrlKey&&(r=15),t.metaKey&&(r=15),t.shiftKey&&(r=60),-1===Z&&(Z=e._video.currentTime),Z+r<e._video.duration))return e._scrubbing=!0,Z+=r,e._ui.setCurrentTime(Z),e._showControls(),clearTimeout(e.rewindTimeout),e.rewindTimeout=f.timeout(1e3,function(){return e._seekAfterRewind()});break;case 37:if(!T&&!S&&(e._showControls(),r=-5,t.ctrlKey&&(r=-15),t.metaKey&&(r=-15),t.shiftKey&&(r=-60),-1===Z&&(Z=e._video.currentTime),Z+r>0))return e._scrubbing=!0,Z+=r,e._ui.setCurrentTime(Z),e._showControls(),clearTimeout(e.rewindTimeout),e.rewindTimeout=f.timeout(1e3,function(){return e._seekAfterRewind()})}}}(this)),this._ui.playButton.on("click",function(e){return function(t){var r;return p.log("playButton.click, videostate: "+e._video.state),p.log("pauseState: ",O),e._showControls(),"ready"===e._video.state?(e.startPlayback(),p.log("pauseState sets false 2"),O=!1):"playing"!==e._video.state&&"buffering"!==e._video.state||O?(e._core.playlist.subtitles&&e._core.playlist.subtitles.isActive&&e._ui.subsDiv.show(),p.log("pauseState sets false 3"),O=!1,e._ui.playButtonIcon.setState("playing"),e._ui.bigPlayButton.setState("playing"),e._ui.bigPlayButton.hide(),w?L||C?S?(F=!1,S=!1,p.log("####### seek 3"),Q=!1,e.videoSeek(0),p.log("preroll 3"),e.playAds("preroll")||(null!=window.playerEvent&&window.playerEvent({action:"videostart"}),e.sendPostMessage({event:"started",duration:Math.round(e._video.duration)}))):(p.log("############# _video.play 3"),e.videoPlay(),e._ui.setMode("movie",0,"playing")):(e._ui.playButtonIcon.setState("playing"),e._ui.bigPlayButton.setState("playing"),S?(F=!1,S=!1,p.log("####### seek 2"),Q=!1,e.videoSeek(0),p.log("preroll 2"),e.playAds("preroll")||(null!=window.playerEvent&&window.playerEvent({action:"videostart"}),e.sendPostMessage({event:"started",duration:Math.round(e._video.duration)}))):"iphone"===(r=e._core.env)||"ipad"===r?e.videoPlay():e.playAds("pauseroll")||(p.log("############# _video.play 2"),e.videoPlay(),"default"===e._core.env&&e.setMidroll())):(S&&(S=!1,p.log("####### seek 4"),Q=!1,e.videoSeek(0),p.log("videostart 3"),null!=window.playerEvent&&window.playerEvent({action:"videostart"}),e.sendPostMessage({event:"started",duration:Math.round(e._video.duration)})),p.log("############# _video.play 4"),e.videoPlay(),e._ui.setMode("movie",0,"playing")),C=!1):(e._ui.subsDiv.hide(),p.log("pauseState sets true 2"),O=!0,e._ui.playButtonIcon.setState("paused"),e._ui.bigPlayButton.setState("paused"),!w||L?(p.log("############# _video.pause 5"),e.videoPause(),e._ui.setMode("movie",0,"paused"),e._showControls()):(p.log("############# _video.pause 4"),e.videoPause(),e.playAds("pausebanner")?void 0:(e._ui.bigPlayButton.show(),clearTimeout(e._midrollTimeout),e._showControls())))}}(this)),this._ui.bigPlayButton.on("click",function(e){return function(){return e.bigPlayButtonClick()}}(this))},r.prototype.bigPlayButtonClick=function(){var e,t;if(p.log("bigPlayButton.click, videostate: "+this._video.state),p.log("pauseState: "+O),this.advertOnPause)return this.advertOnPause=!1,this._core.ads.adResume();if(!T&&("movie"===(e=this._ui.mode)||"ad"===e||"poster"===e)&&"loading"!==this._ui.state){if("ready"===this._video.state)return this.startPlayback(),p.log("pauseState sets false 4"),O=!1;if("playing"!==this._video.state&&"buffering"!==this._video.state||O)return this._core.playlist.subtitles&&this._core.playlist.subtitles.isActive&&this._ui.subsDiv.show(),p.log("pauseState sets false 5"),O=!1,this._ui.playButtonIcon.setState("playing"),this._ui.bigPlayButton.setState("playing"),this._ui.bigPlayButton.hide(),w?L||C?S?(F=!1,S=!1,p.log("####### seek 6"),Q=!1,this.videoSeek(0),p.log("preroll 5"),this.playAds("preroll")||(null!=window.playerEvent&&window.playerEvent({action:"videostart"}),this.sendPostMessage({event:"started",duration:Math.round(this._video.duration)}))):(p.log("############# _video.play 7"),this.videoPlay(),this._ui.setMode("movie",0,"playing")):(this._ui.playButtonIcon.setState("playing"),this._ui.bigPlayButton.setState("playing"),S?(F=!1,S=!1,p.log("####### seek 5"),Q=!1,this.videoSeek(0),p.log("preroll 4"),this.playAds("preroll")||(p.log("############# _video.play 6"),this.videoPlay(),this._ui.setMode("movie",0,"playing"),null!=window.playerEvent&&window.playerEvent({action:"videostart"}),this.sendPostMessage({event:"started",duration:Math.round(this._video.duration)}))):"iphone"===(t=this._core.env)||"ipad"===t?this.videoPlay():this.playAds("pauseroll")||(p.log("############# _video.play 5"),this.videoPlay(),"default"===this._core.env&&this.setMidroll())):(S&&(S=!1,p.log("####### seek 7"),Q=!1,this.videoSeek(0),p.log("videostart 4"),null!=window.playerEvent&&window.playerEvent({action:"videostart"}),this.sendPostMessage({event:"started",duration:Math.round(this._video.duration)})),p.log("############# _video.play 8"),this.videoPlay(),this._ui.setMode("movie",0,"playing")),C=!1;if(p.log("pauseState sets true 3"),O=!0,this._ui.playButtonIcon.setState("paused"),this._ui.bigPlayButton.setState("paused"),!w||L)return p.log("############# _video.pause 7"),this.videoPause(),this._ui.setMode("movie",0,"paused"),this._showControls();if(p.log("############# _video.pause 6"),this.videoPause(),!this.playAds("pausebanner"))return this._ui.bigPlayButton.show(),clearTimeout(this._midrollTimeout),this._showControls()}},r.prototype._interactiveElement=function(){switch(document.activeElement.tagName){case"INPUT":case"BUTTON":case"TEXTAREA":return!0}},r.prototype._seekAfterRewind=function(){if(clearTimeout(this.rewindTimeout),this._scrubbing=!1,this._showControls(),Z>=0)return this.sendPostMessage({event:"rewound",time:Z,previousTime:this._video.currentTime}),p.log("####### seek 9"),this.videoSeek(Z),this._saveProgress(Z)},r.prototype._mouseover=function(){},r.prototype._test=function(){},r.prototype._playPreroll=function(){if(!B&&(B=!0,w&&(p.log("preroll 6"),!this.playAds("preroll")&&!N&&(N=!0,p.log("nobanner"),null!=window.playerEvent&&window.playerEvent({action:"nobanner"}),p.log("prerollFired2"),null!=window.prerollFired&&window.prerollFired(),0!==this.contentError))))return this._ui.setMode("error",this.contentError),this.sendPostMessage({event:"error",time:this._video.currentTime,code:"0"})},r.prototype._getSettings=function(e,t){return this._core.settings=new o(e,this._core.params),this._core.settings.on("loadingerror",function(e){return function(r){if(e.emit("settingsloadingerror",{target:e,error:r.error}),"function"==typeof t)return t(r.error)}}(this)),this._core.settings.on("loadingdone",function(e){return function(r){var i;if(p.log("player._getSettings.loadingdone"),p.log(e._core.env),1===e._core.params.automute||1===e._core.params.rolloutmute||1===e._core.params.autoplay&&1===e._core.params.canAutoplay?(e._video._source.muted=!0,e._ui.setVolume(0,!1)):"iphone"===(i=e._core.env)||"ipad"===i?e._ui.setVolume(.5):e._core.settings.restoreValue("muted",!1)?(e._video._source.muted=!0,e._ui.setVolume(0,!1)):e._ui.setVolume(e._core.settings.restoreValue("volume",.5)),e._core.stats.setServers(r.target.statServers),e.emit("settingsloadingdone",{target:e,settings:r.target}),"function"==typeof t)return t(null,r.target)}}(this)),this._core.settings.load()},r.prototype._getMovieInfo=function(e,t,r){return this._core.playlist=new n(e,t,this._core.settings.user,L,this),this._core.playlist.on("loadingerror",function(e){return function(t){var i;if(i=t.value,e.emit("nowplayingloadingerror",{target:e,error:t.error}),"function"==typeof r)return r(t.error,i)}}(this)),this._core.playlist.on("loadingdone",function(e){return function(t){var i,a;if(e.emit("nowplayingloadingdone",{target:e,nowPlaying:t.nowPlaying}),i=t.nowPlaying,a={title:i.title,episodeNum:i.episodeNum,episodeTitle:i.episodeTitle,seasonNum:i.seasonNum,seasonTitle:i.seasonTitle},e._ui.movieTitle.set(a),e._core.playlist.subtitles.isActive&&(e._ui.subsButton._source.classList.remove("disabled_button"),e._ui.subsButtonIcon.setState("")),"function"==typeof r)return r(null,i)}}(this))},r.prototype._saveProgress=function(e){var t,r;if(null==e&&(e=0),!L&&this._core.playlist.nowPlaying.type&&this._core.settings.user.storeProgress&&"movie"===this._ui.mode)return 0<=e&&e<=3&&(e=0),e>3&&(e-=3),r=this._core.playlist.nowPlaying,t={cid:r.id,ctx:r.type.toLowerCase(),position:e},r.progress.position=e,c.progress_add(t,this._core.settings.platform)},r.prototype._saveHistory=function(){var e,t;if(!L)return t=this._core.playlist.nowPlaying,e={id:t.id},c.history_add(e,this._core.settings.platform)},r.prototype._scaleUi=function(){var e;return p.log("_scaleUi, offsetWidth: "+this._source.offsetWidth),e=this.getAdWidth(),e<ie?(this._source.setAttribute("data-scale","mini2"),this._ui.settingsPanel._source.style.height=this._ui.settings.panelHeightMini+"px",this._ui.subtitlesPanel._source.style.height=this._ui.settings.panelSubtitlesHeightMini+"px",this._ui.audiotracksPanel._source.style.height=this._ui.settings.panelAudiotracksHeightMini+"px"):e>=ie&&e<re?(this._source.setAttribute("data-scale","mini"),this._ui.settingsPanel._source.style.height=this._ui.settings.panelHeightMini+"px",this._ui.subtitlesPanel._source.style.height=this._ui.settings.panelSubtitlesHeightMini+"px",this._ui.audiotracksPanel._source.style.height=this._ui.settings.panelAudiotracksHeightMini+"px"):(this._source.setAttribute("data-scale",""),this._ui.settingsPanel._source.style.height=this._ui.settings.panelHeight+"px",this._ui.subtitlesPanel._source.style.height=this._ui.settings.panelSubtitlesHeight+"px",this._ui.audiotracksPanel._source.style.height=this._ui.settings.panelAudiotracksHeight+"px")},r.prototype._setFullscreen=function(e){return null==e&&(e=!1),p.log("_setFullscreen: "+e),this._source.setAttribute("data-fs",e),this._scaleUi(),this._ui.fsButtonIcon.setState(e?"fullscreen":"mini"),e?this._core.ads.fullScreen():(R=!1,this._core.ads.normalScreen())},r.prototype._sendVideoStats=function(e){var t,r,i;if(!this._core.params.src&&(i=this._core.settings,r=this._core.playlist.nowPlaying,t={m:"avod"===r.model?"a":"s",usessionid:r.usessionid,resource:r.uuid,userid:i.user.uuid||"NULL",timestamp:e.total||0,p:r.p,version:d,server:this._core.playlist.nowPlaying.server,quality:z,event:e.event,value:e.value},null!=window.playerEvent&&window.playerEvent(t),!e.notStat))return this._core.stats.sendVideo(i.platform,t)},r.prototype._createStatTracker=function(){return this._core.tracker=new s(this._core.settings.trackingEvents,this._core.playlist.nowPlaying.scenes,this._video.duration),this._core.tracker.on("trackingtimereached",function(e){return function(t){switch(t.event){case"avod":case"svod":if(e._core.playlist.nowPlaying.model===t.event)return e._sendVideoStats(t);break;case"progress":return e._saveProgress(e._video.currentTime);case"history":return e._saveHistory();default:return e._sendVideoStats(t)}}}(this))},r.prototype.checkAutoplayAvailability=function(e,t){var r,i,a,n;return p.log("checkAutoplayAvailability"),!1,n=document.createElement("video"),n.style.opacity=0,i=document.createElement("source"),n.appendChild(i),e.appendChild(n),r=this._core.env,a=function(o){return function(){var s;return o,i.type="video/mp4",n.controls=!0,
i.src="ipad"===r||"iphone"===r?"//cdn.tvzavr.ru/common/tvzstatic/cache/autoplaytest.mp4":"data:video/mp4;base64,AAAAGGZ0eXBtcDQyAAAAAG1wNDJtcDQxAAAFnW1vb3YAAABsbXZoZAAAAADXOtUW1zrVFgABX5AA AB4AAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAKjdHJhawAAAFx0a2hkAAAAAdc61RbXOtUWAAAA AQAAAAAAAA4QAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAA QAAAAALQAAACQAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAOEAAAAAAAAQAAAAACG21kaWEA AAAgbWRoZAAAAADXOtUW1zrVFgAAYagAAAPoFccAAAAAAEBoZGxyAAAAAAAAAAB2aWRlAAAAAAAA AAAAAAAAH01haW5jb25jZXB0IFZpZGVvIE1lZGlhIEhhbmRsZXIAAAGzbWluZgAAABR2bWhkAAAA AQAAAAAAAAAAAAAAQGhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAAAfTWFpbmNvbmNlcHQgVmlk ZW8gTWVkaWEgSGFuZGxlcgAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAATNz dGJsAAAArnN0c2QAAAAAAAAAAQAAAJ5hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAtACQABI AAAASAAAAAAAAAABCkFWQyBDb2RpbmcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAASGF2Y0MB TQAg/+EAMWdNQCCWUgFoJNgKRAAAAwAEAAADAMuCgAEctAAEAWfxjjBQACOWgACALP4xw7QsWiQB AARo63NSAAAAGHN0dHMAAAAAAAAAAQAAAAEAAAPoAAAAFHN0c3MAAAAAAAAAAQAAAAEAAAANc2R0 cAAAAAAAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAAdUAAAABAAAA FHN0Y28AAAAAAAAAAQAAGDIAAAJMdHJhawAAAFx0a2hkAAAAAdc61RbXOtUWAAAAAgAAAAAAAA4Q AAAAAAAAAAAAAAAAAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAA AAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAOEAAAAAAAAQAAAAABxG1kaWEAAAAgbWRoZAAA AADXOtUW1zrVFgAAu4AAABAAFccAAAAAAERoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAI01h aW5jb25jZXB0IE1QNCBTb3VuZCBNZWRpYSBIYW5kbGVyAAABWG1pbmYAAAAQc21oZAAAAAAAAAAA AAAARGhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAAAjTWFpbmNvbmNlcHQgTVA0IFNvdW5kIE1l ZGlhIEhhbmRsZXIAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADYc3RibAAA AGRzdHNkAAAAAAAAAAEAAABUbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAALuAAAAAAAAwZXNk cwAAAAADgICAHwBAEASAgIAUQBUABgAAAPA8AADv3gWAgIACEZAGAQIAAAAYc3R0cwAAAAAAAAAB AAAABAAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAQAAAABAAAAJHN0c3oAAAAAAAAAAAAAAAQA AACkAAAApAAAAKMAAACkAAAAFHN0Y28AAAAAAAAAAQAAGgcAAAA6dWR0YQAAABepVElNAAsAADAw OjAwOjAwOjAwAAAADqlUU0MAAgAAMjUAAAANqVRTWgABAAAxAAASbXV1aWS+es/Ll6lC6JxxmZSR 46+sPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4K PHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENv cmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPgogPHJk ZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgt bnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRw Oi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6eG1wRE09Imh0dHA6Ly9ucy5hZG9i ZS5jb20veG1wLzEuMC9EeW5hbWljTWVkaWEvIgogICAgeG1sbnM6c3REaW09Imh0dHA6Ly9ucy5h ZG9iZS5jb20veGFwLzEuMC9zVHlwZS9EaW1lbnNpb25zIyIKICAgIHhtbG5zOmNyZWF0b3JBdG9t PSJodHRwOi8vbnMuYWRvYmUuY29tL2NyZWF0b3JBdG9tLzEuMC8iCiAgICB4bWxuczp4bXBNTT0i aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8v bnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0i aHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtcDpDcmVhdGVEYXRlPSIyMDE4 LTA2LTA0VDE0OjM3OjU4KzAzOjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wNi0wNFQxNDoz Nzo1OCswMzowMCIKICAgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQcmVtaWVyZSBQcm8gQ1M2IChX aW5kb3dzKSIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNi0wNFQxNDozNzo1OCswMzowMCIK ICAgeG1wRE06dmlkZW9GcmFtZVJhdGU9IjI1LjAwMDAwMCIKICAgeG1wRE06dmlkZW9GaWVsZE9y ZGVyPSJQcm9ncmVzc2l2ZSIKICAgeG1wRE06dmlkZW9QaXhlbEFzcGVjdFJhdGlvPSIxLzEiCiAg IHhtcERNOmF1ZGlvU2FtcGxlUmF0ZT0iNDgwMDAiCiAgIHhtcERNOmF1ZGlvU2FtcGxlVHlwZT0i MTZJbnQiCiAgIHhtcERNOmF1ZGlvQ2hhbm5lbFR5cGU9IlN0ZXJlbyIKICAgeG1wRE06c3RhcnRU aW1lU2NhbGU9IjI1IgogICB4bXBETTpzdGFydFRpbWVTYW1wbGVTaXplPSIxIgogICB4bXBNTTpP cmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MzBCRkE4N0RFQjY3RTgxMUIwNURGNzU1OTRGMTUy MDEiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzJCRkE4N0RFQjY3RTgxMUIwNURGNzU1 OTRGMTUyMDEiCiAgIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzFCRkE4N0RFQjY3RTgxMUIw NURGNzU1OTRGMTUyMDEiCiAgIGRjOmZvcm1hdD0iSC4yNjQiPgogICA8eG1wRE06ZHVyYXRpb24K ICAgIHhtcERNOnZhbHVlPSI3NjgwIgogICAgeG1wRE06c2NhbGU9IjEvOTAwMDAiLz4KICAgPHht cERNOnByb2plY3RSZWYKICAgIHhtcERNOnR5cGU9Im1vdmllIi8+CiAgIDx4bXBETTp2aWRlb0Zy YW1lU2l6ZQogICAgc3REaW06dz0iNzIwIgogICAgc3REaW06aD0iNTc2IgogICAgc3REaW06dW5p dD0icGl4ZWwiLz4KICAgPHhtcERNOnN0YXJ0VGltZWNvZGUKICAgIHhtcERNOnRpbWVGb3JtYXQ9 IjI1VGltZWNvZGUiCiAgICB4bXBETTp0aW1lVmFsdWU9IjAwOjAwOjAwOjAwIi8+CiAgIDx4bXBE TTphbHRUaW1lY29kZQogICAgeG1wRE06dGltZVZhbHVlPSIwMDowMDowMDowMCIKICAgIHhtcERN OnRpbWVGb3JtYXQ9IjI1VGltZWNvZGUiLz4KICAgPGNyZWF0b3JBdG9tOndpbmRvd3NBdG9tCiAg ICBjcmVhdG9yQXRvbTpleHRlbnNpb249Ii5wcnByb2oiCiAgICBjcmVhdG9yQXRvbTppbnZvY2F0 aW9uRmxhZ3M9Ii9MIgogICAgY3JlYXRvckF0b206dW5jUHJvamVjdFBhdGg9IlxcP1xDOlxVc2Vy c1xlZGdlXERvY3VtZW50c1xBZG9iZVxQcmVtaWVyZSBQcm9cNi4wXFVudGl0bGVkLnBycHJvaiIv PgogICA8Y3JlYXRvckF0b206bWFjQXRvbQogICAgY3JlYXRvckF0b206YXBwbGljYXRpb25Db2Rl PSIxMzQ3NDQ5NDU1IgogICAgY3JlYXRvckF0b206aW52b2NhdGlvbkFwcGxlRXZlbnQ9IjExMjk0 NjgwMTgiLz4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAg ICAgIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlp ZDozMEJGQTg3REVCNjdFODExQjA1REY3NTU5NEYxNTIwMSIKICAgICAgc3RFdnQ6d2hlbj0iMjAx OC0wNi0wNFQxNDozNzo1OCswMzowMCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUg UHJlbWllcmUgUHJvIENTNiAoV2luZG93cykiLz4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFj dGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MzJCRkE4N0RFQjY3 RTgxMUIwNURGNzU1OTRGMTUyMDEiCiAgICAgIHN0RXZ0OndoZW49IjIwMTgtMDYtMDRUMTQ6Mzc6 NTgrMDM6MDAiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFByZW1pZXJlIFBybyBD UzYgKFdpbmRvd3MpIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIi8+CiAgICA8L3JkZjpTZXE+CiAg IDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94Onht cG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAog ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAg ICAKPD94cGFja2V0IGVuZD0idyI/PgAAAAFtZGF0AAAAAAAABHQAAAHRZYiAQACdv/70oPgU0GJj ysxWvdiImDlA4OycM4dgAAADAAADAAADAv5mcxN+8AAR4Ar4IuCZguoR0GkEDCIhNg5QngqwAAAD AAADAAADAAADAAADAAADAAADAAADAAADAAADAAADAAADAAADAAADAAAEPAAAAwAAAwAAAwAAAwAA AwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAA AwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAA AwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAA AwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAA AwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAA AwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAAEKIRAFAKAb 44AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8hEAUAoBvjgAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPyEQBQCgG+NAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD0hEAUAoBvjgAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAPw==",n.load(),s=n.play(),void 0!==s?s.then(function(r){return e.removeChild(n),n.muted?(n=null,p.log("autoplay avaiable muted"),t(1)):(n=null,p.log("autoplay avaiable with sound"),t(2))}).catch(function(r){if(p.log(r),n)return n.muted?(e.removeChild(n),n=null,p.log("autoplay unavaiable"),t(0)):(n.muted=!0,a())}):(e.removeChild(n),n=null,p.log("autoplay unavaiable, promise not supported"),t(0))}}(this),a(),null},r.prototype.startPlayback=function(e){var t,r,i;if(p.log("startPlayback"),this._sendAdStats("none","","playerstart","none"),e&&"trailer"===e&&(L=!0),t=this._core.playlist.nowPlaying,t.model,A&&(L&&(k=!1),k&&(z="240")),p.log("quality: "+z),i=this._core.playlist.contMngr.setQuality(z,E),this._ui.settings.flag||this._ui.settings.init(this._core.playlist.contMngr,k),L&&null!=(r=t.videoData.clip__trailer_url)&&""!==r&&(i=i.replace(t.uuid,r),i=i.replace("tvzavr_d","tvzavr"),t.filmUuid=t.uuid,t.uuid=r),(1!==this._core.params.pauseafterpreroll||B)&&(this._video.url!==i&&this._video.set(i,!0),this.videoLoad(),1===this._core.params.pauseafterpreroll&&(this.videoPlay(),this._ui.setMode("movie",0,"playing"))),w){if(!B&&(this._core.ads.initialUserAction(),1===this._core.params.pauseafterpreroll&&(B=!0,p.log("preroll 7"),!this.playAds("preroll")&&!N&&(N=!0,p.log("nobanner"),null!=window.playerEvent))))return window.playerEvent({action:"nobanner"})}else if(this._ui.loadingIndicator.hide(),this._showControls(),!O)return null!=window.playerEvent&&window.playerEvent({action:"prerollstart"}),p.log("videostart 2"),null!=window.playerEvent&&window.playerEvent({action:"videostart"}),I.started=!0,p.log("############# _video.play 10"),this.videoPlay(),this._ui.setMode("movie",0,"playing")},r.prototype.sendToLogArea=function(e){if("adtest"===this._core.params.special&&(this.logArea||(this.logArea=document.getElementById("logarea")),this.logArea&&e))return this.logArea.value+=e+"\r\n"},r.prototype.playOverlay=function(e){return p.log("playOverlay"),this._core.ads.playAds("overlay",0,0,e)},r.prototype.playAds=function(e,t){var r,i,a,n;if(t||(t=0),p.log("playAds: "+e,t),"overlay"===e||"preroll_overlay"===e)return W=-1,Y=-1,!1;if("preroll"===e&&(-1===W&&null!=window.playerEvent&&window.playerEvent({action:"prerollstart"}),0===W&&1===V&&this._ui.setMode("adloading")),"pauseroll"!==e&&"pausebanner"!==e||this._ui.loadingIndicator.show(),-1===W?(b>0&&(b=0),W=0,V=0,Y=0,G=1,q=this.adUrls?this.adUrls[e+"_limit"]:0,H=0,K=Math.floor(429496729*Math.random()),j=0,this.adUrls[e].forEach(function(e){return function(e){return"string"==typeof e?j++:j+=e.length}}())):(V++,r="string"==typeof this.adUrls[e][W]?0:this.adUrls[e][W]?this.adUrls[e][W].length:0,(V>=r||t>0)&&(W++,V=0,Y+=t,G=0,r=0,this.adUrls[e].forEach(function(e){return function(e){if(r<W)return"string"==typeof e?G++:G+=e.length,r++}}())),G++),Y<q&&(-1===H||0===H)&&q>0?this.adUrls[e][W]&&(n="string"==typeof this.adUrls[e][W]?this.adUrls[e][W]:this.adUrls[e][W][V]):n=null,i=this._core.playlist.nowPlaying,n){if(this._ui.adTitle.setText("Загрузка рекламы: "+Math.round(100*G/j)+"%"),"preroll"===e&&"RU"===this._core.settings.location.country&&"htm"===this._core.settings.platform)switch(String(f.getUrlValue("direct"))){case"1":"string"!=typeof this.adUrls[e][W]&&(0===V||2===V||3===V||(n=""));break;case"2":"string"!=typeof this.adUrls[e][W]&&(5===V||(n=""))}if(this.checkTestSpecial()||"avod"!==i.model){if(!this._core.ads.playAds(e,W,V,n))return!1}else if(!this._core.ads.playAds(e,W,V,n+this._core.ad._makePuids(i.seoAlias,i.genres,i.category,i.childrenContent,i.model,this._core.settings.platform,K,this._core.params.dl,this._core.settings.location.country,this.getAdWidth(),this.getAdHeight(),y,this.checkUtmSource())))return!1;return!0}if("preroll"===e&&Y<q&&(-1===H||0===H)&&!x&&f.homeSite()&&!(this.checkUtmSource()||"0"===String(this._core.params.intro)||this.checkTestSpecial()&&"1"!==String(this._core.params.intro)))return x=!0,!!this._core.ads.playAds(e,W,V,"//www.tvzavr.ru/common/tvzrecl/sys/intro.xml",!0);if("preroll"===e&&!P){if("adtest_mp4"===(a=this._core.params.overlay)||"adtest_overlay"===a)return P=!0,!("adtest_mp4"===this._core.params.overlay&&!this._core.ads.playAds("preroll_overlay",0,0,"//staging.tvzavr.ru/dev/vpaid/ad_mp4_5.xml"))&&!("adtest_overlay"===this._core.params.overlay&&!this._core.ads.playAds("preroll_overlay",0,0,"//staging.tvzavr.ru/dev/vpaid/ad_overlay.xml"));if(!this.checkTestSpecial()&&"avod"===i.model)return P=!0,!!this._core.ads.playAds("preroll_overlay",0,0,"//ads.adfox.ru/228958/getCode?p1=cdntq&p2=garm"+this._core.ad._makePuids(i.seoAlias,i.genres,i.category,i.childrenContent,i.model,this._core.settings.platform,K,this._core.params.dl,this._core.settings.location.country,this.getAdWidth(),this.getAdHeight(),y,this.checkUtmSource()))}return W=-1,Y=-1,!1},r.prototype.checkUtmSource=function(){var e;return null!=(e=f.getUrlValue("utm_source",document.location.href))&&0===e.toLowerCase().search("adv_")},r.prototype.imaOriginalSource=function(){return("adtest"!==this._core.params.special||"1"!==String(this._core.params.tools))&&!(!f.homeSite()||this.checkUtmSource())},r.prototype.checkTestSpecial=function(){var e;return"yavideo"===(e=this._core.params.special)||"adtest"===e||"dev"===e||"adtest_imho"===e||"adtest_imho2"===e||"adtest_mp4"===e||"adtest_noad"===e||"adtest_vpaid"===e||"adtest_vpaid_truble"===e||"adtest_vpaid_mp4"===e||"adtest_mp4_vpaid"===e||"adtest_error"===e},r.prototype.sectionLastSet=function(e){return H=e},r.prototype.pauseForAd=function(e,t){return p.log("Player.pauseForAd, duration:"+e),clearTimeout(this._midrollTimeout),this._ui.setMode("ad",0,"",t),t||this.showDisableAdButton(),T=!0,this._video.paused()?this.stopPlayingCheck():(p.log("############# _video.pause 9"),this.videoPause()),this.sendPostMessage({event:"adShown",time:this._video.currentTime,duration:e})},r.prototype.resumeAfterAd=function(e,t){var r;return p.log("Player.resumeAfterAd, section, started: "+e,t),this.hideDisableAdButton(),k||this.playAds(e,t)||(0!==this.contentError?("preroll"===e&&(p.log("prerollFired1"),null!=window.prerollFired&&window.prerollFired()),this._ui.setMode("error",this.contentError),this.sendPostMessage({event:"error",time:this._video.currentTime,code:"0"})):(b>3&&"avod"===this._core.playlist.nowPlaying.model&&w&&A&&(b=-1,k||(k=!0,this._ui.settings.adblockQuality(this._core.playlist.contMngr))),"preroll"!==e&&"preroll_overlay"!==e||(N=!0,0===t&&(p.log("nobanner"),null!=window.playerEvent&&window.playerEvent({action:"nobanner"})),p.log("videostart 1"),null!=window.playerEvent&&window.playerEvent({action:"videostart"}),this.sendPostMessage({event:"started",duration:Math.round(this._video.duration)})),T=!1,"preroll"!==e&&"preroll_overlay"!==e||1!==this._core.params.pauseafterpreroll?(this.seekAfterAdsPos=this._video.currentTime,this.seekAfterAdsTimerCount=20,"preroll"!==e&&"preroll_overlay"!==e||(this._ui.setMode("movie",0,"playing"),p.log("############# _video.play 11"),this.videoPlay(),t>0&&this._showControls()),"midroll"!==e&&"actionroll"!==e||t>0&&(this._ui.setMode("movie",0,"playing"),p.log("############# _video.play 12"),this.videoPlay(),this._showControls()),"postroll"===e&&(S?(this._ui.setMode("movie",0,"paused"),this._showControls()):t>0&&(this._ui.setMode("movie",0,"playing"),p.log("############# _video.play 13"),this.videoPlay(),this._showControls())),"pausebanner"===e&&(this._ui.setMode("movie",0,"paused"),this._showControls()),"pauseroll"===e&&(this._ui.setMode("movie",0,"playing"),p.log("############# _video.play 14"),this.videoPlay(),this._showControls()),S&&(p.log(S),this._ui.bigPlayButton.show()),w&&!L&&"default"===this._core.env&&this.setMidroll(),"iphone"!==(r=this._core.env)&&"ipad"!==r||"midroll"!==e&&"pauseroll"!==e&&"actionroll"!==e&&"postroll"!==e||this.seekAfterAdsPos>0&&(p.log("seekAfterAds"),p.log("2 ",this._video.currentTime),this.seekAfterAds=!1,this.seekAfterAdsTimer=f.interval(250,function(e){return function(){if(e._video.currentTime<e.seekAfterAdsPos&&(e.videoSeek(e.seekAfterAdsPos),e.seekAfterAdsPos=0,clearInterval(e.seekAfterAdsTimer)),--e.seekAfterAdsTimerCount<=0)return clearInterval(e.seekAfterAdsTimer)}}(this)))):(p.log("pauseState sets true"),O=!0,C=!0,this._ui.setMode("poster")))),p.log("video.paused, video.ended:"+this._video.paused(),this._video.ended())},r.prototype.showDisableAdButton=function(){if("avod"===this._core.playlist.nowPlaying.model&&f.homeSite())return this._ui.disableAdButton.show(),this._ui.adLabel.hide(),this._core.ads.resize()},r.prototype.hideDisableAdButton=function(){if("avod"===this._core.playlist.nowPlaying.model&&f.homeSite())return this._ui.disableAdButton.hide(),this._core.ads.resize()},r.prototype.getAdWidth=function(){return R?window.screen.width:this._source.offsetWidth},r.prototype.getAdHeight=function(e){var t,r,i,a;return null==e&&(e=!1),t=40,r=60,this._source.offsetWidth<ie&&(t=25,r=40),this._source.offsetWidth>=ie&&this._source.offsetWidth<re&&(t=30,r=40),i=R?window.screen.height:this._source.offsetHeight,a=this._ui.disableAdButton.visible?i-t:i,a=i,"movie"===this._ui.mode&&this._ui.playButton.visible&&(e||(a=i-r)),a},r.prototype.adPause=function(){return this.advertOnPause=!0,this._ui.setMode("adpause"),this.showDisableAdButton()},r.prototype.adResume=function(){return this.advertOnPause=!1,this._ui.setMode("ad"),this.showDisableAdButton()},r.prototype.setMidroll=function(){return clearTimeout(this._midrollTimeout),this._midrollTimeout=f.timeout(1e3*this._core.settings.midroll,function(e){return function(){if("movie"===e._ui.mode&&"paused"!==e._video.state)return e._saveProgress(e._video.currentTime),e.playAds("midroll")}}(this))},r.prototype.setDelayedOverlay=function(e,t){return p.log("setDelayedOverlay: ",e,t),this.delayedOverlayTimer=f.timeout(1e3*e,function(e){return function(){return e.playOverlay(t)}}(this))},r.prototype.currentAdRemainingTime=function(e){return q>1?this._ui.adTitle.setText("Реклама ("+(Y+1)+" из "+q+"): "+Math.ceil(e)):this._ui.adTitle.setText("Реклама: "+Math.ceil(e))},r.prototype.stopPlayback=function(){var e;return null!=(e=this._video)?e.emit("idle"):void 0},r.prototype.getState=function(){var e,t;return null!=(e=this._messenger)?e.sendState(null!=(t=this._video)?t.getState():void 0):void 0},r.prototype.getDuration=function(){var e,t;return null!=(e=this._messenger)?e.sendDuration(null!=(t=this._video)?t.duration:void 0):void 0},r.prototype.getTime=function(){var e,t;return null!=(e=this._messenger)?e.sendTime(null!=(t=this._video)?t.currentTime:void 0):void 0},r.prototype._showControls=function(){var e;if("movie"===this._ui.mode&&"loading"!==this._ui.state&&(clearTimeout(this._controlsHideTimeout),this._ui.showMovieControls(),this._core.ads.resize(),!O&&!this._scrubbing))return"ipad"===(e=this._core.env)||"iphone"===e||"android"===e?this._controlsHideTimeout=f.timeout(5e3,function(e){return function(){return e._hideControls()}}(this)):this._controlsHideTimeout=f.timeout(3e3,function(e){return function(){return e._hideControls()}}(this))},r.prototype._hideControls=function(){if(clearTimeout(this._controlsHideTimeout),"movie"===this._ui.mode)return this._ui.hideMovieControls(),this._core.ads.resize()},r.prototype._sendAdStats=function(e,t,r,i,a){var n,o,s,l,u,c;if(null==a&&(a=""),D={blocktype:e,adcount:t,guid:i},"error_adblock"!==r&&"error_1012"!==r||b>=0&&b++,"loaded"===r&&this.observer.vaRaw>=0&&(this.observer.vaMRC=0),"loaded"!==r||this.observer.vaMRCtimer||0!==this.observer.vaMRC||this.observer.vaRaw>=.5&&(p.log("viewabilityMRCtimer Charged ++++++ 2"),this.observer.vaMRCtimer=f.timeout(2e3,function(e){return function(){if(clearTimeout(e.observer.vaMRCtimer),e.observer.vaMRCtimer=null,p.log("viewabilityMRCtimer Completed ====== 2"),e.observer.vaMRC=1,T)return e._sendAdStats(D.blocktype,D.adcount,"mrc1",D.guid)}}(this))),"loaded"===r&&-1===this.observer.vaRaw&&T&&this._sendAdStats(D.blocktype,D.adcount,"mrc-1",D.guid),"complete"===r&&0===this.observer.vaMRC&&(T&&this._sendAdStats(D.blocktype,D.adcount,"mrc0",D.guid),this.observer.vaMRCtimer&&(clearTimeout(this.observer.vaMRCtimer),this.observer.vaMRCtimer=null)),p.log("_sendAdStats.viewability: "+r,this.observer.vaRaw,this.observer.va,this.observer.vaMRC),!this._core.params.src&&"loaded"!==r)return u=this._core.settings,l=this._core.playlist.nowPlaying,t&&(e=e+"_"+t),c="","1"===String(this._core.params.dl)&&(n=window.location.ancestorOrigins,(o=!!n&&(0!==n.length&&n[n.length-1]))&&(c=o)),s={resource:l.uuid,p:l.p,guid:"advloads"!==r&&"advloadf"!==r?this._video._source.src:"none",guid:i,usessionid:l.usessionid,userid:u.user.uuid||"NULL",blocktype:e,action:r,version:d,clickthrough:a,viewability:this.observer.va,partner:c},this._core.stats.sendAd(u.platform,s)},r.prototype.addPostMessageListeners=function(){return window.addEventListener("message",function(e){return function(t){var r;switch(t.data.method){case"play":if((O||S||"ready"===e._video.state)&&!T)return e.videoPlay();break;case"seek":if(!T)return e.sendPostMessage({event:"rewound",time:Math.floor(t.data.time),previousTime:null!=e._video.currentTime?e._video.currentTime:0}),p.log("####### seek 10"),e.videoSeek(Math.floor(t.data.time));break;case"setVolume":if(r=t.data.volume,r<0&&(r=0),e._ui.setVolume(r,!0),0===r)return e._video._source.muted=!0;break;case"mute":if(e._ui.volume._toVolume())return e._core.settings.saveValue("muted",!0),e._video._source.muted=!0,e._ui.setVolume(0,!1);break;case"unmute":if(!e._ui.volume._toVolume()&&(e._core.settings.saveValue("muted",!1),e._video._source.muted=!1,!e._ui.setVolume(e._core.settings.restoreValue("volume",.5))))return e._ui.setVolume(.5,!0);break;case"setQuality":if(!T)return e._ui.settings.tryToSetQuality(e._core.playlist.contMngr,t.data.quality)}}}(this))},r.prototype.sendPostMessage=function(e){if(window.parent)return!1===e.event&&p.log("sendPostMessage: "+e),window.parent.postMessage(e,"*")},r.prototype.setCacheServerTimeout=function(e,t,r){return this.cacheServerTimeout=t,f.timeout(1e3*t,function(t){return function(){return null,t._video.currentTime>0?r.value=e+" true":r.value=e+" false"}}(this))},r}(d),t.exports=a},{"./core/ad.coffee":16,"./core/ads.js":17,"./core/intersection-observer.js":19,"./core/messenger.coffee":20,"./core/playlist.coffee":21,"./core/settings.coffee":22,"./core/tracker.coffee":26,"./core/ui.coffee":27,"./core/video.coffee":28,"./shared/api.coffee":33,"./shared/debug.coffee":34,"./shared/stats.coffee":35,"./shared/utils.coffee":36,"./widgets/widget.coffee":53,fullscreen:4}],31:[function(e,t,r){var i;i=function(){function e(){}return e.hash=function(t){var r,i,a,n,o,s,l,u,d,c,p,_,f,h,m,g,v,y,A;for(t=t.utf8Encode(),i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t+=String.fromCharCode(128),y=t.length/4+2,n=Math.ceil(y/16),a=new Array(n),g=0;g<n;){for(a[g]=new Array(16),v=0;v<16;)a[g][v]=t.charCodeAt(64*g+4*v)<<24|t.charCodeAt(64*g+4*v+1)<<16|t.charCodeAt(64*g+4*v+2)<<8|t.charCodeAt(64*g+4*v+3),v++;g++}for(a[n-1][14]=8*(t.length-1)/Math.pow(2,32),a[n-1][14]=Math.floor(a[n-1][14]),a[n-1][15]=8*(t.length-1)&4294967295,l=new Array(64),g=0;g<n;){for(A=0;A<16;)l[A]=a[g][A],A++;for(A=16;A<64;)l[A]=e._sigma1(l[A-2])+l[A-7]+e._sigma0(l[A-15])+l[A-16]&4294967295,A++;for(u=r[0],d=r[1],c=r[2],p=r[3],_=r[4],f=r[5],h=r[6],m=r[7],A=0;A<64;)o=m+e._sigmaCapital1(_)+e._Ch(_,f,h)+i[A]+l[A],s=e._sigmaCapital0(u)+e._Maj(u,d,c),m=h,h=f,f=_,_=p+o&4294967295,p=c,c=d,d=u,u=o+s&4294967295,A++;r[0]=r[0]+u&4294967295,r[1]=r[1]+d&4294967295,r[2]=r[2]+c&4294967295,r[3]=r[3]+p&4294967295,r[4]=r[4]+_&4294967295,r[5]=r[5]+f&4294967295,r[6]=r[6]+h&4294967295,r[7]=r[7]+m&4294967295,g++}return e._toHexStr(r[0])+e._toHexStr(r[1])+e._toHexStr(r[2])+e._toHexStr(r[3])+e._toHexStr(r[4])+e._toHexStr(r[5])+e._toHexStr(r[6])+e._toHexStr(r[7])},e._ROTR=function(e,t){return t>>>e|t<<32-e},e._sigmaCapital0=function(e){return this._ROTR(2,e)^this._ROTR(13,e)^this._ROTR(22,e)},e._sigmaCapital1=function(e){return this._ROTR(6,e)^this._ROTR(11,e)^this._ROTR(25,e)},e._sigma0=function(e){return this._ROTR(7,e)^this._ROTR(18,e)^e>>>3},e._sigma1=function(e){return this._ROTR(17,e)^this._ROTR(19,e)^e>>>10},e._Ch=function(e,t,r){return e&t^~e&r},e._Maj=function(e,t,r){return e&t^e&r^t&r},e._toHexStr=function(e){var t,r,i;for(r="",i=void 0,t=7;t>=0;)i=e>>>4*t&15,r+=i.toString(16),t--;return r},e}(),t.exports=i,void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(e){return e,this}})},{}],32:[function(e,t,r){var i,a,n,o;n=e("./sha256.coffee"),o=e("../shared/utils.coffee"),i={tzf:"46395c6c9e3e041765d624e4aff654ee9d50dde851dbb3758861d6ea0862f79f",htm:"c58ad145141cedc57523c6305b6df7960ca844371d325db23412abc8e884c114",rch:"x8abwf0tk3ux6pvqfmrj2yz5pdmdm4h1yzvixf05jl1rk36u7pb2dmryc5i5od8k","3cr":"sdxzymhpy0gazlcwbciem1oskf9blywb8u2hp7ikkncjy0ga6zhlbtirmyjd9eva"},a=function(){function e(){}return e.get=function(e,t,r,a){var s,l,u,d;return null==a&&(a="null"),u=this._rnd32(""),d=i[r],e=e.replace(o.urlHost3(e),""),l=t+e+u+a+d,s=n.hash(l),u+s},e._rnd32=function(e){return null==e&&(e=""),(e+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&32===e.length?e:this._rnd32(e)},e}(),t.exports=a},{"../shared/utils.coffee":36,"./sha256.coffee":31}],33:[function(e,t,r){var i,a,n,o,s,l,u,d,c,p,_,f,h,m,g;e("../../data/settings.json"),e("../../data/ad-settings.json"),e("../../data/tvz-sites.json"),d=e("./api.coffee"),h=e("./utils.coffee"),c=e("./debug.coffee"),g=e("xhr"),e("../security/token.coffee"),a="//www.tvzavr.ru/",s="0.0",i="&apn=tvzavr-player&apv=0.1&ctt=json",n={set:!1,headers:null,sid:null,user:null,enabled:!1},o=!1,r._request=function(e){return function(e,t,r,i,a){var o,s,l,u;"function"==typeof i&&(a=i,i={}),"function"==typeof r&&(a=r,i={},r="get"),"function"==typeof t&&(a=t,i={},r="get",t=!0),l="";for(o in i)u=i[o],l+=o+"="+u+"&";return s={url:e,method:r.toUpperCase(),body:l,withCredentials:t},n.set&&(s.headers=n.headers),g(s,function(e,t){if("function"==typeof a)return a(e,t)})}}(),l=function(e){var t,r;for(null==e&&(e=[]),t=0,r=e.length;t<r;t++)if(694===e[t])return!0;return!1},u=function(e){return function(t,r,i){var a;return a="//"+r.server+"/addons/"+r.owner+"/"+r.cckey+"/"+r.uuid+"/"+t+".vtt",c.log("api._getSubs: "+a),e._request(a,!1,function(e,r){return r?i(r,t):i})}}(this),r._set_base_url=function(e){return a=e},r._set_light=function(e){return o=e},r._set_version=function(e){return s=e,i="&apn=tvzavr-player&apv="+s+"&ctt=json"},r._setup=function(e){if(null==e&&(e={}),c.log("api._setup"),n.enabled=!0,e.api&&(a=e.api),e.sid&&(n.set=e.set||n.set,n.sid=e.sid,n.headers=e.headers||{"X-cookie":e.sid}),e.user)return n.user=e.user},r._getAdSettings=function(e){var t;return t="//services.tvzavr.ru/generic/imho.ad-settings.json?nocache="+Date.now(),c.log("api._getAdSettings: "+t),this._request(t,!0,function(t,r){if(r=JSON.parse(r.body),"function"==typeof e)return e(t,r)})},r.host_aliases=function(e){var t;return t="//services.tvzavr.ru/generic/tvz-sites_n.json",c.log("api.host_aliases: "+t),this._request(t,!1,function(t,r){var i,a,n,o;if(t&&"function"==typeof e)return e(t);for(r=JSON.parse(r.body).sites,i=[],n=0;n<r.length;){for(a=[],o=n;o<r.length;)r[n].domain===r[o].domain&&a.push(r[o]),o++;i.push(a[Math.floor(Math.random()*a.length)]),n+=a.length}return"function"==typeof e?e(t,i):void 0})},r.weborama_dmp=function(e){var t;return t="//wam.solution.weborama.fr/fcgi-bin/dispatch.fcgi?d.A=prd&d.key=n9d9C9I4XN1I&d.format=json&d.top_clusters=10",c.log("api.weborama_dmp: "+t),this._request(t,function(t,r){try{c.log(r),r=JSON.parse(r.body)}catch(e){e,r=null}if("function"==typeof e)return e(t,r)})},r.get_settings=function(e,t){var r;return r=a+"api/3.0/service/expanded_settings?plf="+e+i,c.log("api.get_settings: "+r),this._request(r,function(e,r){var i,a,n;if(r=JSON.parse(r.body),a={},(null!=r?r.status:void 0)||(n=r.result.settings,i=n["stat-server-list"]||n["stat-server"]||"",i=i?i.split(","):[],a={statServerList:i,adInterval:parseInt(n["adv-interval"],10)||900,statAVODDelay:parseInt(n["stat-partner-delay"],10)||60,statSVODInterval:parseInt(n["stat-interval-svod"],10)||60,statProgressInterval:parseInt(n["stat-progress-interval"],10)||60,location:r.result.location}),"function"==typeof t)return t(e,a)})},r.get_user_info=function(e,t){var r,s,l;return s=a+"api/3.0/user/get_info?plf="+e+i,n.enabled&&(n.set=!0),o&&(r={status:9,error:[{description_ru:"Пользователь не авторизован."},{description_en:"User not logged in"}]}),r?(c.log("api.get_user_info: light"),l=f(r),"function"==typeof t?t(null,l):void 0):(c.log("api.get_user_info: "+s),this._request(s,function(e,r){if(r=JSON.parse(r.body),l=f(r),"function"==typeof t)return t(e,l)}))},f=function(e){var t,r;return c.log("api.user_info_parser"),r={},t=e.user_info||{},r.uuid=t.customer__uuid||"NULL",n.user&&r.uuid!==n.user&&(r.uuid=n.user),r.storeProgress=t.customer__store_progress||!1,n.set=!1,r},r.get_video_info=function(e,t,r,o){var s,l,u;return l=!r||"1"!==r&&1!==r?a+"api/3.0/video/get_info?cid="+e+"&plf="+t+i:a+"api/3.0/video/get_info?cid="+e+i,h.homeSite()&&(l+="&void=true"),n.enabled&&(n.set=!0),6616===e&&(s={status:0,video_data:{
clip__id:6616,clip__name:"Любовь в большом городе",clip__special_name:"",clip__description:"Действие фильма происходит в одном из самых романтичных мегаполисов мира – Нью-Йорке. Три друга Артем, Игорь и Оле, настоящий 'русский' финн работают на чужбине, а в свободное от работы время отрываются, 'как взрослые': ходят в сауну, в стриптиз-бары, крутят короткие и ни к чему не обязывающие романы. Секс для них давно превратился в забег на короткие дистанции, соблазненные женщины – в трофеи, а триумфальные победы – главная тема обсуждения во время каждого мальчишника... \r\n\r\nНо однажды случай вмешивается в их устоявшуюся, беспечную, разгильдяйскую жизнь... На очередной вечеринке в одном из клубов человек странного вида поднимает бокал и произносит тост. Пройдет совсем немного времени, и все трое обнаружат пренеприятнейшую перемену – они больше не могут заниматься сексом. \r\n\r\nКак вернуть мужскую силу? Корень женьшеня? Виагра? Тайский массаж? Консультации сексопатолога? Ничто не спасает. За что? Почему? И почему так рано? И почему именно мы? С этими вопросами наши герои в отчаянии бегают по специалистам... \r\n\r\nВ конце концов, они находят того самого человека с вечеринки, и выясняют, что тот, применив свои мистические способности, 'закодировал' их от беспорядочных связей. Их спасет только одно средство. Любовь. И секс будет. Но только с любимой женщиной. Осталось дело за малым – найти ее...\r\n\r\nФильм номинировался на кинофестивале Жорж в 2010 году.",clip__duration:88,clip__rates:74,clip__rating:4,clip__ratesum:311,clip__views:19450,clip__seo_alias:"Lyubov-v-bolshom-gorode-HD",clip__trailer_url:"",clip__topic:8305,clip__geo_limit:"RU UA BY KZ AZ AM KG UZ TM TJ MD IN KR US PL DE",requires_subscription:"No",clip__parent_node_id:"",clip__set_name:"",clip__position:"",clip__type_id:1,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:430602,clip__kp_rate:6.28,clip__imdb_id:"tt1366687",clip__imdb_rate:6,clip__download:1,clip_restriction__download:"svod",image_horizontal:"",image_vertical:"",clip_types__type:"Single",quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:16,url:"http://www.tvzavr.ru/Lyubov-v-bolshom-gorode-HD",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],actors:[{mark__id:14073,mark__name:"Филипп Киркоров",mark__seo_alias:"Filipp-Kirkorov",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14072,mark__name:"Лиза Арзамасова",mark__seo_alias:"Liza-Arzamasova",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14071,mark__name:"Владимир Зеленский",mark__seo_alias:"Vladimir-Zelenskii",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14070,mark__name:"Вилле Хаапасало",mark__seo_alias:"Ville-Khaapasalo1",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14069,mark__name:"Вера Брежнева",mark__seo_alias:"Vera-Brezhneva",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:9976,mark__name:"Анастасия Задорожная",mark__seo_alias:"Anastasiya-Zadorozhnaya",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:8052,mark__name:"Светлана Ходченкова",mark__seo_alias:"Svetlana-Khodchenkova",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:4516,mark__name:"Олеся Железняк",mark__seo_alias:"Olesya-Zheleznyak",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:3017,mark__name:"Алика Смехова",mark__seo_alias:"Alika-Smekhova",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:2524,mark__name:"Алексей Чадов",mark__seo_alias:"Aleksei-Chadov",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0}],directors:[{mark__id:14014,mark__name:"Марюс Вайсберг",mark__seo_alias:"rezhisser-Maryus-Vaisberg",mark_type__type:"Directors",clip_mark__clip_mark_position:"",mark__position:0}],tags:[{mark__id:13599,mark__name:"вечеринка",mark__seo_alias:"vecherinka-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:9582,mark__name:"современность",mark__seo_alias:"sovremennost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:8952,mark__name:"паранормальное",mark__seo_alias:"paranormalnoe-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:8805,mark__name:"Нью-Йорк",mark__seo_alias:"Nyu-Iork-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:7104,mark__name:"друзья",mark__seo_alias:"druzya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:5598,mark__name:"Америка",mark__seo_alias:"Amerika-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:4753,mark__name:"ловелас",mark__seo_alias:"lovelas-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:4108,mark__name:"секс",mark__seo_alias:"seks-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:2999,mark__name:"проклятие",mark__seo_alias:"proklyatie-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:894,mark__name:"любовь",mark__seo_alias:"lyubov-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:9598,mark__name:"16+",mark__seo_alias:"16-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:0,mark__position:0}],countries:[{mark__id:4145,mark__name:"Украина",mark__seo_alias:"Ukraina",mark_type__type:"Country",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:"",mark__position:0}],years:[{mark__id:233,mark__name:"2009",mark__seo_alias:"2009",mark_type__type:"Year",clip_mark__clip_mark_position:"",mark__position:0}],categories:[{mark__id:71,mark__name:"Фильмыы",mark__seo_alias:"Filmy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:1}],genres:[{mark__id:697,mark__name:"комедия",mark__seo_alias:"komediya",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:1},{mark__id:698,mark__name:"мелодрама",mark__seo_alias:"melodrama",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:11},{mark__id:706,mark__name:"фантастика",mark__seo_alias:"fantastika",mark_type__type:"Genre",clip_mark__clip_mark_position:3,mark__position:2},{mark__id:6467,mark__name:"фестивальный",mark__seo_alias:"festivalnoe",mark_type__type:"Genre",clip_mark__clip_mark_position:4,mark__position:24},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:5,mark__position:19}]}}),6617===e&&(s={status:0,video_data:{clip__id:6617,clip__name:"Любовь в большом городе 2",clip__special_name:"",clip__description:"Игорь приглашает Сауну и Артема с возлюбленными на ранчо к отцу. Ребята смогут отдохнуть, а Игорь наконец-то познакомит Настю с будущим тестем. Друзья пакуют чемоданы.\r\n\r\nВ самолете они знакомятся с парочкой американцев, которые рассказывают им о неком монастыре на окраине города, где будут жить наши герои, святом месте, согласно древнему преданию помогающем в борьбе с бесплодием. Игорь, Артем и Сауна единодушны – к отцовству они еще не готовы. Но на экскурсию в монастырь все-таки едут. Несмотря на предупреждение монаха, друзья прикасаются к 'идолу', и теперь они обречены при первом же половом акте зачать ребенка. Они озадачены – стоит верить предрассудкам или нет? На всякий случай, они решают временно воздержаться от секса. Девушки, узнав о причине такого странного поведения любимых, обижаются и уезжают.\r\n\r\nОставшись одни, ребята решают оттянуться по полной, но тут на их пути снова появляется святой Валентин. Он возмущен: как они могли не воспользоваться таким благословением? Рождается новое заклятие. Тот из троих, кто окажется первым в постели с женщиной, – станет отцом. Остальные смогут иметь детей лишь через 10 лет. О таком повороте событий никто и помыслить не мог. Все трое внезапно осознают, что готовы к отцовству... Приключения начинаются.\r\n\r\nФильм был номинирован на кинофестивале Жорж в 2011 году.",clip__duration:88,clip__rates:55,clip__rating:4,clip__ratesum:239,clip__views:28900,clip__seo_alias:"Lyubov-v-bolshom-gorode-2-HD",clip__trailer_url:"",clip__topic:8306,clip__geo_limit:"RU UA BY KZ AZ AM KG UZ TM TJ MD IN KR US PL DE",requires_subscription:"No",clip__parent_node_id:"",clip__set_name:"",clip__position:"",clip__type_id:1,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:451127,clip__kp_rate:6.302,clip__imdb_id:"tt1510274",clip__imdb_rate:6,clip__download:1,clip_restriction__download:"svod",image_horizontal:"",image_vertical:"",clip_types__type:"Single",quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:16,url:"http://www.tvzavr.ru/Lyubov-v-bolshom-gorode-2-HD",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],actors:[{mark__id:14073,mark__name:"Филипп Киркоров",mark__seo_alias:"Filipp-Kirkorov",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14071,mark__name:"Владимир Зеленский",mark__seo_alias:"Vladimir-Zelenskii",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14070,mark__name:"Вилле Хаапасало",mark__seo_alias:"Ville-Khaapasalo1",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14069,mark__name:"Вера Брежнева",mark__seo_alias:"Vera-Brezhneva",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:9976,mark__name:"Анастасия Задорожная",mark__seo_alias:"Anastasiya-Zadorozhnaya",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:8052,mark__name:"Светлана Ходченкова",mark__seo_alias:"Svetlana-Khodchenkova",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:4248,mark__name:"Павел Воля",mark__seo_alias:"Pavel-Volya",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:2524,mark__name:"Алексей Чадов",mark__seo_alias:"Aleksei-Chadov",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:2512,mark__name:"Леонид Ярмольник",mark__seo_alias:"Leonid-Yarmolnik",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:2376,mark__name:"Игорь Верник",mark__seo_alias:"Igor-Vernik",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0}],directors:[{mark__id:14014,mark__name:"Марюс Вайсберг",mark__seo_alias:"rezhisser-Maryus-Vaisberg",mark_type__type:"Directors",clip_mark__clip_mark_position:"",mark__position:0}],tags:[{mark__id:13734,mark__name:"монастырь",mark__seo_alias:"monastyr-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:9582,mark__name:"современность",mark__seo_alias:"sovremennost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:8952,mark__name:"паранормальное",mark__seo_alias:"paranormalnoe-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:7104,mark__name:"друзья",mark__seo_alias:"druzya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:6156,mark__name:"Россия",mark__seo_alias:"Rossiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:4108,mark__name:"секс",mark__seo_alias:"seks-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:894,mark__name:"любовь",mark__seo_alias:"lyubov-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:9598,mark__name:"16+",mark__seo_alias:"16-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:0,mark__position:0}],years:[{mark__id:234,mark__name:"2010",mark__seo_alias:"2010",mark_type__type:"Year",clip_mark__clip_mark_position:"",mark__position:0}],countries:[{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:"",mark__position:0}],categories:[{mark__id:71,mark__name:"Фильмыы",mark__seo_alias:"Filmy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:1}],genres:[{mark__id:697,mark__name:"комедия",mark__seo_alias:"komediya",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:1},{mark__id:698,mark__name:"мелодрама",mark__seo_alias:"melodrama",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:11},{mark__id:706,mark__name:"фантастика",mark__seo_alias:"fantastika",mark_type__type:"Genre",clip_mark__clip_mark_position:3,mark__position:2},{mark__id:6467,mark__name:"фестивальный",mark__seo_alias:"festivalnoe",mark_type__type:"Genre",clip_mark__clip_mark_position:4,mark__position:24},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:5,mark__position:19}]}}),18017===e&&(s={status:0,video_data:{clip__id:18017,clip__name:"Любовь в большом городе 3",clip__special_name:"",clip__description:"<p>Каждый отец хотя бы раз в жизни оставался сидеть с ребенком, пока мама наслаждается отдыхом с подругами. Игорь, Артем и Сауна отправили своих жен в отпуск, а сами приняли на себя домашнюю вахту.  Но совсем скоро им надоело сидеть с отпрысками. Очень захотелось, чтобы маленькие непоседы вдруг разом стали взрослыми. Но, как говорится, бойтесь своих желаний – фильм «Любовь в большом городе 3» рассказывает о том, что бывает, когда самые смелые из них вдруг исполняются. </p>\r\n<h2>Фильм «Любовь в большом городе 3», смотреть онлайн</h2>\r\n<p> «Любовь в большом городе 3» - фильм, который рассказывает о любви к собственным детям. Что почувствовали бы вы, если по воле волшебства любимые детки вдруг за одну ночь стали взрослыми? Наши старые знакомые – Игорь, Артем и Сауна – испытали это невероятное приключение на себе. </p>\r\n<p> «Любовь в большом городе 3» - фильм, который заставит смеяться всех членов семьи (рекомендуемый возраст 12+). В картине заняты уже полюбившиеся по предыдущим частям актеры (Алексей Чадов, Владимир Зеленский, Вилле Хаапасало, Вера Брежнева, Светлана Ходченкова, Настя Задорожная). Они так хорошо вжились в свои роли, что смотреть это кино без громового смеха просто невозможно. </p>  \r\n<p>В эпизодической роли снялись также Филипп Киркоров и знаменитая американская киноактриса Шерон Стоун – состав поистине звездный! </p>\r\n<p>Фильм «Любовь в большом городе 3» смотреть онлайн вы можете в любое удобное время на tvzavr. В отличном качестве, с высокой скоростью загрузки и удобным проигрывателем. </p> ",clip__duration:95,clip__rates:65,clip__rating:4,clip__ratesum:262,clip__views:21684,clip__seo_alias:"Lyubov-v-bolshom-gorode-3",clip__trailer_url:"",clip__topic:48893,clip__geo_limit:"KG KZ UZ RU TM TJ AM MD AZ UA BY",requires_subscription:"No",clip__parent_node_id:"",clip__set_name:"",clip__position:"",clip__type_id:1,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:468136,clip__kp_rate:6.155,clip__imdb_id:"tt2739884",clip__imdb_rate:5.3,clip__download:1,clip_restriction__download:"svod",image_horizontal:"",image_vertical:"",clip_types__type:"Single",quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:16,url:"http://www.tvzavr.ru/Lyubov-v-bolshom-gorode-3",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],actors:[{mark__id:30802,mark__name:"Настя Задорожная",mark__seo_alias:"Nastya-Zadorozhnaya",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14790,mark__name:"Екатерина Климова",mark__seo_alias:"Ekaterina-Klimova",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14073,mark__name:"Филипп Киркоров",mark__seo_alias:"Filipp-Kirkorov",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14071,mark__name:"Владимир Зеленский",mark__seo_alias:"Vladimir-Zelenskii",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14070,mark__name:"Вилле Хаапасало",mark__seo_alias:"Ville-Khaapasalo1",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14069,mark__name:"Вера Брежнева",mark__seo_alias:"Vera-Brezhneva",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:10998,mark__name:"Игорь Жижикин",mark__seo_alias:"Igor-Zhizhikin",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:8052,mark__name:"Светлана Ходченкова",mark__seo_alias:"Svetlana-Khodchenkova",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:7690,mark__name:"Шэрон Стоун",mark__seo_alias:"Sheron-Stoun",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:2524,mark__name:"Алексей Чадов",mark__seo_alias:"Aleksei-Chadov",mark_type__type:"Actors",clip_mark__clip_mark_position:"",mark__position:0}],directors:[{mark__id:25559,mark__name:"Дэвид Додсон",mark__seo_alias:"Devid-Dodson",mark_type__type:"Directors",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14014,mark__name:"Марюс Вайсберг",mark__seo_alias:"rezhisser-Maryus-Vaisberg",mark_type__type:"Directors",clip_mark__clip_mark_position:"",mark__position:0}],years:[{mark__id:21637,mark__name:"2013",mark__seo_alias:"2013",mark_type__type:"Year",clip_mark__clip_mark_position:"",mark__position:0}],tags:[{mark__id:19554,mark__name:"отец",mark__seo_alias:"otets",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:14090,mark__name:"блондинка",mark__seo_alias:"blondinka-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:13556,mark__name:"супруги",mark__seo_alias:"suprugi-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:12915,mark__name:"свадьба",mark__seo_alias:"svadba-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:9598,mark__name:"16+",mark__seo_alias:"16-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:9582,mark__name:"современность",mark__seo_alias:"sovremennost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:8805,mark__name:"Нью-Йорк",mark__seo_alias:"Nyu-Iork-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:6156,mark__name:"Россия",mark__seo_alias:"Rossiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:2716,mark__name:"волшебство",mark__seo_alias:"volshebstvo-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:2598,mark__name:"превращение",mark__seo_alias:"prevraschenie-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:2400,mark__name:"семья",mark__seo_alias:"semya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:1195,mark__name:"дети",mark__seo_alias:"deti-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:"",mark__position:0}],countries:[{mark__id:4145,mark__name:"Украина",mark__seo_alias:"Ukraina",mark_type__type:"Country",clip_mark__clip_mark_position:"",mark__position:0},{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:"",mark__position:0}],categories:[{mark__id:71,mark__name:"Фильмыы",mark__seo_alias:"Filmy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:1}],genres:[{mark__id:697,mark__name:"комедия",mark__seo_alias:"komediya",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:1},{mark__id:698,mark__name:"мелодрама",mark__seo_alias:"melodrama",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:11},{mark__id:5938,mark__name:"фэнтези",mark__seo_alias:"fentezi",mark_type__type:"Genre",clip_mark__clip_mark_position:3,mark__position:4},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:4,mark__position:19}]}}),23879===e&&(s={status:0,video_data:{clip__id:23879,clip__name:"",clip__special_name:"",clip__description:"Эта лирическая мелодрама рассказывает о любви двух зрелых людей – учительницы Александры и бывшего летчика Евгения. Роднит их разочарованность в семейной жизни, неустроенность в жизни бытовой, готовность всегда кинуться на помощь слабому и обиженному. Обаятельные, но зачастую трогательно-нелепые, оба растят своих детей в одиночку: Александра – сына Сашку, Евгений – дочку Женьку. Встретившись в школе, герои волею обстоятельств начинают регулярно видеться. И постепенно осознают, что их встреча – начало большого и сильного чувства. За которое им придется бороться. Против этой любви, казалось бы, многое: разница в возрасте, зацикленность Евгения на дочке, которая лишена материнской ласки, его конфликт со старшим сыном Василием, козни бывшего мужа Александры. Но тезки своих родителей – Сашка и Женька – очень поспособствуют сближению героев. Мальчик в восторге от Евгения – некогда бравого летчика, настоящего мужчины в поведении: скупого на слова, решительного в поступках. А Женька искренне привяжется к Александре, которая окружит девочку заботой и лаской. И внезапное появление Зои, родной матери Жени, которую та считала погибшей, повергнет девочку в шок. И станет главным препятствием для Евгения и Александры. Евгений объяснит дочке, почему врал ей столько лет о матери. А вот объяснить свою ложь Александре он не сможет, сказав только одно: у них нет будущего. Но близкие героев (друг-летчик Никита, дети) не позволят им расстаться. Евгений и Александра все равно будут вместе. И шутливо назовут свою «свежеобразованную» семью – ДВА ПЛЮС ДВА.",clip__duration:44,clip__rates:1,clip__rating:5,clip__ratesum:5,clip__views:53,clip__seo_alias:"Dva-plyus-dva-1",clip__trailer_url:"",clip__topic:56465,clip__geo_limit:"GB NO BG IT IS EE ME CY KH HU ES TJ BA AZ EU TH MK AD PL AL LU PT DK MT UZ SK DE LI AT MC RO AM CZ LT HR NL IE RU BY CN MY BE V",requires_subscription:"No",clip__parent_node_id:23878,clip__set_name:"Два плюс два",clip__position:1,clip__type_id:3,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:"",clip__kp_rate:"",clip__imdb_id:"",clip__imdb_rate:"",clip__download:1,clip_restriction__download:"svod,est",image_horizontal:"",image_vertical:"",clip_types__type:"SetElement",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:16,url:"http://www.tvzavr.ru/Dva-plyus-dva-1",next_id:23880,categories:[{mark__id:675,mark__name:"Сериалы",mark__seo_alias:"Serialy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:2}],directors:[{mark__id:34796,mark__name:"Александр Итыгилов мл.",mark__seo_alias:"Aleksandr-Itygilov-ml",mark_type__type:"Directors",clip_mark__clip_mark_position:1,mark__position:0}],years:[{mark__id:31712,mark__name:"2015",mark__seo_alias:"2015",mark_type__type:"Year",clip_mark__clip_mark_position:1,mark__position:0}],actors:[{mark__id:2265,mark__name:"Мария Куликова",mark__seo_alias:"Mariya-Kulikova",mark_type__type:"Actors",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:2514,mark__name:"Олег Штефанко",mark__seo_alias:"Oleg-Shtefanko",mark_type__type:"Actors",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:8298,mark__name:"Максим Дрозд",mark__seo_alias:"Maksim-Drozd",mark_type__type:"Actors",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:3107,mark__name:"Константин Соловьев",mark__seo_alias:"Konstantin-Solovev",mark_type__type:"Actors",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:34724,mark__name:"Екатерина Молоховская",mark__seo_alias:"Ekaterina-Molokhovskaya",mark_type__type:"Actors",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:21980,mark__name:"Дарья Боцманова",mark__seo_alias:"Darya-Botsmanova",mark_type__type:"Actors",clip_mark__clip_mark_position:6,mark__position:0},{mark__id:36581,mark__name:"Вениамин Прибура",mark__seo_alias:"Veniamin-Pribura",mark_type__type:"Actors",clip_mark__clip_mark_position:7,mark__position:0},{mark__id:36580,mark__name:"Дмитрий Сова",mark__seo_alias:"Dmitrii-Sova",mark_type__type:"Actors",clip_mark__clip_mark_position:8,mark__position:0},{mark__id:36579,mark__name:"Виктория Булитко",mark__seo_alias:"Viktoriya-Bulitko",mark_type__type:"Actors",clip_mark__clip_mark_position:9,mark__position:0},{mark__id:36578,mark__name:"Татьяна Юрикова",mark__seo_alias:"Tatyana-Yurikova",mark_type__type:"Actors",clip_mark__clip_mark_position:10,mark__position:0}],tags:[{mark__id:894,mark__name:"любовь",mark__seo_alias:"lyubov-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:1195,mark__name:"дети",mark__seo_alias:"deti-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:2400,mark__name:"семья",mark__seo_alias:"semya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:2774,mark__name:"собака",mark__seo_alias:"sobaka-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:3361,mark__name:"любовный треугольник",mark__seo_alias:"lyubovnyi-treugolnik-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:5282,mark__name:"ревность",mark__seo_alias:"revnost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:6,mark__position:0},{mark__id:6156,mark__name:"Россия",mark__seo_alias:"Rossiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:7,mark__position:0},{mark__id:6354,mark__name:"мать",mark__seo_alias:"mat-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:8,mark__position:0},{mark__id:7104,mark__name:"друзья",mark__seo_alias:"druzya-tag",mark_type__type:"Tags",
clip_mark__clip_mark_position:9,mark__position:0},{mark__id:9582,mark__name:"современность",mark__seo_alias:"sovremennost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:10,mark__position:0},{mark__id:9598,mark__name:"16+",mark__seo_alias:"16-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:11,mark__position:0},{mark__id:14301,mark__name:"одинокий родитель",mark__seo_alias:"odinokii-roditel-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:12,mark__position:0},{mark__id:14315,mark__name:"приемные родители",mark__seo_alias:"priemnye-roditeli-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:13,mark__position:0}],countries:[{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:1,mark__position:0}],genres:[{mark__id:698,mark__name:"мелодрама",mark__seo_alias:"melodrama",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:11},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:19}]}}),22100===e&&(s={status:0,video_data:{clip__id:22100,clip__name:"Статус: Свободен",clip__special_name:"",clip__description:"<p>Стендап-комик Никита был уверен, что он и его возлюбленная Афина просто идеальная пара. За два года совместных отношений они почти не ссорились и проводили все время вместе, но однажды девушка заявила, что уходит от него к другому мужчине. Обиженный Никита пообещал, что уже через неделю она будет вновь его. Герой начинает прикладывать все силы, чтобы отбить свою любимую у конкурента, но сделать это оказывает очень непросто. </p>\r\n\r\n<h2>Фильм «Статус: Свободен» смотреть онлайн</h2>\r\n<p>Одним из самых ожидаемых российских фильмов последнего времени, безусловно, стала комедийная мелодрама «Статус: Свободен», рассказывающая историю непростых отношений одной очень яркой пары. Режиссером проекта стал Павел Руминов, которому удалось снять действительно стоящую картину. Образы главных героев фильма «Статус: Свободен» на экране воплотили талантливые и очень популярные отечественные актеры Елизавета Боярская и Данила Козловский. Им удалось великолепно вжиться в свои роли и сделать персонажей очень яркими, интересными и живыми. </p> \r\n<p> «Статус: Свободен» – фильм, в котором трогательная мелодрама великолепно сочетается с очень смешной комедией. В данной картине затрагивается множество проблем, с которыми люди сталкиваются, пребывая в длительных отношениях, поэтому эта кинолента может быть не только интересной, но и в какой-то степени полезной. Интригующий жизненный сюжет, большое количество смешных шуток, бесподобная актерская игра и хорошее музыкальное сопровождение – вот, что делает фильм «Статус: Свободен» одним из лучших отечественных проектов последнего времени. </p>\r\n<p>На tvzavr собрано множество фильмов, сериалов и анимационных лент со всего мира, которые можно смотреть в хорошем качестве. Данная российская комедийная мелодрама, которая обязательно понравится всем поклонником жанра, не является исключением. Зрители онлайн-кинотеатра tvzavr могут смотреть фильм «Статус: Свободен» в многофункциональном плеере и в любое удобное время. </p> ",clip__duration:99,clip__rates:228,clip__rating:4,clip__ratesum:959,clip__views:22153,clip__seo_alias:"Status-Svoboden",clip__trailer_url:"94ed1fc6-7379-4988-ada2-73707923c392",clip__topic:54686,clip__geo_limit:"UA UZ MD BY RU KZ KG AZ AM TM TJ",requires_subscription:"No",clip__parent_node_id:"",clip__set_name:"",clip__position:"",clip__type_id:1,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:838856,clip__kp_rate:5.815,clip__imdb_id:"tt5352802",clip__imdb_rate:5.8,clip__download:1,clip_restriction__download:"svod",image_horizontal:"",image_vertical:"",clip_types__type:"Single",quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:16,url:"http://www.tvzavr.ru/Status-Svoboden",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],categories:[{mark__id:71,mark__name:"Фильмыы",mark__seo_alias:"Filmy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:1}],years:[{mark__id:31712,mark__name:"2015",mark__seo_alias:"2015",mark_type__type:"Year",clip_mark__clip_mark_position:1,mark__position:0}],actors:[{mark__id:24328,mark__name:"Данила Козловский",mark__seo_alias:"Danila-Kozlovskii",mark_type__type:"Actors",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:14746,mark__name:"Елизавета Боярская",mark__seo_alias:"Elizaveta-Boyarskaya",mark_type__type:"Actors",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:33204,mark__name:"Владимир Селезнев",mark__seo_alias:"Vladimir-Seleznev",mark_type__type:"Actors",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:30225,mark__name:"Игорь Войнаровский",mark__seo_alias:"Igor-Voinarovskii",mark_type__type:"Actors",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:34200,mark__name:"Наталья Анисимова",mark__seo_alias:"Natalya-Anisimova",mark_type__type:"Actors",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:33609,mark__name:"Паулина Андреева",mark__seo_alias:"Paulina-Andreeva",mark_type__type:"Actors",clip_mark__clip_mark_position:6,mark__position:0},{mark__id:34199,mark__name:"Надежда Звенигородская",mark__seo_alias:"Nadezhda-Zvenigorodskaya",mark_type__type:"Actors",clip_mark__clip_mark_position:7,mark__position:0},{mark__id:34198,mark__name:"Милош Руминов",mark__seo_alias:"Milosh-Ruminov",mark_type__type:"Actors",clip_mark__clip_mark_position:8,mark__position:0},{mark__id:14083,mark__name:"Михаил Крылов",mark__seo_alias:"Mikhail-Krylov",mark_type__type:"Actors",clip_mark__clip_mark_position:9,mark__position:0},{mark__id:34197,mark__name:"Катрин Асси",mark__seo_alias:"Katrin-Assi",mark_type__type:"Actors",clip_mark__clip_mark_position:10,mark__position:0}],directors:[{mark__id:3727,mark__name:"Павел Руминов",mark__seo_alias:"rezhisser-Pavel-Ruminov",mark_type__type:"Directors",clip_mark__clip_mark_position:1,mark__position:0}],tags:[{mark__id:894,mark__name:"любовь",mark__seo_alias:"lyubov-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:3361,mark__name:"любовный треугольник",mark__seo_alias:"lyubovnyi-treugolnik-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:4676,mark__name:"любовники",mark__seo_alias:"lyubovniki-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:6156,mark__name:"Россия",mark__seo_alias:"Rossiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:9582,mark__name:"современность",mark__seo_alias:"sovremennost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:9598,mark__name:"16+",mark__seo_alias:"16-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:6,mark__position:0}],countries:[{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:1,mark__position:0}],genres:[{mark__id:697,mark__name:"комедия",mark__seo_alias:"komediya",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:1},{mark__id:698,mark__name:"мелодрама",mark__seo_alias:"melodrama",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:11},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:3,mark__position:19}]}}),24080===e&&(s={status:0,video_data:{clip__id:24080,clip__name:"",clip__special_name:"",clip__description:"Молодая художница Анна живет в уютном домике на берегу реки со своей матерью. Она зарабатывает на жизнь продажей картин, обеспечивая скромное существование своей семье. Судьба сводит её с успешным бизнесменом Филоновым, который безумно влюбляется в неё и делает Анне предложение, которое она принимает.\r\n\r\nАнна счастлива. Любящий муж, большой дом, обеспеченная жизнь и ожидание ребёнка. О чем ещё может мечтать любая девушка? Но в одно мгновение безмятежная жизнь заканчивается. Совместная поездка с мужем за город оборачивается страшной трагедией.",clip__duration:46,clip__rates:1,clip__rating:5,clip__ratesum:5,clip__views:53,clip__seo_alias:"Domik-u-reki-1",clip__trailer_url:"",clip__topic:56665,clip__geo_limit:"SG PH DE AL VA HU GR DK KZ SE LU NO MT FI FR GB MC UA GE ES IT KH LA MM TH PT SK BE MD TM BG LI SM ME RO CZ MY BN TL AM ID BA S",requires_subscription:"No",clip__parent_node_id:24079,clip__set_name:"Домик у реки",clip__position:1,clip__type_id:3,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:"",clip__kp_rate:"",clip__imdb_id:"",clip__imdb_rate:"",clip__download:1,clip_restriction__download:"svod,est",image_horizontal:"",image_vertical:"",clip_types__type:"SetElement",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:12,url:"http://www.tvzavr.ru/Domik-u-reki-1",next_id:24081,categories:[{mark__id:675,mark__name:"Сериалы",mark__seo_alias:"Serialy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:2}],directors:[{mark__id:36583,mark__name:"Марина Исаева",mark__seo_alias:"Marina-Isaeva",mark_type__type:"Directors",clip_mark__clip_mark_position:1,mark__position:0}],years:[{mark__id:26430,mark__name:"2014",mark__seo_alias:"2014",mark_type__type:"Year",clip_mark__clip_mark_position:1,mark__position:0}],actors:[{mark__id:3032,mark__name:"Валентина Теличкина",mark__seo_alias:"Valentina-Telichkina",mark_type__type:"Actors",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:4517,mark__name:"Евгения Лоза",mark__seo_alias:"Evgeniya-Loza",mark_type__type:"Actors",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:5218,mark__name:"Татьяна Лютаева",mark__seo_alias:"Tatyana-Lyutaeva",mark_type__type:"Actors",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:5569,mark__name:"Валентин Смирнитский",mark__seo_alias:"Valentin-Smirnitskii",mark_type__type:"Actors",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:11446,mark__name:"Сергей Насибов",mark__seo_alias:"Sergei-Nasibov",mark_type__type:"Actors",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:32476,mark__name:"Максим Щеголев",mark__seo_alias:"Maksim-Schegolev",mark_type__type:"Actors",clip_mark__clip_mark_position:6,mark__position:0},{mark__id:36595,mark__name:"Григорий Зельцер",mark__seo_alias:"Grigorii-Zeltser",mark_type__type:"Actors",clip_mark__clip_mark_position:7,mark__position:0}],countries:[{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:1,mark__position:0}],tags:[{mark__id:88,mark__name:"художник",mark__seo_alias:"khudozhnik-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:893,mark__name:"трагедия",mark__seo_alias:"tragediya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:894,mark__name:"любовь",mark__seo_alias:"lyubov-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:2400,mark__name:"семья",mark__seo_alias:"semya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:4394,mark__name:"деревня",mark__seo_alias:"derevnya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:6354,mark__name:"мать",mark__seo_alias:"mat-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:6,mark__position:0},{mark__id:9885,mark__name:"больница",mark__seo_alias:"bolnitsa-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:7,mark__position:0},{mark__id:12915,mark__name:"свадьба",mark__seo_alias:"svadba-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:8,mark__position:0},{mark__id:13538,mark__name:"кровь",mark__seo_alias:"krov-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:9,mark__position:0},{mark__id:13556,mark__name:"супруги",mark__seo_alias:"suprugi-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:10,mark__position:0},{mark__id:13557,mark__name:"бизнесмен",mark__seo_alias:"biznesmen-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:11,mark__position:0},{mark__id:14090,mark__name:"блондинка",mark__seo_alias:"blondinka-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:12,mark__position:0},{mark__id:18576,mark__name:"12+",mark__seo_alias:"12",mark_type__type:"Tags",clip_mark__clip_mark_position:13,mark__position:0}],genres:[{mark__id:693,mark__name:"детектив",mark__seo_alias:"detektiv",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:12},{mark__id:698,mark__name:"мелодрама",mark__seo_alias:"melodrama",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:11},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:3,mark__position:19}]}}),23894===e&&(s={status:0,video_data:{clip__id:23894,clip__name:"",clip__special_name:"",clip__description:"Карьера известной в прошлом певицы Марты Вейро (Риты) клонится к закату. Ее продюсер и гражданский муж Сергей Воронов не может смириться с финансовым крахом и разрабатывает криминальный план обогащения. Умело манипулируя Ритой, Воронов убеждает ее, что путь к их счастью лежит через преступление: она должна подставить богатого поклонника Игоря, с которым в юности у нее был бурный роман. Ситуация осложняется еще и тем, что Рита по-прежнему испытывает романтические чувства к Игорю. Под давлением Сергея Рита совершает подлость. Но идеальный план подельников дает трещину – Игорь сбегает от правосудия и меняет внешность. Теперь Рите и Сергею нет покоя ни днем, ни ночью...",clip__duration:43,clip__rates:1,clip__rating:5,clip__ratesum:5,clip__views:53,clip__seo_alias:"Kholodnyi-raschet-1",clip__trailer_url:"",clip__topic:56480,clip__geo_limit:"UA BG AZ EU FR AT DK SE ES CZ BA CN BE CY LU NO SK GB ID SM BY TJ MC IE NL CH MT FI TH AL ME UZ MM GR PL LA PT AD AM KZ SI EE H",requires_subscription:"No",clip__parent_node_id:23893,clip__set_name:"Холодный расчет",clip__position:1,clip__type_id:3,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:"",clip__kp_rate:"",clip__imdb_id:"",clip__imdb_rate:"",clip__download:1,clip_restriction__download:"svod,est",image_horizontal:"",image_vertical:"",clip_types__type:"SetElement",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:12,url:"http://www.tvzavr.ru/Kholodnyi-raschet-1",next_id:23895,categories:[{mark__id:675,mark__name:"Сериалы",mark__seo_alias:"Serialy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:2}],directors:[{mark__id:36584,mark__name:"Андрей Балашов",mark__seo_alias:"Andrei-Balashov",mark_type__type:"Directors",clip_mark__clip_mark_position:1,mark__position:0}],years:[{mark__id:26430,mark__name:"2014",mark__seo_alias:"2014",mark_type__type:"Year",clip_mark__clip_mark_position:1,mark__position:0}],actors:[{mark__id:4245,mark__name:"Даниил Страхов",mark__seo_alias:"Daniil-Strakhov",mark_type__type:"Actors",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:36600,mark__name:"Евгения Чиркова",mark__seo_alias:"Evgeniya-Chirkova",mark_type__type:"Actors",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:36599,mark__name:"Владимир Панков",mark__seo_alias:"Vladimir-Pankov",mark_type__type:"Actors",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:8002,mark__name:"Петр Баранчеев",mark__seo_alias:"Petr-Barancheev",mark_type__type:"Actors",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:14752,mark__name:"Юрий Ицков",mark__seo_alias:"Yurii-Itskov",mark_type__type:"Actors",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:36598,mark__name:"Андрей Терентьев",mark__seo_alias:"Andrei-Terentev",mark_type__type:"Actors",clip_mark__clip_mark_position:6,mark__position:0},{mark__id:16630,mark__name:"Олег Алмазов",mark__seo_alias:"Oleg-Almazov",mark_type__type:"Actors",clip_mark__clip_mark_position:7,mark__position:0},{mark__id:36597,mark__name:"Андрей Белоцерковский",mark__seo_alias:"Andrei-Belotserkovskii",mark_type__type:"Actors",clip_mark__clip_mark_position:8,mark__position:0},{mark__id:34866,mark__name:"Алла Вербицкая",mark__seo_alias:"Alla-Verbitskaya",mark_type__type:"Actors",clip_mark__clip_mark_position:9,mark__position:0},{mark__id:36596,mark__name:"Алексей Афтайкин",mark__seo_alias:"Aleksei-Aftaikin",mark_type__type:"Actors",clip_mark__clip_mark_position:10,mark__position:0}],tags:[{mark__id:3361,mark__name:"любовный треугольник",mark__seo_alias:"lyubovnyi-treugolnik-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:6156,mark__name:"Россия",mark__seo_alias:"Rossiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:9582,mark__name:"современность",mark__seo_alias:"sovremennost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:12912,mark__name:"певец/певица",mark__seo_alias:"penie-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:13560,mark__name:"мошенничество",mark__seo_alias:"moshennichestvo-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:13581,mark__name:"маскировка",mark__seo_alias:"maskirovka-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:6,mark__position:0},{mark__id:18576,mark__name:"12+",mark__seo_alias:"12",mark_type__type:"Tags",clip_mark__clip_mark_position:7,mark__position:0}],countries:[{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:1,mark__position:0}],genres:[{mark__id:698,mark__name:"мелодрама",mark__seo_alias:"melodrama",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:11},{mark__id:693,mark__name:"детектив",mark__seo_alias:"detektiv",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:12},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:3,mark__position:19}]}}),28508===e&&(s={status:0,video_data:{clip__id:28508,clip__name:"",clip__special_name:"",clip__description:"Спустя неделю после трагической гибели Анатолия Ивановича его сын Сергей переживает новый шок. Он получает письмо от матери, которую все считали давно умершей. Мать рассказывает Сергею, что его отец бросил ее, безнадежно больную туберкулезом, почти тридцать лет назад. Однако она выжила, за долгие годы испытала много невзгод и вот теперь решила найти сына. Сергей счастлив.\n\nОн привозит мать в свой дом. Но у нее почему-то сразу не складываются отношения с невесткой. Жена Сергея не доверяет Валентине, ей кажется, что за появлением этой женщины кроется что-то странное.\n\nОльга пытается выяснить, что произошло в семье Коростылевых тридцать лет назад. Она едет в город, где прошло детство Сергея. Правда, которую она постепенно открывает, оказывается настоящей бочкой с динамитом. Ольга понимает, что ей надо срочно спасать свою семью. Вот только удастся ли ей выбраться из этого города живой?",clip__duration:45,clip__rates:0,clip__rating:0,clip__ratesum:0,clip__views:53,clip__seo_alias:"Zabytaya-zhenschina-2",clip__trailer_url:"",clip__topic:61103,clip__geo_limit:"LV EE LT KZ BY RU UA KG TJ TM AM AZ MD UZ GE DE AT BE GR IE ES IT CY LU MT NL PT SK SI FI FR AD GB BG LI AL VA HR MC SM ME HU D",requires_subscription:"No",clip__parent_node_id:28506,clip__set_name:"Забытая женщина",clip__position:2,clip__type_id:3,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:"",clip__kp_rate:"",clip__imdb_id:"",clip__imdb_rate:"",clip__download:1,clip_restriction__download:"est,svod",image_horizontal:"",image_vertical:"",clip_types__type:"SetElement",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:12,url:"http://www.tvzavr.ru/Zabytaya-zhenschina-2",next_id:28509,categories:[{mark__id:675,mark__name:"Сериалы",mark__seo_alias:"Serialy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:2}],years:[{mark__id:39188,mark__name:"2017",mark__seo_alias:"2017",mark_type__type:"Year",clip_mark__clip_mark_position:1,mark__position:0}],directors:[{mark__id:31722,mark__name:"Денис Елеонский",mark__seo_alias:"Denis-Eleonskii",mark_type__type:"Directors",clip_mark__clip_mark_position:1,mark__position:0}],tags:[{mark__id:6156,mark__name:"Россия",mark__seo_alias:"Rossiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:6354,mark__name:"мать",mark__seo_alias:"mat-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:9582,mark__name:"современность",mark__seo_alias:"sovremennost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:9590,mark__name:"повседневность",mark__seo_alias:"povsednevnost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:13547,mark__name:"провинция",mark__seo_alias:"provintsiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:18576,mark__name:"12+",mark__seo_alias:"12",mark_type__type:"Tags",clip_mark__clip_mark_position:6,mark__position:0}],actors:[{mark__id:2432,mark__name:"Ирина Розанова",mark__seo_alias:"Irina-Rozanova",mark_type__type:"Actors",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:4242,mark__name:"Артур Ваха",mark__seo_alias:"Artur-Vakha",mark_type__type:"Actors",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:10277,mark__name:"Александр Игнатуша",mark__seo_alias:"Aleksandr-Ignatusha",mark_type__type:"Actors",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:16840,mark__name:"Анна Миклош",mark__seo_alias:"Anna-Miklosh",mark_type__type:"Actors",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:38908,mark__name:"Алексей Морозов",mark__seo_alias:"Aleksei-Morozov",mark_type__type:"Actors",clip_mark__clip_mark_position:5,mark__position:0}],countries:[{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:4145,mark__name:"Украина",mark__seo_alias:"Ukraina",mark_type__type:"Country",clip_mark__clip_mark_position:2,mark__position:0}],genres:[{mark__id:698,mark__name:"мелодрама",mark__seo_alias:"melodrama",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:11},{mark__id:693,mark__name:"детектив",mark__seo_alias:"detektiv",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:12},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:3,mark__position:19}]}}),28618===e&&(s={status:0,video_data:{clip__id:28618,clip__name:"",clip__special_name:"",clip__description:"Сестры Ирина и Анастасия похожи внешне, но характеры совершенно разные. Школьная учительница Ира – скромница, в то время как младшая Настя, певица в ночном клубе, – полная ее противоположность. Однажды Настя просит сестру выручить, на время заменив ее на работе. Безотказная Ира соглашается, но когда приезжает в дом сестры, обнаруживает окровавленный труп неизвестного мужчины. В этот момент ее и застает бывший муж Насти, Михаил. В убитом он узнает владельца клуба, где поет его бывшая жена. Только что выпущенный из СИЗО, где сидел по подозрению в убийстве, Михаил понимает, что новые проблемы ему не нужны, и решает спрятать тело в багажнике машины. Ни Ирина, ни Михаил и подумать не могли, что по роковой случайности машину с «сюрпризом» угонят...",clip__duration:45,clip__rates:2,clip__rating:5,clip__ratesum:10,clip__views:53,clip__seo_alias:"Baryshnya-i-Khuligan-4",clip__trailer_url:"",clip__topic:61214,clip__geo_limit:"LV EE LT KZ BY RU UA KG TJ TM AM AZ MD UZ GE DE AT BE GR IE ES IT CY LU MT NL PT SK SI FI FR AD GB BG LI AL VA HR MC SM ME HU D",requires_subscription:"No",clip__parent_node_id:28614,clip__set_name:"Барышня и Хулиган",clip__position:4,clip__type_id:3,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:"",clip__kp_rate:"",clip__imdb_id:"",clip__imdb_rate:"",clip__download:1,clip_restriction__download:"svod,est",image_horizontal:"",image_vertical:"",clip_types__type:"SetElement",quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:12,url:"http://www.tvzavr.ru/Baryshnya-i-Khuligan-4",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],categories:[{
mark__id:675,mark__name:"Сериалы",mark__seo_alias:"Serialy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:2}],actors:[{mark__id:40706,mark__name:"Анастасия Савосина",mark__seo_alias:"Anastasiya-Savosina",mark_type__type:"Actors",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:40705,mark__name:"Наталия Быстрова",mark__seo_alias:"Nataliya-Bystrova",mark_type__type:"Actors",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:40704,mark__name:"Максим Митяшин",mark__seo_alias:"Maksim-Mityashin",mark_type__type:"Actors",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:8048,mark__name:"Дмитрий Исаев",mark__seo_alias:"Dmitrii-Isaev",mark_type__type:"Actors",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:22070,mark__name:"Александр Пашков",mark__seo_alias:"Aleksandr-Pashkov",mark_type__type:"Actors",clip_mark__clip_mark_position:5,mark__position:0}],years:[{mark__id:39188,mark__name:"2017",mark__seo_alias:"2017",mark_type__type:"Year",clip_mark__clip_mark_position:1,mark__position:0}],directors:[{mark__id:15845,mark__name:"Олег Штром",mark__seo_alias:"rezhisser-Oleg-Shtrom",mark_type__type:"Directors",clip_mark__clip_mark_position:1,mark__position:0}],tags:[{mark__id:717,mark__name:"экранизация",mark__seo_alias:"ekranizatsiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:1039,mark__name:"убийство",mark__seo_alias:"ubiistvo-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:1510,mark__name:"учитель/воспитатель",mark__seo_alias:"uchitel-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:6156,mark__name:"Россия",mark__seo_alias:"Rossiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:9582,mark__name:"современность",mark__seo_alias:"sovremennost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:12912,mark__name:"певец/певица",mark__seo_alias:"penie-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:6,mark__position:0},{mark__id:13554,mark__name:"бывшие супруги",mark__seo_alias:"byvshie-suprugi-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:7,mark__position:0},{mark__id:13824,mark__name:"сестры",mark__seo_alias:"sestry-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:8,mark__position:0},{mark__id:18576,mark__name:"12+",mark__seo_alias:"12",mark_type__type:"Tags",clip_mark__clip_mark_position:9,mark__position:0}],countries:[{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:1,mark__position:0}],genres:[{mark__id:693,mark__name:"детектив",mark__seo_alias:"detektiv",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:12},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:19}]}}),28536===e&&(s={status:0,video_data:{clip__id:28536,clip__name:"",clip__special_name:"",clip__description:"Встреча бывших одноклассников становится для Ирины и Сергея судьбоносной – прежние чувства не остыли, и вскоре сорокалетние влюбленные понимают, что их расставание 25 лет назад было ошибкой. Сергей – вдовец, Ирина давно в разводе. Казалось бы, ничего не должно помешать их долгожданному счастью, но у обоих – взрослые дочери. Алина и Женя почти ровесницы, но характеры и жизненные ценности у девушек совершенно разные. Из-за столкновения характеров сводных сестер счастье родителей становится под угрозой.",clip__duration:45,clip__rates:0,clip__rating:0,clip__ratesum:0,clip__views:53,clip__seo_alias:"Svodnye-sestry-2",clip__trailer_url:"",clip__topic:61131,clip__geo_limit:"LV EE LT KZ BY RU UA KG TJ TM AM AZ MD UZ GE DE AT BE GR IE ES IT CY LU MT NL PT SK SI FI FR AD GB BG LI AL VA HR MC SM ME HU D",requires_subscription:"No",clip__parent_node_id:28534,clip__set_name:"Сводные сестры",clip__position:2,clip__type_id:3,clip__season_name:"",clip__season_number:"",clip__visible:!0,clip__kp_id:"",clip__kp_rate:"",clip__imdb_id:"",clip__imdb_rate:"",clip__download:1,clip_restriction__download:"svod,est",image_horizontal:"",image_vertical:"",clip_types__type:"SetElement",quality:[{quality__alias:"nr",quality__name:"Normal"},{quality__alias:"hd",quality__name:"HD"},{quality__alias:"sd",quality__name:"SD"},{quality__alias:"fhd",quality__name:"Full HD"}],age_limit:12,url:"http://www.tvzavr.ru/Svodnye-sestry-2",tariffs:[{type_alias:"subscription",tariff__id:25,tariff__type_id:1,tariff__price:99,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Отключи рекламу на tvzavr!",tariff__description:"Хотите смотреть фильмы без рекламы? После оплаты вам будет доступен просмотр всех бесплатных фильмов на tvzavr.ru и в приложениях tvzavr (SmartTV, Android и iOS) без надоедливой рекламы в течение месяца!\r\nПредложение не распространяется на фильмы по подписке «TVZAVR+».\r\n",tariff__tariff_category:"disabled-ads",tariff__vod_system:"svod",tariff_to_group__priority:"",tariff_group__name:"",tariff__ios_id:"ru.tvzavr.iosapp.avod",tariff__download:0,tariff__test_period:0},{type_alias:"subscription",tariff__id:2,tariff__type_id:1,tariff__price:249,tariff__currency_iso:"RUB",tariff__duration:30,tariff__hidden:!1,tariff__name:"Подписка TVZAVR+",tariff__description:"Подписка «TVZAVR+» - это каталог лучших фильмов, мультфильмов и сериалов в отличном качестве, который будет доступен для просмотра неограниченное количество раз в течение месяца. Покупая подписку, вы также получаете автоматическое отключение рекламы в бесплатных фильмах tvzavr. Доступно на всех устройствах.",tariff__tariff_category:"base-subscription",tariff__vod_system:"svod",tariff_to_group__priority:0,tariff_group__name:"подписка",tariff__ios_id:"ru.tvzavr.iosapp.svod",tariff__download:1,tariff__test_period:7}],categories:[{mark__id:675,mark__name:"Сериалы",mark__seo_alias:"Serialy",mark_type__type:"Categories",clip_mark__clip_mark_position:"",mark__position:2}],actors:[{mark__id:40659,mark__name:"Екатерина Марченко",mark__seo_alias:"Ekaterina-Marchenko",mark_type__type:"Actors",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:40658,mark__name:"Юля Шугар",mark__seo_alias:"Yulya-Shugar",mark_type__type:"Actors",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:15896,mark__name:"Наталия Антонова",mark__seo_alias:"Nataliya-Antonova",mark_type__type:"Actors",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:15902,mark__name:"Дмитрий Ульянов",mark__seo_alias:"Dmitrii-Ulyanov",mark_type__type:"Actors",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:21874,mark__name:"Борис Хвошнянский",mark__seo_alias:"Boris-Khvoshnyanskii",mark_type__type:"Actors",clip_mark__clip_mark_position:5,mark__position:0}],directors:[{mark__id:40656,mark__name:"Игорь Москвитин",mark__seo_alias:"Igor-Moskvitin",mark_type__type:"Directors",clip_mark__clip_mark_position:1,mark__position:0}],years:[{mark__id:34233,mark__name:"2016",mark__seo_alias:"2016",mark_type__type:"Year",clip_mark__clip_mark_position:1,mark__position:0}],tags:[{mark__id:894,mark__name:"любовь",mark__seo_alias:"lyubov-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:1,mark__position:0},{mark__id:2991,mark__name:"противостояние",mark__seo_alias:"protivostoyanie-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:2,mark__position:0},{mark__id:6156,mark__name:"Россия",mark__seo_alias:"Rossiya-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:3,mark__position:0},{mark__id:9582,mark__name:"современность",mark__seo_alias:"sovremennost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:4,mark__position:0},{mark__id:9590,mark__name:"повседневность",mark__seo_alias:"povsednevnost-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:5,mark__position:0},{mark__id:13824,mark__name:"сестры",mark__seo_alias:"sestry-tag",mark_type__type:"Tags",clip_mark__clip_mark_position:6,mark__position:0},{mark__id:18576,mark__name:"12+",mark__seo_alias:"12",mark_type__type:"Tags",clip_mark__clip_mark_position:7,mark__position:0}],countries:[{mark__id:122,mark__name:"Россия",mark__seo_alias:"Rossiya",mark_type__type:"Country",clip_mark__clip_mark_position:1,mark__position:0}],genres:[{mark__id:698,mark__name:"мелодрама",mark__seo_alias:"melodrama",mark_type__type:"Genre",clip_mark__clip_mark_position:1,mark__position:11},{mark__id:674,mark__name:"художественный",mark__seo_alias:"khudozhestvennye",mark_type__type:"Genre",clip_mark__clip_mark_position:2,mark__position:19}]}}),s?(c.log("api.get_video_info, predefined, id: "+e),u=m(s),"function"==typeof o?o(null,u):void 0):(c.log("api.get_video_info: "+e,l),this._request(l,function(e,t){if(t=JSON.parse(t.body),u=m(t),u.error&&(e=u.status),"function"==typeof o)return o(e,u)}))},m=function(e){var t,r,i,a,o,s;if(c.log("api.video_info_parser"),s={},null!=e?e.status:void 0)s=e;else{for(o=e.video_data,"undefined"===o.clip__set_name&&(o.clip__set_name=""),"undefined"===o.clip__name&&(o.clip__name=""),"undefined"===o.clip__season_number&&(o.clip__season_number=""),"undefined"===o.clip__season_name&&(o.clip__season_name=""),"undefined"===o.clip__position&&(o.clip__position=""),s.title=o.clip__set_name||o.clip__name||"",s.seasonNum=o.clip__season_number||0,s.seasonTitle=o.clip__season_name||"",s.episodeNum=o.clip__position||0,s.episodeTitle=o.clip__set_name?o.clip__name:"",s.type=o.clip_types__type,s.genres=[],a=o.genres,r=0,i=a.length;r<i;r++)t=a[r],s.genres.push(t);s.childrenContent=l(s.genres),s.category=o.categories&&o.categories.length?o.categories[0].mark__id:0,s.seoAlias=o.clip__seo_alias||"",s.duration=o.clip__duration,s.videoData=o,n.set=!1}return s},r.checkProxy=function(e){return this._request("//imasdk.tvzavr.ru/chkproxy",function(t,r){try{return r=JSON.parse(r.body),t?(c.log("api.checkProxy: true"),e(!0)):"ok"===r.status?(c.log("api.checkProxy: false"),e(!1)):(c.log("api.checkProxy: true"),e(!0))}catch(t){return t,c.log("api.checkProxy: true"),e(!0)}})},r.url=function(e,t,r,i,a,o){var s,l,u,f,m,g;return l=location.href,f=h.getUrlValue("cacheserver",l),m=h.getUrlValue("cacheserverresptimeout",l),s=document.getElementById("cacheserverresp"),null!=f&&null!=m&&null!=s&&null!=(u=h.getUrlValue("film",l))&&(e=u),g=p(e,t,r,a),n.enabled&&(n.set=!0),c.log("api.url: "+g),this._request(g,!0,"post",function(r){return function(r,a){var s;if(a=JSON.parse(a.body),s={},a){if(s=_(a,i),s.error&&(r=s.status,i.contentError=r),r){if(i._core.params.prerollanyway)return g=p(e,t,!0),d._request(g,function(e,t){if(t=JSON.parse(t.body),s={},t){if(s=_(t,i),i.contentErrorAfterTrailer=i.contentError,i.contentError=0,e=0,s.error&&(e=s.status,i.contentError=e),c.log(s),c.log(e),n.set=!1,"function"==typeof o)return o(e,s)}else if(e=-1,n.set=!1,"function"==typeof o)return o(e,s)});if(n.set=!1,"function"==typeof o)return o(r,s)}else if(n.set=!1,"function"==typeof o)return o(r,s)}else if(r=-1,n.set=!1,"function"==typeof o)return o(r,s)}}())},p=function(e,t,r,n){return c.log("api.get_url"),r?a+"api/3.0/video/trailer_url?media=apple&cid="+e+i+"&plf="+t+d.badServerList(n):a+"api/3.0/video/url?media=apple&cid="+e+i+"&plf="+t+d.badServerList(n)},_=function(e,t){var r,i,a,n,o,s,l;return c.log("api.url_parser"),s={},(null!=e?e.status:void 0)?s=e:(s=e.video,i=location.href,n=h.getUrlValue("cacheserver",i),l=h.getUrlValue("cacheserverresptimeout",i),r=document.getElementById("cacheserverresp"),null!=n&&null!=l&&null!=r&&(a=new RegExp(s.url.split("/")[2],"gi"),s.url=s.url.replace(a,n),t.setCacheServerTimeout(n,l,r)),t._core.params.server&&(a=new RegExp(s.url.split("/")[2],"gi"),s.url=s.url.replace(a,t._core.params.server),t._core.params.server=null),o=s.url.split("/"),s.clearUrl=s.url.slice(0,s.url.lastIndexOf("/")+1),s.server=o[2],s.owner=o[4],s.cckey=o[5],s.uuid=o[6],s.filename=o[7],s.action_roll?s.actionroll=s.action_roll.replace(" ","").split(","):s.actionroll=""),s},r.scenes=function(e,t,r){var i,a;return a="//"+e.server+"/addons/"+e.owner+"/"+e.cckey+"/"+e.uuid+"/info.scene?plf="+t,i=h.timeout(3e3,function(e){return function(){if(clearTimeout(i),i=null,"function"==typeof r)return r(null,"")}}()),c.log("api.scenes: "+a),this._request(a,!1,function(e,t){var a;if(null!=i&&(clearTimeout(i),i=null,t=t.body,a=[],t&&(a=t.split("\n"),a.pop()),"function"==typeof r))return r(e,a)})},r.reloadSubtitles=function(e,t,r,i){return c.log("api.reloadSubtitles"),u(t,e,function(e,t){if(t&&(r.selectedSubtitles=t),"function"==typeof i)return i(null,e)})},r.info_xml=function(e,t,r){var i,a;return a="//"+e.server+"/addons/"+e.owner+"/"+e.cckey+"/"+e.uuid+"/info.xml?plf="+t,i=h.timeout(3e3,function(t){return function(){var t;if(clearTimeout(i),i=null,t="api.info_xml "+e.server+" timeout 3000","function"==typeof r)return r(t,null)}}()),c.log("api.info_xml: "+a),this._request(a,!1,function(t,a){if(null!=i&&(clearTimeout(i),i=null,a=a.rawRequest.responseXML,a.addonsURL="//"+e.server+"/addons/"+e.owner+"/"+e.cckey+"/"+e.uuid+"/","function"==typeof r))return r(t,a)})},r.checkPlatform=function(e,t,r){var n;return n=a+"api/3.1/clip/check_platform?cid="+e+i+"&plf="+t,c.log("api.checkPlatform: "+n),this._request(n,function(e,t){return t=JSON.parse(t.body||"{}"),t.status&&(e=t.reserved),r(e,t.result.allow)})},r.getM3U8=function(e,t,r){var i;return c.log("api.getM3U8: "+e),i=h.timeout(3e3,function(e){return function(){var e;if(clearTimeout(i),i=null,e="api.getM3U8 "+t.server+" timeout 3000","function"==typeof r)return r(e,null)}}()),this._request(e,!1,function(e,t){if(null!=i&&(clearTimeout(i),i=null,t=t.body,"function"==typeof r))return r(e,t)})},r.usessionid=function(e,t,r,i){var a,n;return n="//"+e.server+"/session/?platform="+t+"&url="+e.uuid+"&UserId="+r,a=h.timeout(3e3,function(t){return function(){var t;if(clearTimeout(a),a=null,t="api.usessionid "+e.server+" timeout 3000","function"==typeof i)return i(t,null)}}()),c.log("api.usessionid: "+n),this._request(n,!1,function(e,t){var r;if(null!=a&&(clearTimeout(a),a=null,t=t.body,r=t||null,"function"==typeof i))return i(e,r)})},r.markCurrentCacheServerAsBad=function(e){return void 0===e.tryCount&&(e.tryCount=3),--e.tryCount>0&&(void 0===e.badServerList&&(e.badServerList=[]),e.badServerList.push(e.server),c.log("api.markCurrentCacheServerAsBad: "+e.server+" marked as bad, tryCount: "+e.tryCount),!0)},r.badServerList=function(e){var t;return t="",0,null!=e&&null!=e.badServerList&&e.badServerList.forEach(function(e){return function(e){return t.length>0?t+=encodeURIComponent(","):t+="&ft=",t+=encodeURIComponent(e)}}()),t},r.progress_add=function(e,t,r){var i;return i=a+"api/3.0/user/progress_add",c.log("api.progress_add: "+i),this._request(i,!0,"post",e,function(e,t){if("function"==typeof r)return r(t)})},r.history_add=function(e,t,r){var i;return i=a+"api/3.0/user/history_add",c.log("api.history_add: "+i),this._request(i,!0,"post",e,function(e,t){if("function"==typeof r)return r(t)})},r.progress=function(e,t,r,n){var o;return null==e&&(e="single"),o=a+"api/3.0/user/progress?ctx="+e+"&cid="+t+i+"&plf="+r,c.log("api.progress: "+o),this._request(o,function(e,t){var r,i;if(t=JSON.parse(t.body),r={},(null!=t?t.status:void 0)||(i=t.user_progress,r.position=i.position||0,r.ctxPosition=i.context_position||0),"function"==typeof n)return n(e,r)})},r.service_event=function(e,t,r){var n;return n=a+"api/3.0/service/event?plf="+t+i,c.log("api.service_event: "+n),this._request(n,!0,"post",e,function(e,t){if("function"==typeof r)return r(e,t)})},r.streamstat=function(e){return function(t,r,i,a){var n;return c.log("api.streamstat: "+t.event),n="//"+r+"/streamstat/"+i+"?m="+encodeURIComponent(t.m)+"&resource="+encodeURIComponent(t.resource)+"&usessionid="+encodeURIComponent(t.usessionid)+"&userid="+encodeURIComponent(t.userid||"NULL")+"&referer="+encodeURIComponent(location.href+"*"+document.referrer)+"&timestamp="+encodeURIComponent(t.timestamp)+(t.p?"&p="+encodeURIComponent(t.p):"")+(t.event?"&event="+encodeURIComponent(t.event):"")+(t.value?"&value="+encodeURIComponent(t.value):"")+"&appVersion="+encodeURIComponent(t.version)+"&server="+encodeURIComponent(t.server)+"&quality="+encodeURIComponent(t.quality),e._request(n,!1,"get",t,function(e,t){if("function"==typeof a)return a(e,t)})}}(this),r.advstat=function(e){return function(t,r,i,a){var n;return c.log("api.advstat: "+t.action),null!=window.playerEvent&&window.playerEvent(t),n="//"+r+"/astat/"+i+"?resource="+encodeURIComponent(t.resource)+"&guid="+encodeURIComponent(t.guid)+"&usessionid="+encodeURIComponent(t.usessionid)+"&userid="+encodeURIComponent(t.userid||"NULL")+"&action="+encodeURIComponent(t.action)+"&blocktype="+encodeURIComponent(t.blocktype)+"&referer="+encodeURIComponent(location.href)+(t.p?"&p="+encodeURIComponent(t.p):"")+"&appVersion="+encodeURIComponent(t.version)+"&viewability="+encodeURIComponent(t.viewability)+(t.partner?"&partner="+encodeURIComponent(t.partner):""),e._request(n,!1,"get",t,function(e,t){if("function"==typeof a)return a(e,t)})}}(this),r.getIdBySeoAlias=function(e){return function(t,r,n){var o;return null==t&&null==r?(c.log("api.getIdBySeoAlias: none"),void n("error")):null!=t?(c.log("api.getIdBySeoAlias, id: "+t),void("function"==typeof n&&n(null,t))):null!=r?(o=a+"api/3.1/catalog/get_id_by_alias?alias="+r+i,c.log("api.getIdBySeoAlias, salias: "+r,o),e._request(o,function(e,r){if(r=JSON.parse(r.body),(null!=r?r.status:void 0)||(t=r.result[0].clip__id),"function"==typeof n)return n(e,t)})):void 0}}(this)},{"../../data/ad-settings.json":13,"../../data/settings.json":14,"../../data/tvz-sites.json":15,"../security/token.coffee":32,"./api.coffee":33,"./debug.coffee":34,"./utils.coffee":36,xhr:11}],34:[function(e,t,r){var i,a,n=function(e,t){return function(){return e.apply(t,arguments)}},o=function(e,t){function r(){this.constructor=e}for(var i in t)s.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};e("../shared/utils.coffee"),a=e("events").EventEmitter,i=function(e){function t(){this.data=n(this.data,this),this.copyTextToClipboard=n(this.copyTextToClipboard,this),this.log=n(this.log,this),this.match=n(this.match,this),this.addListeners=n(this.addListeners,this),this.code=[],this.code.push([["d","в"],["b","и"],["g","п"],"1","debug1",{queue:0}]),this.code.push([["s","ы"],["a","ф"],["v","м"],["e","у"],["l","д"],["o","щ"],["g","п"],"savelog",{queue:0}]),this.code.push([["s","ы"],["h","р"],["o","щ"],["w","ц"],["l","д"],["o","щ"],["g","п"],"showlog",{queue:0}]),this.code.push([["s","ы"],["k","л"],["i","ш"],["p","з"],["s","ы"],["e","у"],["r","к"],["v","м"],["e","у"],["r","к"],"skipserver",{queue:0}]),this.arr=[],this.length=5e3,this.addListeners()}return o(t,e),t.prototype.addListeners=function(){return document.body.addEventListener("keydown",function(e){return function(t){return e.code.forEach(function(r){var i,a,n;return n=r[r.length-1],i=t.key,l.call(r[n.queue],i)>=0?++n.queue==r.length-2?(e.match(r[r.length-2]),n.queue=0):void 0:(a=t.key,l.call(r[0],a)>=0?n.queue=1:n.queue=0)})}}(this))},t.prototype.match=function(e){var t;switch(e){case"debug1":return alert("debug1");case"savelog":return t="",this.arr.forEach(function(e){return function(e){return t+=e,t+="\r\n"}}()),this.copyTextToClipboard(t),t="";case"showlog":if(!this.popup||this.popup.window.closed)return this.popup=window.open("./debug","tvzavr player debug window","width=1000,height=700,scrollbars=no"),this.popup.updatelog(this.arr);break;case"skipserver":return this.emit("skipserver")}},t.prototype.log=function(){var e,t,r;if(e=arguments,r="",t=0,Object.keys(e).forEach(function(i){if(r+=e[i],++t<e.length)return r+=", "}),this.arr.push(r),this.arr.length>=this.length)return this.arr.shift()},t.prototype.copyTextToClipboard=function(e){var t;t=document.createElement("textarea"),t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){e}return document.body.removeChild(t)},t.prototype.data=function(e,t,r){var i,a,n;null==t&&(t=2),null==r&&(r=0),i=function(e){return function(e){var t,r;for(t=0,r="";t<e;)t++,r+=" ";return r}}(),n=function(e){return function(e,r){return Object.keys(e).forEach(function(o){switch(typeof e[o]){case"object":return Array.isArray(e[o])?(debug.log(i(r)+o+" []"),a(e[o],r+t)):null===e[o]?debug.log(i(r)+o+": "+String(e[o])):(debug.log(i(r)+o+" {}"),n(e[o],r+t));case"string":case"number":case"null":case"boolean":case"undefined":return debug.log(i(r)+o+": "+String(e[o]))}})}}(),a=function(e){return function(e,r){var o,s,l;return o=!1,e.forEach(function(e){if("object"==typeof e)return o=!0}),o?(s=0,e.forEach(function(e){switch(typeof e){case"object":Array.isArray(e)?(debug.log(i(r)+s+": []"),a(e,r+t)):null===e?debug.log(i(r)+s+": "+String(e)):(debug.log(i(r)+s+" {}"),n(e,r+t));break;case"string":case"number":case"null":case"boolean":case"undefined":debug.log(i(r)+s+": "+String(e))}return s++})):(l="",s=0,e.forEach(function(e){return s++>0&&(l+=", "),l+=String(e)}),l="["+l+"]",debug.log(i(r)+l))}}();try{"object"==typeof e?Array.isArray(e)?(debug.log(i(r)+"[]"),a(e,r)):null===e?debug.log(i(r)+e):(debug.log(i(r)+"{}"),n(e,r)):debug.log(i(r)+e)}catch(e){e}return null},t}(a),t.exports=new i},{"../shared/utils.coffee":36,events:2}],35:[function(e,t,r){var i,a,n,o,s;e("../security/sha256.coffee"),n=e("./api.coffee"),s=e("./utils.coffee"),o=e("./debug.coffee"),i=[],r.setServers=function(e){return null==e&&(e=[]),i=e},a={},r.init=function(e){return null==e&&(e="none"),a=e},r.sendVideo=function(e,t){var r,o;return o=0,"advid"===a&&(e="brn"),r=function(a){return function(a){if(a)return o<i.length-1?n.streamstat(t,i[++o],e,r):n.service_event({action:"error",message:"038"},e)}}(),n.streamstat(t,i[o],e,r)},r.sendAd=function(e,t){var r,o;return o=0,"advid"===a&&(e="brn"),r=function(a){return function(a){if(a)return o<i.length-1?n.advstat(t,i[++o],e,r):n.service_event({action:"error",message:"038"},e)}}(),n.advstat(t,i[o],e,r)},r.silentcaller=function(e){return function(e){return n._request(e,!1,"post",{},null)}}(),r.pixelcaller=function(e){return function(e){return(new Image).src=e}}(),r.instreamaticPixel=function(){return this.pixelcaller("//x.instreamatic.com/v2/mark/781.gif")},r.tnsMetrix=function(){var e;return e=Math.round(Math.random()*Date.now()),this.pixelcaller("//www.tns-counter.ru/V13a***R%3E*tvzavr_ru/ru/UTF-8/tmsec=tvzavr_playback/"+e)},r.brandingNprShow=function(){var e;return e=Math.round(Math.random()*Date.now()),this.pixelcaller("//ads.adfox.ru/228958/getCode?p1=cbmop&p2=gbde&pfc=bwquj&pfb=fzclo&puid2=&puid3=&puid4=&puid6=&puid7=&puid8=&puid9=&puid18=&puid19=&puid20=&puid21=&puid22=&puid23=&puid24=&puid25=&puid33=&puid34=&puid35=&puid36=&puid37=&puid46=&puid47=&puid48=&puid55=&pr="+e+"&pe=b")},r.brandingEstelClick=function(){},r.advPixel=function(){var e,t,r,i,a;if(r="293b446a-80f8-8bcf-fbbf-01434361f548.30531",t="53%2B5KbOI1DnH23PBytNSXRBeIif6sRPWWHZTAM8QtRU%3D",e=Math.round(Math.random()*Date.now()),a=s.getUrlValue("utm_source"))return i=s.getCookie("tvz_html5_player_utm_source"),a===i?a+="_r":s.setCookie("tvz_html5_player_utm_source",a,{expires:300,path:"/"}),this.pixelcaller("//stat.tvzavr.ru/advpixel/"+a+"?token="+r+"&si="+t+"&nocache="+e)},r.sendYandexStat=function(e,t){var r,i,a,n,s,l;if("start"===t){switch(r=window!==window.top?252720:252719,e.split("_")[0]){case"preroll":i=1;break;case"midroll":i=2;break;case"postroll":i=3;break;case"pauseroll":i=4}return a=encodeURIComponent(document.location.href),n=encodeURIComponent(document.referrer),s=Math.round(Math.random()*Date.now()),l="//an.yandex.ru/meta/"+r+"?imp-id="+i+"&charset=UTF-8&target-ref="+a+"&page-ref="+n+"&rnd="+s,o.log(l)}}},{"../security/sha256.coffee":31,"./api.coffee":33,"./debug.coffee":34,"./utils.coffee":36}],36:[function(e,t,r){var i=[].slice;r.environment=function(){return(navigator.userAgent.match(/(android|iphone|ipad)|Macintosh(?!(?=.*Chrome))(?=.*Safari)/i)||["default"])[0].toLowerCase()},r.browser=function(){var e,t,r,i,a,n;return a=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,r="undefined"!=typeof InstallTrigger,n=/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification),i=!!document.documentMode,t=!i&&!!window.StyleMedia,e=!!window.chrome&&!!window.chrome.webstore,(e||a)&&!!window.CSS,a?"opera":r?"firefox":n?"safari":e?"chrome":i?"ie":t?"edge":"unknown"},r.homeSite=function(){return/www.tvzavr.ru|www.ruskino.net|staging.tvzavr.ru|192.168.2|192.168.3/.test(document.location.href)},r.unique=function(e){var t,r,i;for(r={},t=0;t<e.length;)i=e[t],r[i]=!0,t++;return Object.keys(r)},r.objCopyJson=function(e){return JSON.parse(JSON.stringify(e))},r.addClass=function(e,t){var r;return r=new RegExp("(^|\\s)"+t+"(\\s|$)","g"),r.test(e.className)?e.className:e.className=(e.className+" "+t).replace(/\s+/g," ").replace(/(^ | $)/g,"")},r.removeClass=function(e,t){var r;return r=new RegExp("(^|\\s)"+t+"(\\s|$)","g"),e.className=e.className.replace(r,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")},r.getElementCoords=function(e){var t,r,i,a,n,o,s,l,u;return e.getBoundingClientRect&&e.parentNode&&(r=e.getBoundingClientRect()),n=document.documentElement,t=document.body,i=n.clientLeft||t.clientLeft||0,s=window.pageXOffset||t.scrollLeft,o=r.left+s-i,a=n.clientTop||t.clientTop||0,l=window.pageYOffset||t.scrollTop,u=r.top+l-a,{top:u,left:o}},r.getPointerPos=function(e,t){var i,a,n,o,s,l,u;return i=r.getElementCoords(e),n=e.offsetWidth,a=e.offsetHeight,s=i.top,o=i.left,u=t.pageY,l=t.pageX,t.changedTouches&&(u=t.changedTouches[0].pageY,l=t.changedTouches[0].pageX),{y:Math.max(0,Math.min(1,(s-u+a)/a)),x:Math.max(0,Math.min(1,(l-o)/n))}},r.timeout=function(e,t){return setTimeout(t,e)},r.interval=function(e,t){return setInterval(t,e)},r.urlHost=function(e){return e.split("/")[2]},r.urlHost2=function(e){return e.split("/")[2].replace("www.","")},r.urlHost3=function(e){return e.split("/")[0]+"//"+e.split("/")[2]},r.getUrlValue=function(e,t){var r,i;return t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&"),r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=r.exec(t),i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},r.formatTime=function(e){var t,r,i;return null==e&&(e=0),Infinity===e&&(e=0),e=Math.ceil(e),t=Math.floor(e/3600),r=Math.floor((e-3600*t)/60),i=e-3600*t-60*r,t<10&&(t="0"+t),r<10&&(r="0"+r),i<10&&(i="0"+i),t+":"+r+":"+i},r.merge=function(){var e,t,r,a,n,o;for(n=1<=arguments.length?i.call(arguments,0):[],o={},e=function(t,r){var i,a;null==t&&(t={}),null==r&&(r={});for(i in r)a=r[i],r.hasOwnProperty(i)&&("[object Object]"!==Object.prototype.toString.call(a)?t[i]=a:t[i]=e(t[i],a));return t},t=0,r=n.length;t<r;t++)a=n[t],e(o,a);return o},r.saveValue=function(e,t){var r,i;return r=window.localStorage.getItem("tvzavrhtml5player")?JSON.parse(window.localStorage.getItem("tvzavrhtml5player")):{},r[e]=t,i=JSON.stringify(r),window.localStorage.setItem("tvzavrhtml5player",i),t},r.restoreValue=function(e,t){var r,i;return r=window.localStorage.getItem("tvzavrhtml5player")?JSON.parse(window.localStorage.getItem("tvzavrhtml5player")):{},i=r[e],void 0===i&&(i=t,this.saveValue(e,t)),i},r.getCookie=function(e){var t;return t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")),t?decodeURIComponent(t[1]):void 0},r.setCookie=function(e,t,r){var i,a,n,o,s;r=r||{},a=r.expires,"number"==typeof a&&a&&(i=new Date,i.setTime(i.getTime()+1e3*a),a=r.expires=i),a&&a.toUTCString&&(r.expires=a.toUTCString()),t=encodeURIComponent(t),s=e+"="+t;for(n in r)s+="; "+n,!0!==(o=r[n])&&(s+="="+o);document.cookie=s},r.deleteCookie=function(e){setCookie(e,"",{expires:-1})}},{}],37:[function(e,t,r){var i,a,n,o,s;s=e("./shared/utils.coffee"),i=e("./player.coffee"),a={},n={platform:"std"},o=function(e,t,r){var o;if(null==e&&(e="player"),null==t&&(t={}),!e||"string"!=typeof e)throw new TypeError("Player container ID is invalid. [__NAME__]");if(0===e.indexOf("#")&&(e=e.slice(1)),t=s.merge(n,t),o=document.getElementById(e),!(e in a||o&&"VIDEO"===o.nodeName))throw new TypeError("Container element is invalid. [__NAME__]");return a[e]=new i(o,t,r)},t.exports=o},{"./player.coffee":30,"./shared/utils.coffee":36}],38:[function(t,r,i){(function(a){!function(t){if("object"==typeof i&&void 0!==r)r.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var n;"undefined"!=typeof window?n=window:void 0!==a?n=a:"undefined"!=typeof self&&(n=self),n.DMVAST=t()}}(function(){return function e(r,i,a){function n(s,l){if(!i[s]){if(!r[s]){var u="function"==typeof t&&t;if(!l&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var d=i[s]={exports:{}};r[s][0].call(d.exports,function(e){var t=r[s][1][e];return n(t||e)},d,d.exports,e,r,i,a)}return i[s].exports}for(var o="function"==typeof t&&t,s=0;s<a.length;s++)n(a[s]);return n}({1:[function(e,t,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function n(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!n(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,r,i,n,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(r=this._events[e],s(r))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,n=new Array(i-1),l=1;l<i;l++)n[l-1]=arguments[l];r.apply(this,n)}else if(o(r)){for(i=arguments.length,n=new Array(i-1),l=1;l<i;l++)n[l-1]=arguments[l];for(u=r.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,n)}return!0},i.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var r;r=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.trace)}return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var r,i,n,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],n=r.length,i=-1,r===t||a(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=n;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this
;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],a(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.listenerCount=function(e,t){return e._events&&e._events[t]?a(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t,r){var i;i=function(){function e(){this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[],this.extensions={controls:{}}}return e}(),t.exports=i},{}],3:[function(e,t,r){var i,a,n;a=e("./parser.coffee"),n=e("./util.coffee"),i=function(){function e(){}return e.cappingFreeLunch=0,e.cappingMinimumTimeInterval=0,e.timeout=0,e.get=function(e,t,r){var i,n;return i=+new Date,n={},t&&("object"==typeof t&&(n=t),"function"==typeof t&&(r=t)),this.totalCallsTimeout<i?(this.totalCalls=1,this.totalCallsTimeout=i+36e5):this.totalCalls++,this.cappingFreeLunch>=this.totalCalls?void r(null):i-this.lastSuccessfullAd<this.cappingMinimumTimeInterval?void r(null):a.parse(e,n,function(e){return function(e){return r(e)}}())},function(){var t,r;r=n.storage,t=Object.defineProperty,["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(i){t(e,i,{get:function(){return r.getItem(i)},set:function(e){return r.setItem(i,e)},configurable:!1,enumerable:!0})}),null==e.totalCalls&&(e.totalCalls=0),null==e.totalCallsTimeout&&(e.totalCallsTimeout=0)}(),e}(),t.exports=i},{"./parser.coffee":8,"./util.coffee":14}],4:[function(e,t,r){var i;i=function(){function e(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.companionClickThroughURLTemplate=null,this.trackingEvents={}}return e}(),t.exports=i},{}],5:[function(e,t,r){var i,a,n,o,s={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var i in t)s.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=function(){function e(){this.trackingEvents={}}return e}(),n=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=null,this.mediaFiles=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplates=[]}return l(t,e),t}(i),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t}(i),a=function(e){function t(){this.type="companion",this.variations=[],this.videoClickTrackingURLTemplates=[]}return l(t,e),t}(i),t.exports={VASTCreativeLinear:n,VASTCreativeNonLinear:o,VASTCreativeCompanion:a}},{}],6:[function(e,t,r){t.exports={client:e("./client.coffee"),tracker:e("./tracker.coffee"),parser:e("./parser.coffee"),util:e("./util.coffee")}},{"./client.coffee":3,"./parser.coffee":8,"./tracker.coffee":10,"./util.coffee":14}],7:[function(e,t,r){var i;i=function(){function e(){this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null}return e}(),t.exports=i},{}],8:[function(e,t,r){var i,a,n,o,s,l,u,d,c,p,_=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};a=e("./urlhandler.coffee"),c=e("./response.coffee"),n=e("./ad.coffee"),p=e("./util.coffee"),l=e("./creative.coffee").VASTCreativeLinear,s=e("./creative.coffee").VASTCreativeCompanion,u=e("./mediafile.coffee"),o=e("./companionad.coffee"),e("./tracker.coffee"),i=e("events").EventEmitter,d=function(){function e(){}var t;t=[];var r=new i;return e.addURLTemplateFilter=function(e){"function"==typeof e&&t.push(e)},e.removeURLTemplateFilter=function(){return t.pop()},e.countURLTemplateFilters=function(){return t.length},e.clearUrlTemplateFilters=function(){return t=[]},e.parse=function(e,t,r){return"function"==typeof t&&(r=t,t=null),window.urlmodFinal=!1,this._parse(e,null,t,function(e,t){return r(t)})},e.vent=new i,e.track=function(e,t){return this.vent.emit("VAST-error",t),p.track(e,t)},e.on=function(e,t){return this.vent.on(e,t)},e.once=function(e,t){return this.vent.once(e,t)},e._parse=function(e,i,n,o){var s,l,u;for(l=0,u=t.length;l<u;l++)s=t[l],e=s(e);return null==i&&(i=[]),i.push(e),"function"==typeof n&&(o=n,n={}),n||(n={}),a.get(e,n,function(t){return function(a,n){var s,l,u,d,f,h,m,g,v,y,A;if(l=function(e){var t,r,i;if(null==e&&(e=!1),f){for(i=f.ads,t=0,r=i.length;t<r;t++)if(s=i[t],null!=s.nextWrapperURL)return;return 0===f.ads.length?f=null:f.ads.reverse(),o(null,f)}},null!=a)return o(a);if(f=new c,null==(null!=n?n.documentElement:void 0)||"VAST"!==n.documentElement.nodeName)return o();for(y=n.documentElement.childNodes,h=0,g=y.length;h<g;h++)d=y[h],"Error"===d.nodeName&&f.errorURLTemplates.push(t.parseNodeText(d));for(A=n.documentElement.childNodes,m=0,v=A.length;m<v;m++){if(d=A[m],"Ad"===d.nodeName&&null!=(s=t.parseAdElement(d))){if(s.extensions)for(var k in s.extensions)if(s.extensions.hasOwnProperty(k)){if("customTracking"===k){var b=s.extensions[k].events,w=b.onVastLoad;w&&w.length&&(r.emit("onVastLoad",""),p.track(w))}"urlmod"===k&&"true"===s.extensions[k].final&&(s.nextWrapperURL=null,this.urlmodFinal="true")}f.ads.unshift(s)}if("true"===this.urlmodFinal)break}for(u=f.ads.length;u--;)s=f.ads[u],null!=s.nextWrapperURL&&function(r){var a,n;i.length>=10||(n=r.nextWrapperURL,_.call(i,n)>=0)?(f.ads.splice(f.ads.indexOf(r),1),l()):(-1===r.nextWrapperURL.indexOf("://")&&(a=e.slice(0,e.lastIndexOf("/")),r.nextWrapperURL=a+"/"+r.nextWrapperURL),t._parse(r.nextWrapperURL,i,function(e,t){var i,a,n,o,s,u,d,c,p,_,h,m,g,v,y,A,k,b;if(a=!1,null!=e)f.ads.splice(f.ads.indexOf(r),1),a=!0;else if(null==t)f.ads.splice(f.ads.indexOf(r),1),a=!0;else for(f.errorURLTemplates=f.errorURLTemplates.concat(t.errorURLTemplates),o=f.ads.indexOf(r),f.ads.splice(o,1),y=t.ads,d=0,c=y.length;d<c;d++){s=y[d],s.errorURLTemplates=r.errorURLTemplates.concat(s.errorURLTemplates),s.impressionURLTemplates=r.impressionURLTemplates.concat(s.impressionURLTemplates),s.extensions||(s.extensions={}),s.extensions.controls||(s.extensions.controls={});for(var w in r.extensions.controls)r.extensions.controls.hasOwnProperty(w)&&(s.extensions.controls[w]||(s.extensions.controls[w]=r.extensions.controls[w]));if(null!=r.trackingEvents)for(A=s.creatives,m=0,p=A.length;m<p;m++)if(i=A[m],"linear"===i.type)for(k=Object.keys(r.trackingEvents),g=0,_=k.length;g<_;g++)n=k[g],(u=i.trackingEvents)[n]||(u[n]=[]),i.trackingEvents[n]=i.trackingEvents[n].concat(r.trackingEvents[n]);if(null!=r.videoClickTrackingURLTemplates)for(b=s.creatives,v=0,h=b.length;v<h;v++)i=b[v],"linear"===i.type&&(i.videoClickTrackingURLTemplates=i.videoClickTrackingURLTemplates.concat(r.videoClickTrackingURLTemplates));f.ads.splice(o,0,s)}return delete r.nextWrapperURL,l(a)}))}(s);return l()}}(this))},e.childByName=function(e,t){var r,i,a,n;for(n=e.childNodes,i=0,a=n.length;i<a;i++)if(r=n[i],r.nodeName===t)return r},e.childsByName=function(e,t){var r,i,a,n,o;for(i=[],o=e.childNodes,a=0,n=o.length;a<n;a++)r=o[a],r.nodeName===t&&i.push(r);return i},e.parseAdElement=function(e){var t,r,i,a;for(a=e.childNodes,r=0,i=a.length;r<i;r++){if(t=a[r],"Wrapper"===t.nodeName)return this.parseWrapperElement(t);if("InLine"===t.nodeName)return this.parseInLineElement(t)}},e.parseWrapperElement=function(e){var t,r,i,a,n,o,s;for(t=this.parseInLineElement(e),a=this.childByName(e,"VASTAdTagURI"),null!=a?t.nextWrapperURL=this.parseNodeText(a):null!=(a=this.childByName(e,"VASTAdTagURL"))&&(t.nextWrapperURL=this.parseNodeText(this.childByName(a,"URL"))),i=null,s=t.creatives,n=0,o=s.length;n<o;n++)if(r=s[n],"linear"===r.type){i=r;break}if(null!=i&&(null!=i.trackingEvents&&(t.trackingEvents=i.trackingEvents),null!=i.videoClickTrackingURLTemplates&&(t.videoClickTrackingURLTemplates=i.videoClickTrackingURLTemplates)),null!=t.nextWrapperURL)return t},e.parseInLineElement=function(e){var t,r,i,a,o,s,l,u,d,c,p,_,f,h;for(t=new n,_=e.childNodes,s=0,d=_.length;s<d;s++)switch(o=_[s],o.nodeName){case"Error":this.isUrl(o)&&t.errorURLTemplates.push(this.parseNodeText(o));break;case"Impression":this.isUrl(o)&&t.impressionURLTemplates.push(this.parseNodeText(o));break;case"Creatives":for(f=this.childsByName(o,"Creative"),l=0,c=f.length;l<c;l++)for(i=f[l],h=i.childNodes,u=0,p=h.length;u<p;u++)switch(a=h[u],a.nodeName){case"Linear":r=this.parseCreativeLinearElement(a),r&&t.creatives.push(r);break;case"CompanionAds":r=this.parseCompanionAd(a),r&&t.creatives.push(r)}break;case"Extensions":for(var m,g=this.childsByName(o,"Extension"),v=0,y=g.length;v<y;v++){var A=g[v];switch(A.getAttribute("type")){case"Urlmod":m=this.parseUrlmod(A),m&&(t.extensions.urlmod=m);break;case"CustomTracking":m=this.parseCustomTracking(A),m&&(t.extensions.customTracking=m);break;case"skipTime2":if(m=this.parseSkipTime2(A)){var k=m.type;t.extensions.controls[k]=m.value}break;case"controls":if(m=this.parseControls(A))for(var b in m.controls)m.controls.hasOwnProperty(b)&&(t.extensions.controls[b]=m.controls[b])}}}return t},e.parseCreativeLinearElement=function(e){var t,r,i,a,n,o,s,d,c,p,_,f,h,m,g,v,y,A,k,b,w,C,T,E,I,S,R,x;if(r=new l,r.duration=this.parseDuration(this.parseNodeText(this.childByName(e,"Duration"))),-1===r.duration&&"Wrapper"!==e.parentNode.parentNode.parentNode.nodeName)return null;if(d=e.getAttribute("skipoffset"),null==d?r.skipDelay=null:"%"===d.charAt(d.length-1)?(s=parseInt(d,10),r.skipDelay=r.duration*(s/100)):r.skipDelay=this.parseDuration(d),null!=(f=this.childByName(e,"VideoClicks")))for(r.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(f,"ClickThrough")),E=this.childsByName(f,"ClickTracking"),m=0,A=E.length;m<A;m++)t=E[m],r.videoClickTrackingURLTemplates.push(this.parseNodeText(t));for(I=this.childsByName(e,"TrackingEvents"),g=0,k=I.length;g<k;g++)for(p=I[g],S=this.childsByName(p,"Tracking"),v=0,b=S.length;v<b;v++)c=S[v],i=c.getAttribute("event"),_=this.parseNodeText(c),null!=i&&null!=_&&(null==(h=r.trackingEvents)[i]&&(h[i]=[]),r.trackingEvents[i].push(_));for(R=this.childsByName(e,"MediaFiles"),y=0,w=R.length;y<w;y++)for(o=R[y],x=this.childsByName(o,"MediaFile"),T=0,C=x.length;T<C;T++)n=x[T],a=new u,a.fileURL=this.parseNodeText(n),a.deliveryType=n.getAttribute("delivery"),a.codec=n.getAttribute("codec"),a.mimeType=n.getAttribute("type"),a.apiFramework=n.getAttribute("apiFramework"),a.bitrate=parseInt(n.getAttribute("bitrate")||0),a.minBitrate=parseInt(n.getAttribute("minBitrate")||0),a.maxBitrate=parseInt(n.getAttribute("maxBitrate")||0),a.width=parseInt(n.getAttribute("width")||0),a.height=parseInt(n.getAttribute("height")||0),r.mediaFiles.push(a);return r},e.parseCompanionAd=function(e){var t,r,i,a,n,l,u,d,c,p,_,f,h,m,g,v,y,A,k,b,w;for(i=new s,A=this.childsByName(e,"Companion"),p=0,m=A.length;p<m;p++){for(r=A[p],t=new o,t.id=r.getAttribute("id")||null,t.width=r.getAttribute("width"),t.height=r.getAttribute("height"),k=this.childsByName(r,"StaticResource"),_=0,g=k.length;_<g;_++)n=k[_],t.type=n.getAttribute("creativeType")||0,t.staticResource=this.parseNodeText(n);for(b=this.childsByName(r,"TrackingEvents"),f=0,v=b.length;f<v;f++)for(u=b[f],w=this.childsByName(u,"Tracking"),h=0,y=w.length;h<y;h++)l=w[h],a=l.getAttribute("event"),d=this.parseNodeText(l),null!=a&&null!=d&&(null==(c=t.trackingEvents)[a]&&(c[a]=[]),t.trackingEvents[a].push(d));t.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(r,"CompanionClickThrough")),i.variations.push(t)}return i},e.parseDuration=function(e){var t,r,i,a,n;return null==e?-1:(t=e.split(":"),3!==t.length?-1:(n=t[2].split("."),a=parseInt(n[0]),2===n.length&&(a+=parseFloat("0."+n[1])),i=parseInt(60*t[1]),r=parseInt(60*t[0]*60),isNaN(r||isNaN(i||isNaN(a||i>3600||a>60)))?-1:r+i+a))},e.parseUrlmod=function(e){var t={},r=e.getAttribute("type")||"Urlmod",i=e.getAttribute("final")||!1;return t.type=r,t.final=i,t},e.parseCustomTracking=function(e){var t={},r={},i=e.getAttribute("type"),a=this.childsByName(e,"Tracking");if(i){for(var n=0,o=a.length;n<o;n++){var s=a[n],l=s.getAttribute("event"),u=this.parseNodeText(s);r[l]||(r[l]=[]),r[l].push(u)}t.type=i,t.events=r}else t=!1;return t},e.parseSkipTime2=function(e){var t=e.getAttribute("type"),r=this.parseNodeText(e);return!("skipTime2"!==t||!r)&&{type:t,value:r}},e.parseControls=function(e){var t=e.getAttribute("type"),r=this.childsByName(e,"control"),i={controls:{}};i.type=t;for(var a=0,n=r.length;a<n;a++){var o=r[a],s=o.getAttribute("id"),l=o.getAttribute("layout");i.controls[s]=l}return"controls"===t&&i},e.parseNodeText=function(e){return e&&(e.textContent||e.text||"").trim()},e.isUrl=function(e){return/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?\/\/=]*)/i.test(this.parseNodeText(e))},e}(),t.exports=d},{"./ad.coffee":2,"./companionad.coffee":4,"./creative.coffee":5,"./mediafile.coffee":7,"./response.coffee":9,"./urlhandler.coffee":11,"./util.coffee":14,"./tracker.coffee":10,events:1}],9:[function(e,t,r){var i;i=function(){function e(){this.ads=[],this.errorURLTemplates=[]}return e}(),t.exports=i},{}],10:[function(e,t,r){var i,a,n,o,s,l={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};a=e("./client.coffee"),s=e("./util.coffee"),n=e("./creative.coffee").VASTCreativeLinear,i=e("events").EventEmitter,o=function(e){function t(e,t){var r,i,o;this.ad=e,this.creative=t,this.muted=!1,this.impressed=!1,this.skipable=!1,this.skipDelayDefault=-1,this.trackingEvents={},this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],o=t.trackingEvents;for(r in o)i=o[r],this.trackingEvents[r]=i.slice(0);t instanceof n?(this.setDuration(t.duration),this.skipDelay=t.skipDelay,this.linear=!0,this.clickThroughURLTemplate=t.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=t.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1),this.on("start",function(){a.lastSuccessfullAd=+new Date})}return u(t,e),t.prototype.setDuration=function(e){return this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}},t.prototype.setProgress=function(e){var t,r,i,a,n,o,s,l,u;if(n=null===this.skipDelay?this.skipDelayDefault:this.skipDelay,-1===n||this.skipable||(n>e?this.emit("skip-countdown",n-e):(this.skipable=!0,this.emit("skip-countdown",0))),this.linear&&this.assetDuration>0){if(r=[],e>0){r.push("start"),i=Math.round(e/this.assetDuration*100),r.push("progress-"+i+"%"),u=this.quartiles;for(a in u)(o=u[a])<=e&&e<=o+1&&r.push(a)}for(s=0,l=r.length;s<l;s++)t=r[s],this.track(t,!0);e<this.progress&&this.track("rewind")}return this.progress=e},t.prototype.setMuted=function(e){return this.muted!==e&&this.track(e?"mute":"unmute"),this.muted=e},t.prototype.setPaused=function(e){return this.paused!==e&&this.track(e?"pause":"resume"),this.paused=e},t.prototype._setFullscreen=function(e){return this.fullscreen!==e&&(this.track(e?"fullscreen":"exitFullscreen"),this.track(e?"expand":"collapse")),this.fullscreen=e},t.prototype.setSkipDelay=function(e){if("number"==typeof e)return this.skipDelay=e},t.prototype.skipAd=function(){var e,t;this.ad.extensions&&this.ad.extensions.customTracking&&(e=this.ad.extensions.customTracking.events,t=e.onSkipAd),t&&t.length&&(this.emit("onSkipAd",""),s.track(t))},t.prototype.load=function(){if(!this.impressed)return this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView")},t.prototype.errorWithCode=function(e){},t.prototype.complete=function(){return this.track("complete")},t.prototype.stop=function(){return this.track(this.linear?"closeLinear":"close")},t.prototype.skip=function(){return this.track("skip"),this.trackingEvents=[]},t.prototype.click=function(){var e,t,r;if((null!=(r=this.clickTrackingURLTemplates)?r.length:void 0)&&this.trackURLs(this.clickTrackingURLTemplates),null!=this.clickThroughURLTemplate)return this.linear&&(t={CONTENTPLAYHEAD:this.progressFormated()}),e=s.resolveURLTemplates([this.clickThroughURLTemplate],t)[0],this.emit("clickthrough",e)},t.prototype.track=function(e,t){var r,i;null==t&&(t=!1),"closeLinear"===e&&null==this.trackingEvents[e]&&null!=this.trackingEvents.close&&(e="close"),i=this.trackingEvents[e],r=this.emitAlwaysEvents.indexOf(e),null!=i?(this.emit(e,""),this.trackURLs(i)):-1!==r&&this.emit(e,""),!0===t&&(delete this.trackingEvents[e],r>-1&&this.emitAlwaysEvents.splice(r,1))},t.prototype.trackURLs=function(e,t){return null==t&&(t={}),this.linear&&(t.CONTENTPLAYHEAD=this.progressFormated()),s.track(e,t)},t.prototype.progressFormated=function(){var e,t,r,i,a;return a=parseInt(this.progress),e=a/3600,e.length<2&&(e="0"+e),t=a/60%60,t.length<2&&(t="0"+t),i=a%60,i.length<2&&(i="0"+t),r=parseInt(100*(this.progress-a)),e+":"+t+":"+i+"."+r},t}(i),t.exports=o},{"./client.coffee":3,"./creative.coffee":5,"./util.coffee":14,events:1}],11:[function(e,t,r){var i,a,n;n=e("./urlhandlers/xmlhttprequest.coffee"),a=e("./urlhandlers/flash.coffee"),i=function(){function t(){}return t.get=function(t,r,i){return"undefined"==typeof window||null===window?e("./urlhandlers/node.coffee").get(t,r,i):n.supported()?n.get(t,r,i):a.supported()?a.get(t,r,i):i()},t}(),t.exports=i},{"./urlhandlers/flash.coffee":12,"./urlhandlers/xmlhttprequest.coffee":13}],12:[function(e,t,r){var i;i=function(){function e(){}return e.xdr=function(){var e;return window.XDomainRequest&&(e=new XDomainRequest),e},e.supported=function(){return!!this.xdr()},e.get=function(e,t,r){var i,a;return"function"==typeof t&&(r=t,t=null),(a="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)?(a.async=!1,i=this.xdr(),i.open("GET",e),t&&!0===t.withCredentials&&(i.withCredentials=!0),i.send(),i.onload=function(){return a.loadXML(i.responseText),r(null,a)}):r()},e}(),t.exports=i},{}],13:[function(e,t,r){var i;i=function(){function e(){}return e.xhr=function(){var e;if("withCredentials"in(e=new window.XMLHttpRequest))return e},e.supported=function(){return!!this.xhr()},e.get=function(e,t,r){var i;"function"==typeof t&&(r=t,t=null);try{return i=this.xhr(),i.open("GET",e),i.withCredentials=!0,i.send(),i.onreadystatechange=function(){if(4===i.readyState)return r(null,i.responseXML)}}catch(e){return r()}},e}(),t.exports=i},{}],14:[function(e,t,r){var i;i=function(){function e(){}return e.track=function(e,t){var r,i,a,n,o,s;for(i=this.resolveURLTemplates(e,t),s=[],n=0,o=i.length;n<o;n++)r=i[n],"undefined"!=typeof window&&null!==window&&(a=new Image,s.push(a.src=r));return s},e.resolveURLTemplates=function(e,t){var r,i,a,n,o,s,l,u,d;i=[],null==t&&(t={}),"CACHEBUSTING"in t||(t.CACHEBUSTING=Math.round(1e10*Math.random())),t.random=t.CACHEBUSTING;for(u=0,d=e.length;u<d;u++)if(r=e[u],s=r){for(a in t)l=t[a],n="["+a+"]",o="%%"+a+"%%",s=s.replace(n,l),s=s.replace(o,l);i.push(s)}return i},e.storage=function(){var e,t,r;try{r="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){e,r=null}return t=function(e){var t;try{if(t="__VASTUtil__",e.setItem(t,t),e.getItem(t)!==t)return!0}catch(e){return e,!0}return!1},(null==r||t(r))&&(e={},r={length:0,getItem:function(t){return e[t]},setItem:function(t,r){e[t]=r,this.length=Object.keys(e).length},removeItem:function(t){delete e[t],this.length=Object.keys(e).length},clear:function(){e={},this.length=0}}),r}(),e}(),t.exports=i},{}]},{},[6])(6)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(e,t,r){var i,a,n=function(e,t){function r(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;a=e("./widget.coffee"),i=function(e){function t(e){var r,i,n,o,s;s=e.visible,o=e.text,e.position,i=e.classNames,r=e.attributes,n=e.id,i=a.mergeClassNames(i,"tvz-ad_title"),t.__super__.constructor.call(this,"span",i,s,n,r),this.setText(o)}return n(t,e),t.prototype.setText=function(e){return null==e&&(e=""),this._source.innerHTML=e},t.prototype.getText=function(){return this._source.innerHTML},t}(a),t.exports=i},{"./widget.coffee":53}],40:[function(e,t,r){var i,a,n=function(e,t){function r(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;a=e("./widget.coffee"),i=function(e){function t(e){var r,i,n,o,s;s=e.visible,n=e.state,i=e.mode,o=e.text,r=e.classNames,r=a.mergeClassNames(r,"tvz-button"),t.__super__.constructor.call(this,"div",r,s),this._source.addEventListener("click",function(e){return function(t){return e.emit("click",{target:e,event:t})}}(this)),this.setState(n),this.setMode(i),this.setText(o)}return n(t,e),t.prototype.setText=function(e){return null==e&&(e=""),this._source.innerHTML=e},t.prototype.getText=function(){return this._source.innerHTML},t}(a),t.exports=i},{"./widget.coffee":53}],41:[function(e,t,r){var i,a,n=function(e,t){function r(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;a=e("./widget.coffee"),i=function(e){function t(e){var r,i,n,o,s;s=e.visible,o=e.text,e.position,i=e.classNames,r=e.attributes,n=e.id,i=a.mergeClassNames(i,"tvz-button_disable_ad"),t.__super__.constructor.call(this,"span",i,s,n,r),this._source.addEventListener("click",function(e){return function(t){return e.emit("click",{target:e,event:t})}}(this)),this.setText(o)}return n(t,e),t.prototype.setText=function(e){return null==e&&(e=""),this._source.innerHTML=e},t.prototype.getText=function(){return this._source.innerHTML},t}(a),t.exports=i},{"./widget.coffee":53}],42:[function(e,t,r){var i,a,n=function(e,t){function r(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;a=e("./widget.coffee"),i=function(e){function t(e){var r,i,n;n=e.visible,i=e.type,r=e.classNames,r=a.mergeClassNames(r,"tvz-loading_indicator2"),t.__super__.constructor.call(this,"div",r,n),this.setType(i)}return n(t,e),t.prototype.setType=function(e,t){var r;switch(null==e&&(e="working"),this._type=e,e){case"movie":r="Загрузка фильма...";break;case"ad":r="Загрузка рекламы...";break;case"progress":r="Восстанавливаем позицию...";break;case"error":r=4===t?"К сожалению, этот фильм пока не появился у нас на сайте":"Ошибка. Обновите страницу";break;default:r="Загрузка..."}return this._source.innerHTML=r,e},t.prototype.getType=function(){return this._type},t.prototype.startLoadingAnim=function(){},t}(a),t.exports=i},{"./widget.coffee":53}],43:[function(e,t,r){var i,a,n=function(e,t){function r(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;a=e("./widget.coffee"),i=function(e){function t(e){var r,i,n;n=e.visible,i=e.id,r=e.classNames,r=a.mergeClassNames(r,"tvz-movie_poster"),t.__super__.constructor.call(this,"div",r,n),this._source.setAttribute("width","100%"),this._source.addEventListener("click",function(e){return function(t){return e.emit("click",{target:e,event:t})}}(this)),null!=i&&this.set(i)}return n(t,e),t.prototype.set=function(e){var t;return t="//www.tvzavr.ru/cache/620x348/"+e+".jpg",this._source.style.backgroundImage='url("'+t+'")',t},t.prototype.clear=function(){return this._source.style.backgroundImage=""},t}(a),t.exports=i},{"./widget.coffee":53}],44:[function(e,t,r){var i,a,n=function(e,t){function r(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;a=e("./widget.coffee"),i=function(e){function t(e){var r,i,n;n=e.visible,i=e.title,r=e.classNames,i=i||{},r=a.mergeClassNames(r,"tvz-movie_title"),t.__super__.constructor.call(this,"div",r,n),this.set(i)}return n(t,e),t.prototype.set=function(e){var t;return null==e&&(e={}),t=null!=e.title?e.title:"",t+=null!=e.seasonNum&&e.seasonNum?". Сезон №"+e.seasonNum:"",t+=null!=e.seasonTitle&&e.seasonTitle?". "+e.seasonTitle:"",t+=null!=e.episodeNum&&e.episodeNum?". Серия №"+e.episodeNum:"",t+=null!=e.episodeTitle&&e.episodeTitle?". "+e.episodeTitle:"",this._source.innerHTML=t},t}(a),t.exports=i},{"./widget.coffee":53}],45:[function(e,t,r){var i,a,n,o=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t){function r(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;a=e("./widget.coffee"),n=e("../shared/utils.coffee"),i=function(e){function t(e){this._hideWithDelay=o(this._hideWithDelay,this),this._resetHideDelay=o(this._resetHideDelay,this),this._setHideDelay=o(this._setHideDelay,this),this._removeHideDelay=o(this._removeHideDelay,this);var r,i,n;n=e.visible,r=e.classNames,i=e.hideDelay,r=a.mergeClassNames(r,"tvz-panel"),t.__super__.constructor.call(this,"div",r,n),this._timer=null,this._delay=i,i&&this._setupHideDelay()}return s(t,e),t.prototype._setupHideDelay=function(){return this._source.addEventListener("mousemove",this._removeHideDelay),this._source.addEventListener("mouseout",this._setHideDelay),this.on("visibilitychange",function(e){return function(t){return t.visible?e._setHideDelay():e._removeHideDelay()}}(this))},t.prototype._removeHideDelay=function(){if(this._timer)return clearTimeout(this._timer),this._timer=null},t.prototype._setHideDelay=function(e){if(null==e&&(e=0),!this._timer)return this._timer=e>0?n.timeout(e,function(e){return function(){return e.hide()}}(this)):n.timeout(this._delay,function(e){return function(){return e.hide()}}(this))},t.prototype._resetHideDelay=function(){return this._timer&&clearTimeout(this._timer),this._timer=n.timeout(this._delay,function(e){return function(){return e.hide()}}(this))},t.prototype._hideWithDelay=function(e){return this._delay&&(this._source.removeEventListener("mousemove",this._removeHideDelay),this._source.removeEventListener("mouseout",this._setHideDelay)),this._timer&&clearTimeout(this._timer),this._timer=n.timeout(e,function(e){return function(){return e._delay&&(e._source.addEventListener("mousemove",e._removeHideDelay),e._source.addEventListener("mouseout",e._setHideDelay)),e.hide()}}(this))},t}(a),t.exports=i},{"../shared/utils.coffee":36,"./widget.coffee":53}],46:[function(e,t,r){var i,a,n,o=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t){function r(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("../shared/utils.coffee"),a=e("./widget.coffee"),i=function(e){function t(e){this._handleMouseUp=o(this._handleMouseUp,this),this._handleMouseMove=o(this._handleMouseMove,this),this._handleMouseDown=o(this._handleMouseDown,this),e=n.merge(r,e),t.__super__.constructor.call(this,"div","tvz-progress",e.visible),this._adCues=document.createElement("div"),n.addClass(this._adCues,"tvz-progress-ad_cues"),this._seek=document.createElement("div"),n.addClass(this._seek,"tvz-progress-seek"),this._handler=document.createElement("div"),n.addClass(this._handler,"tvz-progress-handler"),this._panel=e.panel._source,this._source.appendChild(this._adCues),this._source.appendChild(this._seek),this._source.appendChild(this._handler),this._panel.addEventListener("mousedown",this._handleMouseDown),this._panel.addEventListener("touchstart",this._handleMouseDown),this.setState(e.state),this.setWorkingState(e.working),this.setDuration(0),this.setCurrent(0)}var r;return s(t,e),r={visible:!0,state:"enabled",working:!1},t.prototype._getCurrentFromCoord=function(e,t){return null==e&&(e=0),null==t&&(t=0),t/(e/100)*(this.duration/100)},t.prototype._handleMouseDown=function(e){return e.preventDefault(),e.stopPropagation(),this.emit("seekstart",{target:this}),document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("touchmove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("touchend",this._handleMouseUp),this._handleMouseMove(e)},t.prototype._handleMouseMove=function(e){var t,r,i;return r=n.getPointerPos(this._source,e),i=r.x,r.y,t=i*this.duration,1===i&&(i=.9999),this.setCurrent(t),this.emit("seeking",{target:this,time:t})},t.prototype._handleMouseUp=function(e){var t,r;return t=n.getPointerPos(this._source,e),r=t.x,t.y,1===r&&(r=.9999),this.emit("seekend",{target:this,time:r*this.duration}),document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("touchmove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("touchend",this._handleMouseUp)},t.prototype.setCurrent=function(e){return null==e&&(e=0),this.current=e,this._updateView(),this.emit("currentchange",{target:this,current:e}),e},t.prototype._updateView=function(){var e;return e=this.current/(this.duration/100),this._seek.style.width=e+"%",this._handler.style.left=e+"%"},t.prototype.setState=function(e){switch(null==e&&(e="enabled"),this._state=e,e){case"disabled":n.addClass(this._source,"tvz-progress__disabled");break;default:n.removeClass(this._source,"tvz-progress__disabled")}return this.emit("statechange",{target:this,state:e}),e},t.prototype.getState=function(){return this._state},t.prototype.setWorkingState=function(e){return null==e&&(e=!1),this._working=e,e?n.addClass(this._source,"tvz-progress__working"):n.removeClass(this._source,"tvz-progress__working"),this.emit("workingchange",{target:this,working:e}),e},t.prototype.getWorkingState=function(){return this._working},t.prototype.setDuration=function(e){return null==e&&(e=0),Infinity===e&&(e=0),this.duration=e,this._updateView(),this.emit("durationchange",{target:this,duration:e}),e},t.prototype.setAdCues=function(e){var t,r,i,a,n;for(null==e&&(e=[]),i=0,a=e.length;i<a;i++)r=e[i],t=document.createElement("div"),t.className="tvz-progress-ad_cues-ad_cue",n=r/(this.duration/100)+"%",t.style.left=n,this._adCues.appendChild(t);return this._adCues},t}(a),t.exports=i},{"../shared/utils.coffee":36,"./widget.coffee":53}],47:[function(e,t,r){var i,a,n,o=function(e,t){function r(){this.constructor=e}for(var i in t)s.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};n=e("../shared/utils.coffee"),a=e("./widget.coffee"),e("events").EventEmitter,e("../shared/debug.coffee"),i=function(e){function t(e){e=n.merge(r,e),this._panel=e.panel._source,this.panel=e.panel,this.subtitlesPanel=e.subtitlesPanel,this.audiotracksPanel=e.audiotracksPanel,this.duration=100,this.adblock=!1}var r,i;return o(t,e),r={visible:!0},i="",t.prototype.init=function(e,t){return this.adblock=t,this.initSettings(e),this.initSubtitles(e),this.initAudiotracks(e)},t.prototype.adblockQuality=function(e){return this.adblock=!0,this.emit("qualitychange",{target:this,quality:"240"}),this.disableAllQualities(e),this.selectQuality("240")},t.prototype.setAuto=function(){return this.deselectAllQualities(),this.selectQuality("ABTO")},t.prototype.tryToSetQuality=function(e,t){var r;switch(t){case"default":r="ABTO";break;case"small":r="240";break;case"medium":r="360";break;case"large":r="SD 480";break;case"hd720":r="HD 720";break;case"hd1080":r="FullHD 1080";break
;case"highres":r="2K 1440"}return l.call(e.qualityNames,r)<0&&(r="ABTO"),this.emit("qualitychange",{target:this,quality:r}),this.deselectAllQualities(),this.selectQuality(r)},t.prototype.initAudiotracks=function(e){var t,r,a,o,s;for(a=Array.prototype.concat.apply(["назад","-"],e.audioTracks),this.panelAudiotracksHeight=20,this.panelAudiotracksHeightMini=14,t=0;t<a.length;){switch(r=document.createElement("div"),r.name=a[t],this.audiotracksPanel._source.appendChild(r),s=document.createElement("span"),s.setAttribute("id",a[t]),r.appendChild(s),a[t]){case"-":n.addClass(r,"tvz-controls_settings_spacer"),this.panelAudiotracksHeight+=8,this.panelAudiotracksHeightMini+=6,s.innerHTML=this.locale(a[t]);break;case"назад":n.addClass(r,"tvz-controls_settings_item_small"),r.addEventListener("click",function(e){return function(t){return e.audiotracksPanel.hide(),e.panel.show(),null}}(this)),this.panelAudiotracksHeight+=18,this.panelAudiotracksHeightMini+=14,s.innerHTML=this.locale(a[t]);break;default:n.addClass(r,"tvz-controls_settings_item"),a[t]===e.selectedTrack&&(r.dataset.selected=!0,i&&(r.style.color=i)),r.addEventListener("click",function(e){return function(t){return"true"!==t.target.parentNode.dataset.selected?(e.emit("audiotrackchange",{target:t.target,audiotrack:t.target.getAttribute("id")}),e.deselectAllAudiotracks(),t.target.parentNode.dataset.selected=!0,i&&(t.target.parentNode.style.color=i),e.audiotracksPanel._hideWithDelay(200)):e.audiotracksPanel._hideWithDelay(200),null}}(this)),this.panelAudiotracksHeight+=18,this.panelAudiotracksHeightMini+=14,s.innerHTML=a[t]}t++}return"mini"===(o=this._panel.parentNode.getAttribute("data-scale"))||"mini2"===o?this.audiotracksPanel._source.style.height=this.panelAudiotracksHeightMini+"px":this.audiotracksPanel._source.style.height=this.panelAudiotracksHeight+"px",null},t.prototype.initSubtitles=function(e){var t,r,a,o,s;for(a=[],a.push("назад"),a.push("-"),Array.prototype.push.apply(a,e.m3u8Manifest.subtitles.langs),this.panelSubtitlesHeight=20,this.panelSubtitlesHeightMini=14,t=0;t<a.length;){switch(r=document.createElement("div"),r.name=a[t],this.subtitlesPanel._source.appendChild(r),s=document.createElement("span"),s.setAttribute("id",a[t]),r.appendChild(s),a[t]){case"-":s.innerHTML="",n.addClass(r,"tvz-controls_settings_spacer"),this.panelSubtitlesHeight+=8,this.panelSubtitlesHeightMini+=6;break;case"назад":n.addClass(r,"tvz-controls_settings_item_small"),r.addEventListener("click",function(e){return function(t){return e.subtitlesPanel.hide(),e.panel.show(),null}}(this)),this.panelSubtitlesHeight+=18,this.panelSubtitlesHeightMini+=14;break;default:n.addClass(r,"tvz-controls_settings_item"),a[t]===e.selectedSubtitles&&(r.dataset.selected=!0,i&&(r.style.color=i)),r.addEventListener("click",function(e){return function(t){return"true"!==t.target.parentNode.dataset.selected?(e.emit("subtitleschange",{target:t.target,subtitles:t.target.getAttribute("id")}),e.deselectAllSubtitles(),t.target.parentNode.dataset.selected=!0,i&&(t.target.parentNode.style.color=i),e.subtitlesPanel._hideWithDelay(200)):e.subtitlesPanel._hideWithDelay(200),null}}(this)),this.panelSubtitlesHeight+=18,this.panelSubtitlesHeightMini+=14}s.innerHTML=this.locale(a[t]),t++}return"mini"===(o=this._panel.parentNode.getAttribute("data-scale"))||"mini2"===o?this.subtitlesPanel._source.style.height=this.panelSubtitlesHeightMini+"px":this.subtitlesPanel._source.style.height=this.panelSubtitlesHeight+"px",null},t.prototype.initSettings=function(e){var t,r,a,o,s;for(t=0,a=n.objCopyJson(e.qualityNames),this.flag=!0,Array.prototype.push.apply(a,["-","Язык субтитров","Язык аудио"]),this.panelHeight=20,this.panelHeightMini=14;t<a.length;){switch(r=document.createElement("div"),r.name=a[t],this._panel.appendChild(r),s=document.createElement("span"),s.setAttribute("id",a[t]),r.appendChild(s),s.innerHTML=a[t],a[t]){case"-":s.innerHTML="",n.addClass(r,"tvz-controls_settings_spacer"),this.panelHeight+=8,this.panelHeightMini+=6;break;case"Язык субтитров":n.addClass(r,"tvz-controls_settings_item_small"),e.m3u8Manifest.subtitles.isExist?r.addEventListener("click",function(e){return function(t){return e.subtitlesPanel.show(),e.panel.hide(),null}}(this)):r.dataset.grey=!0,this.panelHeight+=18,this.panelHeightMini+=14;break;case"Язык аудио":n.addClass(r,"tvz-controls_settings_item_small"),r.addEventListener("click",function(e){return function(t){return e.audiotracksPanel.show(),e.panel.hide(),null}}(this)),this.panelHeight+=18,this.panelHeightMini+=14;break;default:n.addClass(r,"tvz-controls_settings_item"),a[t]===e.selectedQuality?(r.dataset.selected=!0,i&&(r.style.color=i)):this.adblock&&(r.dataset.grey=!0),r.addEventListener("click",function(e){return function(t){return"true"===t.target.parentNode.dataset.selected||e.adblock||(e.emit("qualitychange",{target:t.target,quality:t.target.getAttribute("id")}),e.deselectAllQualities(),t.target.parentNode.dataset.selected=!0,i&&(t.target.parentNode.style.color=i),e.panel._hideWithDelay(200)),null}}(this)),this.panelHeight+=18,this.panelHeightMini+=14}t++}return"mini"===(o=this._panel.parentNode.getAttribute("data-scale"))||"mini2"===o?this._panel.style.height=this.panelHeightMini+"px":this._panel.style.height=this.panelHeight+"px",this.itemsCount=t,null},t.prototype.deselectAllAudiotracks=function(){var e;for(e=0;e<this.audiotracksPanel._source.childElementCount;)this.audiotracksPanel._source.children[e].dataset.selected=!1,this.audiotracksPanel._source.children[e].style.color="",e++;return null},t.prototype.deselectAllQualities=function(){var e;for(e=0;e<this._panel.childElementCount;)this._panel.children[e].dataset.selected=!1,this._panel.children[e].style.color="",e++;return null},t.prototype.disableAllQualities=function(e){var t,r;for(t=0;t<this._panel.childElementCount;)r=this._panel.children[t].children[0].id,l.call(e.qualityNames,r)>=0&&(this._panel.children[t].dataset.selected=!1,this._panel.children[t].style.color="",this._panel.children[t].dataset.grey=!0),t++;return null},t.prototype.selectQuality=function(e){var t;for(t=0;t<this._panel.childElementCount;)this._panel.children[t].children[0].id===e&&(this._panel.children[t].dataset.selected=!0,this._panel.children[t].dataset.grey=!1,this._panel.children[t].style.color=i),t++;return null},t.prototype.deselectAllSubtitles=function(){var e;for(e=0;e<this.subtitlesPanel._source.childElementCount;)this.subtitlesPanel._source.children[e].dataset.selected=!1,this.subtitlesPanel._source.children[e].style.color="",e++;return null},t.prototype.locale=function(e){switch(e){case"-":return" ";case"назад":return"назад";case"ron":return"Romanian";case"roq":return"Romanian 5.1";case"ara":return"Arabic";case"arq":return"Arabic 5.1";case"jpn":return"Japanese";case"jpq":return"Japanese 5.1";case"eng":return"English";case"enq":return"English 5.1";case"ita":return"Italian";case"itq":return"Italian 5.1";case"rus":return"Русский";case"ruq":return"Русский 5.1";case"spa":return"Spanish";case"spq":return"Spanish 5.1";case"chi":case"zho":return"Chinese";case"chq":case"zhq":case"cnq":return"Chinese 5.1";case"fas":return"Persian";case"faq":return"Persian 5.1";case"bul":return"Bulgarian";case"buq":return"Bulgarian 5.1";case"bld":return"Тифло";case"kor":return"Korean";case"koq":return"Korean 5.1";case"dan":return"Danish";case"daq":return"Danish 5.1";case"kat":return"Georgian";case"kaq":return"Georgian 5.1";case"fre":return"French";case"frq":return"French 5.1";case"srp":return"Serbian";case"srq":return"Serbian 5.1";case"dut":return"Dutch";case"duq":return"Dutch 5.1";case"ger":return"Deutsch";case"geq":case"deq":return"Deutsch 5.1";case"por":return"Portuguese";case"poq":return"Portuguese 5.1";case"kin":return"Kinyarwanda";case"kiq":return"Kinyarwanda 5.1";case"ces":return"Czech";case"ceq":return"Czech 5.1";case"cze":return"Czech";case"czq":return"Czech 5.1";case"ell":return"Greek";case"elq":return"Greek 5.1";default:return e}},t.prototype.setColor=function(e){return i=e,null},t}(a),t.exports=i},{"../shared/debug.coffee":34,"../shared/utils.coffee":36,"./widget.coffee":53,events:2}],48:[function(e,t,r){var i,a,n=function(e,t){function r(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;a=e("./widget.coffee"),i=function(e){function t(e){t.__super__.constructor.call(this,"div",a.mergeClassNames(e))}return n(t,e),t.prototype.moveUp=function(){return this._source.style.height="calc(100% - 65px)"},t.prototype.moveDown=function(){return this._source.style.height=""},t.prototype.clear=function(){return this._source.innerHTML=""},t}(a),t.exports=i},{"./widget.coffee":53}],49:[function(e,t,r){var i,a,n=function(e,t){function r(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;a=e("./widget.coffee"),i=function(e){function t(e){var r,i,n,o;o=e.visible,n=e.text,i=e.position,r=e.classNames,r=a.mergeClassNames(r,"tvz-text_label"),t.__super__.constructor.call(this,"span",r,o),this.setText(n),this.setPosition(i)}return n(t,e),t.prototype.setText=function(e){return null==e&&(e=""),this._source.innerHTML=e},t.prototype.getText=function(){return this._source.innerHTML},t.prototype.setPosition=function(e){return null==e&&(e="tl"),this._position=e,this._source.setAttribute("data-position",e),e},t.prototype.getPosition=function(){return this._position},t}(a),t.exports=i},{"./widget.coffee":53}],50:[function(e,t,r){var i,a,n,o=function(e,t){function r(){this.constructor=e}for(var i in t)s.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s={}.hasOwnProperty;n=e("../shared/utils.coffee"),a=e("./widget.coffee"),i=function(e){function t(e){var r,i,n;n=e.visible,i=e.time,r=e.classNames,r=a.mergeClassNames(r,"tvz-time_label"),t.__super__.constructor.call(this,"span",r,n),this.set(i)}return o(t,e),t.prototype.set=function(e){return null==e&&(e=0),Infinity===e&&(e=0),this._source.innerHTML=n.formatTime(e)},t}(a),t.exports=i},{"../shared/utils.coffee":36,"./widget.coffee":53}],51:[function(e,t,r){var i,a,n=function(e,t){function r(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o={}.hasOwnProperty;a=e("./widget.coffee"),i=function(e){function t(e){var r,i;i=e.visible,e.text,e.position,r=e.classNames,r=a.mergeClassNames(r,"tvz-logo"),t.__super__.constructor.call(this,"span",r,i),this._source.addEventListener("click",function(e){return function(t){return e.emit("click",{target:e,event:t})}}(this))}return n(t,e),t.prototype.setState=function(e){return null==e&&(e=""),this._state=e,this._source.setAttribute("data-state",e),this.emit("statechange",{target:this,state:e}),e},t.prototype.getState=function(){return this._state},t}(a),t.exports=i},{"./widget.coffee":53}],52:[function(e,t,r){var i,a,n,o=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t){function r(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("../shared/utils.coffee"),a=e("./widget.coffee"),i=function(e){function t(e){this._handleMouseUp=o(this._handleMouseUp,this),this._handleMouseMove=o(this._handleMouseMove,this),this._handleMouseDown=o(this._handleMouseDown,this),this._test=o(this._test,this),e=n.merge(r,e),t.__super__.constructor.call(this,"div","tvz-volume",e.visible),this._panel=e.panel._source,this._bar=document.createElement("div"),n.addClass(this._bar,"tvz-volume-seek"),this._handler=document.createElement("div"),n.addClass(this._handler,"tvz-volume-handler"),this._source.appendChild(this._bar),this._source.appendChild(this._handler),this._panel.addEventListener("mousedown",this._handleMouseDown),this._panel.addEventListener("touchstart",this._handleMouseDown),this.duration=100}var r;return s(t,e),r={visible:!0},t.prototype.setCurrent=function(e,t,r){return null==e&&(e=100),null==t&&(t=!0),null==r&&(r=!1),this.current=e,this._updateView(),this.emit("volumechange",{target:this,current:this._toVolume(),save:t,user:r}),e},t.prototype._toVolume=function(){var e;return e=this.current/100,+e.toFixed(1)},t.prototype._updateView=function(){return this._bar.style.height=this.current+"%",this._handler.style.bottom=this.current+"%"},t.prototype._test=function(e){},t.prototype._handleMouseDown=function(e){return e.preventDefault(),e.stopPropagation(),document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("touchmove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("touchend",this._handleMouseUp),this._handleMouseMove(e)},t.prototype._handleMouseMove=function(e){var t,r,i;return r=n.getPointerPos(this._source,e),r.x,i=r.y,t=i*this.duration,this.setCurrent(t,!0,!0)},t.prototype._handleMouseUp=function(e){return document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("touchmove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("touchend",this._handleMouseUp)},t}(a),t.exports=i},{"../shared/utils.coffee":36,"./widget.coffee":53}],53:[function(e,t,r){var i,a,n,o=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t){function r(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},l={}.hasOwnProperty;n=e("../shared/utils.coffee"),i=e("events").EventEmitter,a=function(e){function t(e,t,i,a,n){var s,l,u;if(null==e&&(e="div"),null==t&&(t="tvz-widget"),null==i&&(i=!0),null==a&&(a=""),null==n&&(n={}),this.toggle=o(this.toggle,this),this.hide=o(this.hide,this),this.show=o(this.show,this),this._source=document.createElement(e.toLowerCase()),r=this._source,this.visible=i,"string"==typeof t)this.addClass(t);else for(l=0,u=t.length;l<u;l++)s=t[l],this.addClass(s);Object.keys(n).forEach(function(e){return function(t){return e._source.setAttribute(t,n[t])}}(this)),this.addId(a),this._source.addEventListener("transitionend",function(e){return function(t){var r;if(r=parseFloat(getComputedStyle(e._source).opacity),"opacity"===t.propertyName&&0===r)return e._source.style.display="none"}}(this)),this._source.addEventListener("mouseover",function(e){return function(t){return e.onMouseOver(t)}}(this)),this._source.addEventListener("mouseout",function(e){return function(t){return e.onMouseOut(t)}}(this)),i||(this._source.style.display="none",this._source.style.opacity=0)}var r;return s(t,e),r={},t.prototype.onMouseOver=function(){},t.prototype.onMouseOut=function(){},t.prototype.setVisibility=function(e){return null==e&&(e=!0),this.visible=e,e?(this.removeClass("tvz__hidden"),this._source.style.display="",n.timeout(20,function(e){return function(){return e._source.style.opacity=1}}(this))):(this._source.style.opacity=0,0===parseFloat(getComputedStyle(this._source).opacity)&&(this._source.style.display="none")),this.emit("visibilitychange",{target:this,visible:e}),this.visible},t.prototype.show=function(){return this.setVisibility(!0)},t.prototype.hide=function(){return this.setVisibility(!1)},t.prototype.setState=function(e){return null==e&&(e=""),this._state=e,this._source.setAttribute("data-state",e),this.emit("statechange",{target:this,state:e}),e},t.prototype.getState=function(){return this._state},t.prototype.setMode=function(e){return null==e&&(e=""),this._mode=e,this._source.setAttribute("data-mode",e),this.emit("modechange",{target:this,mode:e}),e},t.prototype.getMode=function(){return this._mode},t.prototype.toggle=function(){return this.setVisibility(!this.visible)},t.prototype.disableMouse=function(){return this.addClass("tvz__disable_mouse")},t.prototype.enableMouse=function(){return this.removeClass("tvz__disable_mouse")},t.prototype.hideMouse=function(){return this.addClass("tvz-hide-mouse")},t.prototype.showMouse=function(){return this.removeClass("tvz-hide-mouse")},t.prototype.append=function(e){return this._source.appendChild(e._source),this},t.prototype.appendTo=function(e){return e._source.appendChild(this._source),this},t.prototype.addId=function(e){return this._source.id=e,this},t.prototype.addClass=function(e){return n.addClass(this._source,e),this},t.prototype.removeClass=function(e){return n.removeClass(this._source,e),this},t.prototype.toggleClass=function(e){return this._source.className.indexOf(e)>-1?this.removeClass(e):this.addClass(e)},t.mergeClassNames=function(e,t){return null==e&&(e=""),null==t&&(t=""),null!=e&&e?"string"==typeof e?[t,e]:(e.push(t),e):[t]},t}(i),t.exports=a},{"../shared/utils.coffee":36,events:2}]},{},[37])(37)});
